import{a as M,b as W,_ as K}from"./TradesLogChart-SYGTgJDu.js";import{c as Q}from"./TradeList-Dl9robre.js";import{b as X,c as Y}from"./InfoBox.vue_vue_type_script_setup_true_lang-D0p1AO7G.js";import{g as z,u as j,k as c,o as _,x as T,w as s,a as O,h as e,e as D,q as v,z as C,y as Z,c as I,m as ee,l as te,a1 as oe,G as ae,C as se,r as re,D as B,b9 as k,n as le,H as U,b as r,I as L}from"./index-DlUcbSds.js";import{_ as ne,a as ie}from"./TimePeriodChart-CyJqVqUK.js";import"./installCanvasRenderer-BCi_cPJ5.js";import"./chartZoom-71GenF7r.js";const de={class:"d-flex flex-row"},ce={key:2},ue={key:0},pe=["title"],_e={class:"text-small"},fe={key:0},me={class:"text-profit"},ye={class:"text-loss"},he=z({__name:"BotComparisonList",setup(A){const t=j(),f=c({get:()=>Object.values(t.botStores).every(l=>l.isSelected),set:l=>{for(const i in t.botStores)t.botStores[i].isSelected=l}}),P=[{key:"botName",label:"Bot"},{key:"trades",label:"Trades"},{key:"profitOpen",label:"Open Profit"},{key:"profitClosed",label:"Closed Profit"},{key:"balance",label:"Balance"},{key:"winVsLoss",label:"W/L"}],R=c(()=>{const l=[],i={botId:void 0,botName:"Summary",profitClosed:0,profitClosedRatio:void 0,profitOpen:0,profitOpenRatio:void 0,stakeCurrency:"USDT",wins:0,losses:0};return Object.entries(t.allProfit).forEach(([a,d])=>{var p,y,h,b,V,g,$;const m=t.allOpenTrades[a].reduce((w,n)=>w+n.stake_amount,0),o=t.allOpenTrades[a].reduce((w,n)=>w+(n.total_profit_ratio??n.profit_ratio)*n.stake_amount,0)/m,u=t.allOpenTrades[a].reduce((w,n)=>w+(n.total_profit_abs??n.profit_abs??0),0);l.push({botId:a,botName:t.availableBots[a].botName||t.availableBots[a].botId,trades:`${t.allOpenTradeCount[a]} / ${((p=t.allBotState[a])==null?void 0:p.max_open_trades)||"N/A"}`,profitClosed:d.profit_closed_coin,profitClosedRatio:d.profit_closed_ratio||0,stakeCurrency:((y=t.allBotState[a])==null?void 0:y.stake_currency)||"",profitOpenRatio:o,profitOpen:u,wins:d.winning_trades,losses:d.losing_trades,balance:((h=t.allBalance[a])==null?void 0:h.total_bot)??((b=t.allBalance[a])==null?void 0:b.total),stakeCurrencyDecimals:((V=t.allBotState[a])==null?void 0:V.stake_currency_decimals)||3,isDryRun:(g=t.allBotState[a])==null?void 0:g.dry_run}),d.profit_closed_coin!==void 0&&t.botStores[a].isSelected&&(i.profitClosed+=d.profit_closed_coin,i.profitOpen+=u,i.wins+=d.winning_trades,i.losses+=d.losing_trades,i.stakeCurrency=(($=t.allBotState[a])==null?void 0:$.stake_currency)||i.stakeCurrency)}),l.push(i),l});return(l,i)=>{const a=oe,d=X,m=ae;return _(),T(m,{ref:"tradesTable",small:"",hover:"","show-empty":"","primary-key":"botId",items:e(R),fields:P},{"cell(botName)":s(({item:o,value:u})=>[O("div",de,[o.botId&&e(t).botCount>1?(_(),T(a,{key:0,modelValue:e(t).botStores[o.botId??""].isSelected,"onUpdate:modelValue":p=>e(t).botStores[o.botId??""].isSelected=p,title:"Show this bot in Dashboard"},{default:s(()=>[D(v(u),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])):C("",!0),!o.botId&&e(t).botCount>1?(_(),T(a,{key:1,modelValue:e(f),"onUpdate:modelValue":i[0]||(i[0]=p=>Z(f)?f.value=p:null),title:"Toggle all bots"},{default:s(()=>[D(v(u),1)]),_:2},1032,["modelValue"])):C("",!0),e(t).botCount<=1?(_(),I("span",ce,v(u),1)):C("",!0)])]),"cell(profitOpen)":s(({item:o})=>[o.profitOpen&&o.botId!="Summary"?(_(),T(d,{key:0,"profit-ratio":o.profitOpenRatio,"profit-abs":o.profitOpen,"profit-desc":`Total Profit (Open and realized) ${("formatPercent"in l?l.formatPercent:e(ee))(o.profitOpenRatio??0)}`,"stake-currency":o.stakeCurrency},null,8,["profit-ratio","profit-abs","profit-desc","stake-currency"])):C("",!0)]),"cell(profitClosed)":s(({item:o})=>[o.profitClosed&&o.botId!="Summary"?(_(),T(d,{key:0,"profit-ratio":o.profitClosedRatio,"profit-abs":o.profitClosed,"stake-currency":o.stakeCurrency},null,8,["profit-ratio","profit-abs","stake-currency"])):C("",!0)]),"cell(balance)":s(({item:o})=>[o.balance?(_(),I("div",ue,[O("span",{title:o.stakeCurrency},v(("formatPrice"in l?l.formatPrice:e(te))(o.balance??0,o.stakeCurrencyDecimals)),9,pe),O("span",_e,v(` ${o.stakeCurrency}${o.isDryRun?" (dry)":""}`),1)])):C("",!0)]),"cell(winVsLoss)":s(({item:o})=>[o.losses!==void 0?(_(),I("div",fe,[O("span",me,v(o.wins),1),D(" / "),O("span",ye,v(o.losses),1)])):C("",!0)]),_:1},8,["items"])}}}),be={class:"d-flex justify-content-center"},ge={class:"d-flex justify-content-center"},Le=z({__name:"DashboardView",setup(A){const t=j(),f=se(),P=re("");function R(g){P.value=g}const l=c(()=>["","sm","md","lg","xl"].includes(P.value)),i=c(()=>f.layoutLocked||!l.value),a=c(()=>l.value?f.dashboardLayout:[...f.getDashboardLayoutSm]);function d(g){l.value&&(console.log("newlayout",g),console.log("saving dashboard"),f.dashboardLayout=g)}const m=c(()=>B(a.value,k.dailyChart)),o=c(()=>B(a.value,k.botComparison)),u=c(()=>B(a.value,k.allOpenTrades)),p=c(()=>B(a.value,k.allClosedTrades)),y=c(()=>B(a.value,k.cumChartChart)),h=c(()=>B(a.value,k.profitDistributionChart)),b=c(()=>B(a.value,k.tradesLogChart)),V=c(()=>({sm:f.getDashboardLayoutSm}));return le(async()=>{t.allGetDaily({timescale:30}),t.activeBot.getOpenTrades(),t.activeBot.getProfit()}),(g,$)=>{const w=ne,n=ie,S=U("GridItem"),E=he,N=Y,G=Q,F=M,q=W,H=K,J=U("GridLayout");return _(),T(J,{class:"h-100 w-100","row-height":50,layout:e(a),"vertical-compact":!1,margin:[5,5],"responsive-layouts":e(V),"is-resizable":!e(i),"is-draggable":!e(i),responsive:!0,"prevent-collision":!0,cols:{lg:12,md:12,sm:12,xs:4,xxs:2},"col-num":12,onLayoutUpdated:d,"onUpdate:breakpoint":R},{default:s(({gridItemProps:x})=>[r(S,L(x,{i:e(m).i,x:e(m).x,y:e(m).y,w:e(m).w,h:e(m).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:s(()=>[r(n,{header:`Daily Profit ${e(t).botCount>1?"combined":""}`},{default:s(()=>[e(t).allDailyStatsSelectedBots?(_(),T(w,{key:0,"daily-stats":e(t).allDailyStatsSelectedBots,"show-title":!1},null,8,["daily-stats"])):C("",!0)]),_:1},8,["header"])]),_:2},1040,["i","x","y","w","h"]),r(S,L(x,{i:e(o).i,x:e(o).x,y:e(o).y,w:e(o).w,h:e(o).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:s(()=>[r(n,{header:"Bot comparison"},{default:s(()=>[r(E)]),_:1})]),_:2},1040,["i","x","y","w","h"]),r(S,L(x,{i:e(u).i,x:e(u).x,y:e(u).y,w:e(u).w,h:e(u).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:s(()=>[r(n,null,{header:s(()=>[O("div",be,[D(" Open Trades "),r(N,{class:"ms-2",hint:"Open trades of all selected bots. Click on a trade to go to the trade page for that trade/bot."})])]),default:s(()=>[r(G,{"active-trades":"",trades:e(t).allOpenTradesSelectedBots,"multi-bot-view":""},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"]),r(S,L(x,{i:e(y).i,x:e(y).x,y:e(y).y,w:e(y).w,h:e(y).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:s(()=>[r(n,{header:"Cumulative Profit"},{default:s(()=>[r(F,{trades:e(t).allTradesSelectedBots,"open-trades":e(t).allOpenTradesSelectedBots,"show-title":!1},null,8,["trades","open-trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"]),r(S,L(x,{i:e(p).i,x:e(p).x,y:e(p).y,w:e(p).w,h:e(p).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:s(()=>[r(n,null,{header:s(()=>[O("div",ge,[D(" Closed Trades "),r(N,{class:"ms-2",hint:"Closed trades for all selected bots. Click on a trade to go to the trade page for that trade/bot."})])]),default:s(()=>[r(G,{"active-trades":!1,"show-filter":"",trades:e(t).allClosedTradesSelectedBots,"multi-bot-view":""},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"]),r(S,L(x,{i:e(h).i,x:e(h).x,y:e(h).y,w:e(h).w,h:e(h).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:s(()=>[r(n,{header:"Profit Distribution"},{default:s(()=>[r(q,{trades:e(t).allTradesSelectedBots,"show-title":!1},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"]),r(S,L(x,{i:e(b).i,x:e(b).x,y:e(b).y,w:e(b).w,h:e(b).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:s(()=>[r(n,{header:"Trades Log"},{default:s(()=>[r(H,{trades:e(t).allTradesSelectedBots,"show-title":!1},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"])]),_:1},8,["layout","responsive-layouts","is-resizable","is-draggable"])}}});export{Le as default};
//# sourceMappingURL=DashboardView-DhTFfviU.js.map
