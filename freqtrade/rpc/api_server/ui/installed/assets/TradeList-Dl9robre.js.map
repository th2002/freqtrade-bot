{"version":3,"file":"TradeList-Dl9robre.js","sources":["../../src/components/ftbot/ForceEntryForm.vue","../../src/components/ftbot/ForceExitForm.vue","../../src/components/ftbot/TradeActionsPopover.vue","../../src/components/ftbot/TradeList.vue"],"sourcesContent":["<template>\n  <BModal\n    id=\"forceentry-modal\"\n    ref=\"modal\"\n    v-model=\"model\"\n    :title=\"positionIncrease ? `Increasing position for ${pair}` : 'Force entering a trade'\"\n    @show=\"resetForm\"\n    @hidden=\"resetForm\"\n    @ok=\"handleEntry\"\n  >\n    <form ref=\"form\" @submit.stop.prevent=\"handleSubmit\">\n      <BFormGroup\n        v-if=\"botStore.activeBot.botApiVersion >= 2.13 && botStore.activeBot.shortAllowed\"\n        label=\"Order direction (Long or Short)\"\n        label-for=\"order-direction\"\n        invalid-feedback=\"Order direction must be set\"\n        :state=\"orderSide !== undefined\"\n      >\n        <BFormRadioGroup\n          id=\"order-direction\"\n          v-model=\"orderSide\"\n          :options=\"orderSideOptions\"\n          name=\"radios-btn-default\"\n          size=\"sm\"\n          buttons\n          style=\"min-width: 10em\"\n          button-variant=\"outline-primary\"\n        ></BFormRadioGroup>\n      </BFormGroup>\n      <BFormGroup\n        label=\"Pair\"\n        label-for=\"pair-input\"\n        invalid-feedback=\"Pair is required\"\n        :state=\"selectedPair !== undefined\"\n      >\n        <BFormInput\n          id=\"pair-input\"\n          v-model=\"selectedPair\"\n          required\n          :disabled=\"positionIncrease\"\n          @keydown.enter=\"handleEntry\"\n          @focus=\"inputSelect\"\n        ></BFormInput>\n      </BFormGroup>\n      <BFormGroup\n        label=\"*Price [optional]\"\n        label-for=\"price-input\"\n        invalid-feedback=\"Price must be empty or a positive number\"\n        :state=\"!price || price > 0\"\n      >\n        <BFormInput\n          id=\"price-input\"\n          v-model=\"price\"\n          type=\"number\"\n          step=\"0.00000001\"\n          @keydown.enter=\"handleEntry\"\n        ></BFormInput>\n      </BFormGroup>\n      <BFormGroup\n        :label=\"`*Stake-amount in ${botStore.activeBot.stakeCurrency} [optional]`\"\n        label-for=\"stake-input\"\n        invalid-feedback=\"Stake-amount must be empty or a positive number\"\n        :state=\"!stakeAmount || stakeAmount > 0\"\n      >\n        <BFormInput\n          id=\"stake-input\"\n          v-model=\"stakeAmount\"\n          type=\"number\"\n          step=\"0.000001\"\n          @keydown.enter=\"handleEntry\"\n        ></BFormInput>\n      </BFormGroup>\n      <BFormGroup\n        v-if=\"botStore.activeBot.botApiVersion > 2.16 && botStore.activeBot.shortAllowed\"\n        :label=\"`*Leverage to apply [optional]`\"\n        label-for=\"leverage-input\"\n        invalid-feedback=\"Leverage must be empty or a positive number\"\n        :state=\"!leverage || leverage > 0\"\n      >\n        <BFormInput\n          id=\"leverage-input\"\n          v-model=\"leverage\"\n          type=\"number\"\n          step=\"0.01\"\n          @keydown.enter=\"handleEntry\"\n        ></BFormInput>\n      </BFormGroup>\n      <BFormGroup\n        label=\"OrderType\"\n        label-for=\"ordertype-input\"\n        invalid-feedback=\"OrderType\"\n        :state=\"true\"\n      >\n        <BFormRadioGroup\n          id=\"ordertype-input\"\n          v-model=\"ordertype\"\n          :options=\"orderTypeOptions\"\n          name=\"radios-btn-orderType\"\n          buttons\n          button-variant=\"outline-primary\"\n          style=\"min-width: 10em\"\n          size=\"sm\"\n        ></BFormRadioGroup>\n      </BFormGroup>\n      <BFormGroup\n        v-if=\"botStore.activeBot.botApiVersion > 1.16\"\n        label=\"*Custom entry tag Optional]\"\n        label-for=\"enterTag-input\"\n      >\n        <BFormInput\n          id=\"enterTag-input\"\n          v-model=\"enterTag\"\n          type=\"text\"\n          name=\"radios-btn-orderType\"\n        ></BFormInput>\n      </BFormGroup>\n    </form>\n  </BModal>\n</template>\n\n<script setup lang=\"ts\">\nimport { useBotStore } from '@/stores/ftbotwrapper';\nimport { ForceEnterPayload, OrderSides } from '@/types';\n\nconst props = defineProps({\n  pair: { type: String, default: '' },\n  positionIncrease: { type: Boolean, default: false },\n});\nconst model = defineModel<boolean>();\nconst botStore = useBotStore();\n\nconst form = ref<HTMLFormElement>();\nconst selectedPair = ref('');\nconst price = ref<number | undefined>(undefined);\nconst stakeAmount = ref<number | undefined>(undefined);\nconst leverage = ref<number | undefined>(undefined);\n\nconst ordertype = ref('');\nconst orderSide = ref<OrderSides>(OrderSides.long);\nconst enterTag = ref('force_entry');\n\nconst orderTypeOptions = [\n  { value: 'market', text: 'Market' },\n  { value: 'limit', text: 'Limit' },\n];\nconst orderSideOptions = [\n  { value: 'long', text: 'Long' },\n  { value: 'short', text: 'Short' },\n];\n\nconst checkFormValidity = () => {\n  const valid = form.value?.checkValidity();\n\n  return valid;\n};\n\nconst handleSubmit = async () => {\n  // Exit when the form isn't valid\n  if (!checkFormValidity()) {\n    return;\n  }\n\n  // call forceentry\n  const payload: ForceEnterPayload = { pair: selectedPair.value };\n  if (price.value) {\n    payload.price = Number(price.value);\n  }\n  if (ordertype.value) {\n    payload.ordertype = ordertype.value;\n  }\n  if (stakeAmount.value) {\n    payload.stakeamount = stakeAmount.value;\n  }\n  if (botStore.activeBot.botApiVersion >= 2.13 && botStore.activeBot.shortAllowed) {\n    payload.side = orderSide.value;\n  }\n  if (botStore.activeBot.botApiVersion >= 2.16 && enterTag.value) {\n    payload.entry_tag = enterTag.value;\n  }\n\n  if (leverage.value) {\n    payload.leverage = leverage.value;\n  }\n  botStore.activeBot.forceentry(payload);\n  await nextTick();\n  model.value = false;\n};\nconst resetForm = () => {\n  console.log('resetForm');\n  selectedPair.value = props.pair;\n  price.value = undefined;\n  stakeAmount.value = undefined;\n  ordertype.value =\n    botStore.activeBot.botState?.order_types?.forcebuy ||\n    botStore.activeBot.botState?.order_types?.force_entry ||\n    botStore.activeBot.botState?.order_types?.buy ||\n    botStore.activeBot.botState?.order_types?.entry ||\n    'limit';\n};\n\nconst handleEntry = () => {\n  // Trigger submit handler\n  handleSubmit();\n};\nconst inputSelect = (bvModalEvt) => {\n  bvModalEvt.srcElement?.select();\n};\n</script>\n","<template>\n  <div>\n    <BModal\n      id=\"forceexit-modal\"\n      v-model=\"model\"\n      title=\"Force exiting a trade\"\n      @show=\"resetForm\"\n      @hidden=\"resetForm\"\n      @ok=\"handleEntry\"\n    >\n      <form ref=\"form\" @submit.stop.prevent=\"handleSubmit\">\n        <p>\n          <span>Exiting Trade #{{ trade.trade_id }} {{ trade.pair }}.</span>\n          <br />\n          <span>Currently owning {{ trade.amount }} {{ trade.base_currency }}</span>\n        </p>\n        <BFormGroup\n          label-for=\"stake-input\"\n          invalid-feedback=\"Amount must be empty or a positive number\"\n          :state=\"amount !== undefined && amount > 0\"\n        >\n          <template #label>\n            <span class=\"fst-italic\">*Amount in {{ trade.base_currency }} [optional]</span>\n            <span class=\"ms-1 fst-italic\">{{ amountInBase }}</span>\n          </template>\n          <BFormInput id=\"stake-input\" v-model=\"amount\" type=\"number\" step=\"0.000001\"></BFormInput>\n          <BFormInput\n            id=\"stake-input\"\n            v-model=\"amount\"\n            type=\"range\"\n            step=\"0.000001\"\n            min=\"0\"\n            :max=\"trade.amount\"\n          ></BFormInput>\n        </BFormGroup>\n\n        <BFormGroup\n          label=\"*OrderType\"\n          label-for=\"ordertype-input\"\n          invalid-feedback=\"OrderType\"\n          :state=\"ordertype !== undefined\"\n        >\n          <BFormSelect\n            v-model=\"ordertype\"\n            :options=\"['market', 'limit']\"\n            style=\"min-width: 7em\"\n            size=\"sm\"\n          >\n          </BFormSelect>\n        </BFormGroup>\n      </form>\n    </BModal>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { useBotStore } from '@/stores/ftbotwrapper';\nimport { ForceSellPayload, Trade } from '@/types';\n\nconst props = defineProps({\n  trade: {\n    type: Object as () => Trade,\n    required: true,\n  },\n  stakeCurrencyDecimals: {\n    type: Number,\n    required: true,\n  },\n});\n\nconst model = defineModel<boolean>();\n\nconst botStore = useBotStore();\n\nconst form = ref<HTMLFormElement>();\nconst amount = ref<number | undefined>(undefined);\nconst ordertype = ref('limit');\n\nconst checkFormValidity = () => {\n  const valid = form.value?.checkValidity();\n\n  return valid;\n};\n\nfunction handleSubmit() {\n  // Exit when the form isn't valid\n  if (!checkFormValidity()) {\n    return;\n  }\n  // call forceentry\n  const payload: ForceSellPayload = { tradeid: String(props.trade.trade_id) };\n\n  if (ordertype.value) {\n    payload.ordertype = ordertype.value;\n  }\n  if (amount.value) {\n    payload.amount = amount.value;\n  }\n  botStore.activeBot.forceexit(payload);\n  model.value = false;\n}\n\nfunction resetForm() {\n  amount.value = props.trade.amount;\n  ordertype.value =\n    botStore.activeBot.botState?.order_types?.force_exit ||\n    botStore.activeBot.botState?.order_types?.exit ||\n    'limit';\n}\n\nfunction handleEntry() {\n  // Trigger submit handler\n  handleSubmit();\n}\n\nconst amountDebounced = refDebounced(amount, 250, { maxWait: 500 });\n\nconst amountInBase = computed<string>(() => {\n  return amountDebounced.value && props.trade.current_rate\n    ? `~${formatPriceCurrency(amountDebounced.value * props.trade.current_rate, props.trade.quote_currency || '', props.stakeCurrencyDecimals)} (Estimated value) `\n    : '';\n});\n</script>\n","<script setup lang=\"ts\">\nimport { Trade } from '@/types';\n\ndefineProps({\n  trade: { type: Object as () => Trade, required: true },\n  id: { type: Number, required: true },\n  botApiVersion: { type: Number, required: true },\n  enableForceEntry: { type: Boolean, default: false },\n});\nconst emit = defineEmits<{\n  forceExit: [trade: Trade, type?: string];\n  forceExitPartial: [trade: Trade];\n  cancelOpenOrder: [trade: Trade];\n  reloadTrade: [trade: Trade];\n  deleteTrade: [trade: Trade];\n  forceEntry: [trade: Trade];\n}>();\nconst popoverOpen = ref(false);\n\nfunction forceExitHandler(item: Trade, ordertype: string | undefined = undefined) {\n  popoverOpen.value = false;\n  emit('forceExit', item, ordertype);\n}\nfunction forceExitPartialHandler(item: Trade) {\n  popoverOpen.value = false;\n  emit('forceExitPartial', item);\n}\nfunction cancelOpenOrderHandler(item: Trade) {\n  popoverOpen.value = false;\n  emit('cancelOpenOrder', item);\n}\nfunction handleReloadTrade(item: Trade) {\n  popoverOpen.value = false;\n  emit('reloadTrade', item);\n}\nfunction handleDeleteTrade(item: Trade) {\n  popoverOpen.value = false;\n  emit('deleteTrade', item);\n}\nfunction handleForceEntry(item: Trade) {\n  popoverOpen.value = false;\n  emit('forceEntry', item);\n}\n</script>\n\n<template>\n  <div>\n    <BButton\n      :id=\"`btn-actions-${id}`\"\n      class=\"btn-xs\"\n      size=\"sm\"\n      title=\"Actions\"\n      @click=\"popoverOpen = !popoverOpen\"\n    >\n      <i-mdi-gesture-tap />\n    </BButton>\n    <BPopover\n      teleport-to=\"body\"\n      :target=\"`btn-actions-${id}`\"\n      :title=\"`Actions for ${trade.pair}`\"\n      triggers=\"manual\"\n      :show=\"popoverOpen\"\n      placement=\"left\"\n    >\n      <TradeActions\n        :trade=\"trade\"\n        :bot-api-version=\"botApiVersion\"\n        :enable-force-entry=\"enableForceEntry\"\n        @force-exit=\"forceExitHandler\"\n        @force-exit-partial=\"forceExitPartialHandler\"\n        @delete-trade=\"handleDeleteTrade(trade)\"\n        @cancel-open-order=\"cancelOpenOrderHandler\"\n        @reload-trade=\"handleReloadTrade\"\n        @force-entry=\"handleForceEntry\"\n      />\n      <BButton class=\"mt-1 w-100 text-start\" size=\"sm\" @click=\"popoverOpen = false\">\n        <i-mdi-cancel class=\"me-1\" />Close Actions menu\n      </BButton>\n    </BPopover>\n  </div>\n</template>\n\n<style scoped></style>\n","<template>\n  <div class=\"h-100 overflow-auto w-100\">\n    <BTable\n      ref=\"tradesTable\"\n      small\n      hover\n      stacked=\"md\"\n      :items=\"\n        trades.filter(\n          (t) =>\n            t.pair.toLowerCase().includes(filterText.toLowerCase()) ||\n            t.exit_reason?.toLowerCase().includes(filterText.toLowerCase()) ||\n            t.enter_tag?.toLowerCase().includes(filterText.toLowerCase()),\n        ) as unknown as TableItem[]\n      \"\n      :fields=\"tableFields\"\n      show-empty\n      :empty-text=\"emptyText\"\n      :per-page=\"perPage\"\n      :current-page=\"currentPage\"\n      primary-key=\"botTradeId\"\n      selectable\n      :select-head=\"false\"\n      select-mode=\"single\"\n      @row-contextmenu=\"handleContextMenuEvent\"\n      @row-clicked=\"onRowClicked\"\n      @row-selected=\"onRowSelected\"\n    >\n      <template #cell(actions)=\"{ index, item }\">\n        <TradeActionsPopover\n          :id=\"index\"\n          :enable-force-entry=\"botStore.activeBot.botState.force_entry_enable\"\n          :trade=\"item as unknown as Trade\"\n          :bot-api-version=\"botStore.activeBot.botApiVersion\"\n          @delete-trade=\"removeTradeHandler(item as unknown as Trade)\"\n          @force-exit=\"forceExitHandler\"\n          @force-exit-partial=\"forceExitPartialHandler\"\n          @cancel-open-order=\"cancelOpenOrderHandler\"\n          @reload-trade=\"reloadTradeHandler\"\n          @force-entry=\"handleForceEntry\"\n        />\n      </template>\n      <template #cell(pair)=\"row\">\n        <span>\n          {{ `${row.item.pair}${row.item.open_order_id || row.item.has_open_orders ? '*' : ''}` }}\n        </span>\n      </template>\n      <template #cell(trade_id)=\"row\">\n        {{ row.item.trade_id }}\n        {{\n          botStore.activeBot.botApiVersion > 2.0 && row.item.trading_mode !== 'spot'\n            ? '| ' + (row.item.is_short ? 'Short' : 'Long')\n            : ''\n        }}\n      </template>\n      <template #cell(stake_amount)=\"row\">\n        {{ formatPriceWithDecimals(row.item.stake_amount) }}\n        {{ row.item.trading_mode !== 'spot' ? `(${row.item.leverage}x)` : '' }}\n      </template>\n      <template #cell(profit)=\"row\">\n        <TradeProfit :trade=\"row.item as unknown as Trade\" />\n      </template>\n      <template #cell(open_timestamp)=\"row\">\n        <DateTimeTZ :date=\"(row.item as unknown as Trade).open_timestamp\" />\n      </template>\n      <template #cell(close_timestamp)=\"row\">\n        <DateTimeTZ :date=\"(row.item as unknown as Trade).close_timestamp ?? 0\" />\n      </template>\n    </BTable>\n    <div class=\"w-100 d-flex justify-content-between\">\n      <BPagination\n        v-if=\"!activeTrades\"\n        v-model=\"currentPage\"\n        :total-rows=\"rows\"\n        :per-page=\"perPage\"\n        aria-controls=\"my-table\"\n      ></BPagination>\n      <BFormGroup v-if=\"showFilter\" label-for=\"trade-filter\">\n        <BFormInput id=\"trade-filter\" v-model=\"filterText\" type=\"text\" placeholder=\"Filter\" />\n      </BFormGroup>\n    </div>\n    <ForceExitForm\n      v-if=\"activeTrades\"\n      v-model=\"forceExitVisible\"\n      :trade=\"feTrade\"\n      :quote-currency-decimals=\"botStore.activeBot.botState.stake_currency_decimals\"\n    />\n    <ForceEntryForm\n      v-model=\"increasePosition.visible\"\n      :pair=\"increasePosition.trade?.pair\"\n      position-increase\n    />\n\n    <BModal v-model=\"removeTradeVisible\" title=\"Exit trade\" @ok=\"forceExitExecuter\">\n      {{ confirmExitText }}\n    </BModal>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { MultiDeletePayload, MultiForcesellPayload, Trade } from '@/types';\n\nimport { useBotStore } from '@/stores/ftbotwrapper';\nimport { useRouter } from 'vue-router';\nimport { TableField, TableItem } from 'bootstrap-vue-next';\n\nenum ModalReasons {\n  removeTrade,\n  forceExit,\n  forceExitPartial,\n  cancelOpenOrder,\n}\n\nconst props = defineProps({\n  trades: { required: true, type: Array as () => Array<Trade> },\n  title: { default: 'Trades', type: String },\n  stakeCurrency: { required: false, default: '', type: String },\n  activeTrades: { default: false, type: Boolean },\n  showFilter: { default: false, type: Boolean },\n  multiBotView: { default: false, type: Boolean },\n  emptyText: { default: 'No Trades to show.', type: String },\n});\nconst botStore = useBotStore();\nconst router = useRouter();\nconst settingsStore = useSettingsStore();\nconst currentPage = ref(1);\nconst selectedItemIndex = ref();\nconst filterText = ref('');\nconst feTrade = ref<Trade>({} as Trade);\nconst perPage = props.activeTrades ? 200 : 15;\nconst tradesTable = ref<HTMLFormElement>();\nconst forceExitVisible = ref(false);\nconst removeTradeVisible = ref(false);\nconst confirmExitText = ref('');\nconst confirmExitValue = ref<ModalReasons | null>(null);\n\nconst increasePosition = ref({ visible: false, trade: {} as Trade });\nconst openFields: TableField[] = [{ key: 'actions' }];\nconst closedFields: TableField[] = [\n  { key: 'close_timestamp', label: 'Close date' },\n  { key: 'exit_reason', label: 'Close Reason' },\n];\nfunction formatPriceWithDecimals(price) {\n  return formatPrice(price, botStore.activeBot.stakeCurrencyDecimals);\n}\nconst rows = computed(() => {\n  return props.trades.length;\n});\n\n// This using \"TableField[]\" below causes\n// Error: Debug Failure. No error for last overload signature\nconst tableFields = ref<any[]>([]);\n\nonMounted(() => {\n  tableFields.value = [\n    { key: 'trade_id', label: 'ID' },\n    { key: 'pair', label: 'Pair' },\n    { key: 'amount', label: 'Amount' },\n    {\n      key: 'stake_amount',\n      label: 'Stake amount',\n    },\n    {\n      key: 'open_rate',\n      label: 'Open rate',\n      formatter: (value: unknown) => formatPrice(value as number),\n    },\n    {\n      key: props.activeTrades ? 'current_rate' : 'close_rate',\n      label: props.activeTrades ? 'Current rate' : 'Close rate',\n      formatter: (value: unknown) => formatPrice(value as number),\n    },\n    {\n      key: 'profit',\n      label: props.activeTrades ? 'Current profit %' : 'Profit %',\n      formatter: (value: unknown, key?: string, item?: unknown) => {\n        if (!item) {\n          return '';\n        }\n        const typedItem = item as Trade;\n        const percent = formatPercent(typedItem.profit_ratio, 2);\n        return `${percent} ${`(${formatPriceWithDecimals(typedItem.profit_abs)})`}`;\n      },\n    },\n    { key: 'open_timestamp', label: 'Open date' },\n    ...(props.activeTrades ? openFields : closedFields),\n  ];\n  if (props.multiBotView) {\n    tableFields.value.unshift({ key: 'botName', label: 'Bot' });\n  }\n});\n\nconst feOrderType = ref<string | undefined>(undefined);\nfunction forceExitHandler(item: Trade, ordertype: string | undefined = undefined) {\n  feTrade.value = item;\n  confirmExitValue.value = ModalReasons.forceExit;\n  confirmExitText.value = `Really exit trade ${item.trade_id} (Pair ${item.pair}) using ${ordertype} Order?`;\n  feOrderType.value = ordertype;\n  if (settingsStore.confirmDialog === true) {\n    removeTradeVisible.value = true;\n  } else {\n    forceExitExecuter();\n  }\n}\n\nfunction forceExitExecuter() {\n  if (confirmExitValue.value === ModalReasons.removeTrade) {\n    const payload: MultiDeletePayload = {\n      tradeid: String(feTrade.value.trade_id),\n      botId: feTrade.value.botId,\n    };\n    botStore.deleteTradeMulti(payload).catch((error) => console.log(error.response));\n  }\n  if (confirmExitValue.value === ModalReasons.forceExit) {\n    const payload: MultiForcesellPayload = {\n      tradeid: String(feTrade.value.trade_id),\n      botId: feTrade.value.botId,\n    };\n    if (feOrderType.value) {\n      payload.ordertype = feOrderType.value;\n    }\n    botStore\n      .forceSellMulti(payload)\n      .then((xxx) => console.log(xxx))\n      .catch((error) => console.log(error.response));\n  }\n  if (confirmExitValue.value === ModalReasons.cancelOpenOrder) {\n    const payload: MultiDeletePayload = {\n      tradeid: String(feTrade.value.trade_id),\n      botId: feTrade.value.botId,\n    };\n    botStore.cancelOpenOrderMulti(payload);\n  }\n\n  feOrderType.value = undefined;\n  removeTradeVisible.value = false;\n}\n\nfunction removeTradeHandler(item: Trade) {\n  confirmExitText.value = `Really delete trade ${item.trade_id} (Pair ${item.pair})?`;\n  confirmExitValue.value = ModalReasons.removeTrade;\n  feTrade.value = item;\n  removeTradeVisible.value = true;\n}\n\nfunction forceExitPartialHandler(item: Trade) {\n  feTrade.value = item;\n  forceExitVisible.value = true;\n}\n\nfunction cancelOpenOrderHandler(item: Trade) {\n  confirmExitText.value = `Cancel open order for trade ${item.trade_id} (Pair ${item.pair})?`;\n  feTrade.value = item;\n  confirmExitValue.value = ModalReasons.cancelOpenOrder;\n  removeTradeVisible.value = true;\n}\n\nfunction reloadTradeHandler(item: Trade) {\n  botStore.reloadTradeMulti({ tradeid: String(item.trade_id), botId: item.botId });\n}\n\nfunction handleForceEntry(item: Trade) {\n  increasePosition.value.trade = item;\n  increasePosition.value.visible = true;\n}\n\nfunction handleContextMenuEvent(item, index, event) {\n  // stop browser context menu from appearing\n  if (!props.activeTrades) {\n    return;\n  }\n  event.preventDefault();\n  // log the selected item to the console\n  console.log(item);\n}\n\nconst onRowClicked = (item) => {\n  if (props.multiBotView && botStore.selectedBot !== item.botId) {\n    // Multibotview - on click switch to the bot trade view\n    botStore.selectBot(item.botId);\n  }\n  if (item && item.trade_id !== botStore.activeBot.detailTradeId) {\n    botStore.activeBot.setDetailTrade(item);\n    if (props.multiBotView) {\n      router.push({ name: 'Freqtrade Trading' });\n    }\n  } else {\n    botStore.activeBot.setDetailTrade(null);\n  }\n};\n\nconst onRowSelected = () => {\n  if (botStore.activeBot.detailTradeId) {\n    const itemIndex = props.trades.findIndex(\n      (v) => v.trade_id === botStore.activeBot.detailTradeId,\n    );\n    if (itemIndex >= 0) {\n      tradesTable.value?.selectRow(itemIndex);\n    } else {\n      console.log(`Unsetting item for tradeid ${selectedItemIndex.value}`);\n      selectedItemIndex.value = undefined;\n    }\n  }\n};\n\nwatch(\n  () => botStore.activeBot.detailTradeId,\n  (val) => {\n    const index = props.trades.findIndex((v) => v.trade_id === val);\n    // Unselect when another tradeTable is selected!\n    if (index < 0) {\n      tradesTable.value?.clearSelected();\n    }\n  },\n);\n</script>\n\n<style lang=\"scss\" scoped>\n.card-body {\n  padding: 0 0.2em;\n}\n.table-sm {\n  font-size: $fontsize-small;\n}\n.btn-xs {\n  padding: 0.1rem 0.25rem;\n  font-size: 0.75rem;\n}\n</style>\n"],"names":["props","__props","model","_useModel","botStore","useBotStore","form","ref","selectedPair","price","stakeAmount","leverage","ordertype","orderSide","OrderSides","enterTag","orderTypeOptions","orderSideOptions","checkFormValidity","_a","handleSubmit","payload","nextTick","resetForm","_b","_d","_c","_f","_e","_h","_g","handleEntry","inputSelect","bvModalEvt","amount","amountDebounced","refDebounced","amountInBase","computed","formatPriceCurrency","emit","__emit","popoverOpen","forceExitHandler","item","forceExitPartialHandler","cancelOpenOrderHandler","handleReloadTrade","handleDeleteTrade","handleForceEntry","router","useRouter","settingsStore","useSettingsStore","currentPage","selectedItemIndex","filterText","feTrade","perPage","tradesTable","forceExitVisible","removeTradeVisible","confirmExitText","confirmExitValue","increasePosition","openFields","closedFields","formatPriceWithDecimals","formatPrice","rows","tableFields","onMounted","value","key","typedItem","formatPercent","feOrderType","forceExitExecuter","error","xxx","removeTradeHandler","reloadTradeHandler","handleContextMenuEvent","index","event","onRowClicked","onRowSelected","itemIndex","v","watch","val"],"mappings":"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"}