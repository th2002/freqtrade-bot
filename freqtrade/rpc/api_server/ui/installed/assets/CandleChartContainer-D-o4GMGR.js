import{o as M,c as $,aU as dr,au as de,av as pe,aw as be,a as N,F as na,L as oa,e as re,q as fe,x as X,ax as Et,z as j,I as Ka,aV as pr,ae as bt,af as ra,b as O,w as z,a4 as qa,M as Xa,P as io,g as Ne,r as F,n as wa,N as Y,h as S,y as ie,$ as Tt,aW as so,v as ct,aX as we,k as W,aY as fr,V as Pt,a0 as hr,aZ as vr,a_ as mr,a$ as ia,b0 as gr,U as yr,b1 as Dt,b2 as br,ad as _r,u as lo,s as Ja,ac as xr,p as uo,d as co,_ as Aa,b3 as Sr,b4 as Cr,m as po,B as fo,ar as Qa,t as en,aP as wr,b5 as Ar,b6 as ze,i as Tr,b7 as Pr,a1 as Dr,b8 as Lr,aj as Ir}from"./index-DlUcbSds.js";import{_ as ho}from"./EditValue.vue_vue_type_script_setup_true_lang-4xmlAQGq.js";import{_ as R,S as vo,B as Ta,P as dt,G as De,c as Pa,g as Ue,C as mo,u as Da,L as sa,a as kr,n as go,i as yo,e as T,b as La,d as bo,f as tn,s as Or,r as Mr,h as G,t as Br,j as la,l as ua,k as Vr,m as Ia,o as ka,p as _o,q as he,v as me,w as xe,x as Z,D as xo,E as Er,y as So,z as Nr,A as H,R as ca,F as He,H as Rr,I as Co,J as zr,K as J,M as an,N as $r,O as Fr,Q as Ur,T as Oa,U as ot,V as wo,W as Nt,X as Wr,Y as Te,Z as Ae,$ as E,a0 as Ye,a1 as Gr,a2 as rt,a3 as Ao,a4 as ge,a5 as jr,a6 as Zr,a7 as Le,a8 as To,a9 as Ma,aa as Lt,ab as Hr,ac as pt,ad as Yr,ae as Po,af as Pe,ag as Kr,ah as it,ai as Ce,aj as Fe,ak as nn,al as ft,am as qr,an as Do,ao as Xr,ap as Jr,aq as St,ar as at,as as Lo,at as Qr,au as ei,av as ti,aw as ai,ax as ni,ay as oi,az as Io,aA as ri,aB as ii,aC as si,aD as li,aE as ko,aF as Ba,aG as ui,aH as ci,aI as on,aJ as Oo,aK as di,aL as pi,aM as fi,aN as _t,aO as hi,aP as Va,aQ as da,aR as rn,aS as vi,aT as Rt,aU as mi,aV as gi,aW as yi,aX as bi,aY as _i,aZ as xi,a_ as Si,a$ as Ci,b0 as sn,b1 as wi,b2 as Ai,b3 as Ti,b4 as Pi,b5 as Di,b6 as Li,b7 as Ii,b8 as ki,b9 as Oi,ba as Mi,bb as Bi,bc as Vi,bd as Ei,be as Ni,bf as Ri}from"./installCanvasRenderer-BCi_cPJ5.js";import{c as zi,p as Mo,S as $i,i as Fi,t as Ui,r as Wi,a as Gi,D as ji,b as Zi,d as Hi,s as Yi,A as Ki,e as qi,f as Xi,g as Ji,h as Qi,j as es,k as ts,l as as,m as ns}from"./chartZoom-71GenF7r.js";import{c as os}from"./createSeriesDataSimply-BvNxfXAu.js";var rs=Object.defineProperty,is=Object.defineProperties,ss=Object.getOwnPropertyDescriptors,ln=Object.getOwnPropertySymbols,ls=Object.prototype.hasOwnProperty,us=Object.prototype.propertyIsEnumerable,un=(t,e,a)=>e in t?rs(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,$e=(t,e)=>{for(var a in e||(e={}))ls.call(e,a)&&un(t,a,e[a]);if(ln)for(var a of ln(e))us.call(e,a)&&un(t,a,e[a]);return t},cn=(t,e)=>is(t,ss(e));const cs={props:{autoscroll:{type:Boolean,default:!0}},watch:{typeAheadPointer(){this.autoscroll&&this.maybeAdjustScroll()},open(t){this.autoscroll&&t&&this.$nextTick(()=>this.maybeAdjustScroll())}},methods:{maybeAdjustScroll(){var t;const e=((t=this.$refs.dropdownMenu)==null?void 0:t.children[this.typeAheadPointer])||!1;if(e){const a=this.getDropdownViewport(),{top:n,bottom:o,height:r}=e.getBoundingClientRect();if(n<a.top)return this.$refs.dropdownMenu.scrollTop=e.offsetTop;if(o>a.bottom)return this.$refs.dropdownMenu.scrollTop=e.offsetTop-(a.height-r)}},getDropdownViewport(){return this.$refs.dropdownMenu?this.$refs.dropdownMenu.getBoundingClientRect():{height:0,top:0,bottom:0}}}},ds={data(){return{typeAheadPointer:-1}},watch:{filteredOptions(){for(let t=0;t<this.filteredOptions.length;t++)if(this.selectable(this.filteredOptions[t])){this.typeAheadPointer=t;break}},open(t){t&&this.typeAheadToLastSelected()},selectedValue(){this.open&&this.typeAheadToLastSelected()}},methods:{typeAheadUp(){for(let t=this.typeAheadPointer-1;t>=0;t--)if(this.selectable(this.filteredOptions[t])){this.typeAheadPointer=t;break}},typeAheadDown(){for(let t=this.typeAheadPointer+1;t<this.filteredOptions.length;t++)if(this.selectable(this.filteredOptions[t])){this.typeAheadPointer=t;break}},typeAheadSelect(){const t=this.filteredOptions[this.typeAheadPointer];t&&this.selectable(t)&&this.select(t)},typeAheadToLastSelected(){this.typeAheadPointer=this.selectedValue.length!==0?this.filteredOptions.indexOf(this.selectedValue[this.selectedValue.length-1]):-1}}},ps={props:{loading:{type:Boolean,default:!1}},data(){return{mutableLoading:!1}},watch:{search(){this.$emit("search",this.search,this.toggleLoading)},loading(t){this.mutableLoading=t}},methods:{toggleLoading(t=null){return t==null?this.mutableLoading=!this.mutableLoading:this.mutableLoading=t}}},Ea=(t,e)=>{const a=t.__vccOpts||t;for(const[n,o]of e)a[n]=o;return a},fs={},hs={xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10"},vs=N("path",{d:"M6.895455 5l2.842897-2.842898c.348864-.348863.348864-.914488 0-1.263636L9.106534.261648c-.348864-.348864-.914489-.348864-1.263636 0L5 3.104545 2.157102.261648c-.348863-.348864-.914488-.348864-1.263636 0L.261648.893466c-.348864.348864-.348864.914489 0 1.263636L3.104545 5 .261648 7.842898c-.348864.348863-.348864.914488 0 1.263636l.631818.631818c.348864.348864.914773.348864 1.263636 0L5 6.895455l2.842898 2.842897c.348863.348864.914772.348864 1.263636 0l.631818-.631818c.348864-.348864.348864-.914489 0-1.263636L6.895455 5z"},null,-1),ms=[vs];function gs(t,e){return M(),$("svg",hs,ms)}const ys=Ea(fs,[["render",gs]]),bs={},_s={xmlns:"http://www.w3.org/2000/svg",width:"14",height:"10"},xs=N("path",{d:"M9.211364 7.59931l4.48338-4.867229c.407008-.441854.407008-1.158247 0-1.60046l-.73712-.80023c-.407008-.441854-1.066904-.441854-1.474243 0L7 5.198617 2.51662.33139c-.407008-.441853-1.066904-.441853-1.474243 0l-.737121.80023c-.407008.441854-.407008 1.158248 0 1.600461l4.48338 4.867228L7 10l2.211364-2.40069z"},null,-1),Ss=[xs];function Cs(t,e){return M(),$("svg",_s,Ss)}const ws=Ea(bs,[["render",Cs]]),dn={Deselect:ys,OpenIndicator:ws},As={mounted(t,{instance:e}){if(e.appendToBody){const{height:a,top:n,left:o,width:r}=e.$refs.toggle.getBoundingClientRect();let i=window.scrollX||window.pageXOffset,s=window.scrollY||window.pageYOffset;t.unbindPosition=e.calculatePosition(t,e,{width:r+"px",left:i+o+"px",top:s+n+a+"px"}),document.body.appendChild(t)}},unmounted(t,{instance:e}){e.appendToBody&&(t.unbindPosition&&typeof t.unbindPosition=="function"&&t.unbindPosition(),t.parentNode&&t.parentNode.removeChild(t))}};function Ts(t){const e={};return Object.keys(t).sort().forEach(a=>{e[a]=t[a]}),JSON.stringify(e)}let Ps=0;function Ds(){return++Ps}const Ls={components:$e({},dn),directives:{appendToBody:As},mixins:[cs,ds,ps],compatConfig:{MODE:3},emits:["open","close","update:modelValue","search","search:compositionstart","search:compositionend","search:keydown","search:blur","search:focus","search:input","option:created","option:selecting","option:selected","option:deselecting","option:deselected"],props:{modelValue:{},components:{type:Object,default:()=>({})},options:{type:Array,default(){return[]}},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},deselectFromDropdown:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},placeholder:{type:String,default:""},transition:{type:String,default:"vs__fade"},clearSearchOnSelect:{type:Boolean,default:!0},closeOnSelect:{type:Boolean,default:!0},label:{type:String,default:"label"},autocomplete:{type:String,default:"off"},reduce:{type:Function,default:t=>t},selectable:{type:Function,default:t=>!0},getOptionLabel:{type:Function,default(t){return typeof t=="object"?t.hasOwnProperty(this.label)?t[this.label]:console.warn(`[vue-select warn]: Label key "option.${this.label}" does not exist in options object ${JSON.stringify(t)}.
https://vue-select.org/api/props.html#getoptionlabel`):t}},getOptionKey:{type:Function,default(t){if(typeof t!="object")return t;try{return t.hasOwnProperty("id")?t.id:Ts(t)}catch(e){return console.warn(`[vue-select warn]: Could not stringify this option to generate unique key. Please provide'getOptionKey' prop to return a unique key for each option.
https://vue-select.org/api/props.html#getoptionkey`,t,e)}}},onTab:{type:Function,default:function(){this.selectOnTab&&!this.isComposing&&this.typeAheadSelect()}},taggable:{type:Boolean,default:!1},tabindex:{type:Number,default:null},pushTags:{type:Boolean,default:!1},filterable:{type:Boolean,default:!0},filterBy:{type:Function,default(t,e,a){return(e||"").toLocaleLowerCase().indexOf(a.toLocaleLowerCase())>-1}},filter:{type:Function,default(t,e){return t.filter(a=>{let n=this.getOptionLabel(a);return typeof n=="number"&&(n=n.toString()),this.filterBy(a,n,e)})}},createOption:{type:Function,default(t){return typeof this.optionList[0]=="object"?{[this.label]:t}:t}},resetOnOptionsChange:{default:!1,validator:t=>["function","boolean"].includes(typeof t)},clearSearchOnBlur:{type:Function,default:function({clearSearchOnSelect:t,multiple:e}){return t&&!e}},noDrop:{type:Boolean,default:!1},inputId:{type:String},dir:{type:String,default:"auto"},selectOnTab:{type:Boolean,default:!1},selectOnKeyCodes:{type:Array,default:()=>[13]},searchInputQuerySelector:{type:String,default:"[type=search]"},mapKeydown:{type:Function,default:(t,e)=>t},appendToBody:{type:Boolean,default:!1},calculatePosition:{type:Function,default(t,e,{width:a,top:n,left:o}){t.style.top=n,t.style.left=o,t.style.width=a}},dropdownShouldOpen:{type:Function,default({noDrop:t,open:e,mutableLoading:a}){return t?!1:e&&!a}},uid:{type:[String,Number],default:()=>Ds()}},data(){return{search:"",open:!1,isComposing:!1,pushedTags:[],_value:[],deselectButtons:[]}},computed:{isReducingValues(){return this.$props.reduce!==this.$options.props.reduce.default},isTrackingValues(){return typeof this.modelValue>"u"||this.isReducingValues},selectedValue(){let t=this.modelValue;return this.isTrackingValues&&(t=this.$data._value),t!=null&&t!==""?[].concat(t):[]},optionList(){return this.options.concat(this.pushTags?this.pushedTags:[])},searchEl(){return this.$slots.search?this.$refs.selectedOptions.querySelector(this.searchInputQuerySelector):this.$refs.search},scope(){const t={search:this.search,loading:this.loading,searching:this.searching,filteredOptions:this.filteredOptions};return{search:{attributes:$e({disabled:this.disabled,placeholder:this.searchPlaceholder,tabindex:this.tabindex,readonly:!this.searchable,id:this.inputId,"aria-autocomplete":"list","aria-labelledby":`vs${this.uid}__combobox`,"aria-controls":`vs${this.uid}__listbox`,ref:"search",type:"search",autocomplete:this.autocomplete,value:this.search},this.dropdownOpen&&this.filteredOptions[this.typeAheadPointer]?{"aria-activedescendant":`vs${this.uid}__option-${this.typeAheadPointer}`}:{}),events:{compositionstart:()=>this.isComposing=!0,compositionend:()=>this.isComposing=!1,keydown:this.onSearchKeyDown,blur:this.onSearchBlur,focus:this.onSearchFocus,input:e=>this.search=e.target.value}},spinner:{loading:this.mutableLoading},noOptions:{search:this.search,loading:this.mutableLoading,searching:this.searching},openIndicator:{attributes:{ref:"openIndicator",role:"presentation",class:"vs__open-indicator"}},listHeader:t,listFooter:t,header:cn($e({},t),{deselect:this.deselect}),footer:cn($e({},t),{deselect:this.deselect})}},childComponents(){return $e($e({},dn),this.components)},stateClasses(){return{"vs--open":this.dropdownOpen,"vs--single":!this.multiple,"vs--multiple":this.multiple,"vs--searching":this.searching&&!this.noDrop,"vs--searchable":this.searchable&&!this.noDrop,"vs--unsearchable":!this.searchable,"vs--loading":this.mutableLoading,"vs--disabled":this.disabled}},searching(){return!!this.search},dropdownOpen(){return this.dropdownShouldOpen(this)},searchPlaceholder(){return this.isValueEmpty&&this.placeholder?this.placeholder:void 0},filteredOptions(){const t=[].concat(this.optionList);if(!this.filterable&&!this.taggable)return t;const e=this.search.length?this.filter(t,this.search,this):t;if(this.taggable&&this.search.length){const a=this.createOption(this.search);this.optionExists(a)||e.unshift(a)}return e},isValueEmpty(){return this.selectedValue.length===0},showClearButton(){return!this.multiple&&this.clearable&&!this.open&&!this.isValueEmpty}},watch:{options(t,e){const a=()=>typeof this.resetOnOptionsChange=="function"?this.resetOnOptionsChange(t,e,this.selectedValue):this.resetOnOptionsChange;!this.taggable&&a()&&this.clearSelection(),this.modelValue&&this.isTrackingValues&&this.setInternalValueFromOptions(this.modelValue)},modelValue:{immediate:!0,handler(t){this.isTrackingValues&&this.setInternalValueFromOptions(t)}},multiple(){this.clearSelection()},open(t){this.$emit(t?"open":"close")}},created(){this.mutableLoading=this.loading},methods:{setInternalValueFromOptions(t){Array.isArray(t)?this.$data._value=t.map(e=>this.findOptionFromReducedValue(e)):this.$data._value=this.findOptionFromReducedValue(t)},select(t){this.$emit("option:selecting",t),this.isOptionSelected(t)?this.deselectFromDropdown&&(this.clearable||this.multiple&&this.selectedValue.length>1)&&this.deselect(t):(this.taggable&&!this.optionExists(t)&&(this.$emit("option:created",t),this.pushTag(t)),this.multiple&&(t=this.selectedValue.concat(t)),this.updateValue(t),this.$emit("option:selected",t)),this.onAfterSelect(t)},deselect(t){this.$emit("option:deselecting",t),this.updateValue(this.selectedValue.filter(e=>!this.optionComparator(e,t))),this.$emit("option:deselected",t)},clearSelection(){this.updateValue(this.multiple?[]:null)},onAfterSelect(t){this.closeOnSelect&&(this.open=!this.open,this.searchEl.blur()),this.clearSearchOnSelect&&(this.search="")},updateValue(t){typeof this.modelValue>"u"&&(this.$data._value=t),t!==null&&(Array.isArray(t)?t=t.map(e=>this.reduce(e)):t=this.reduce(t)),this.$emit("update:modelValue",t)},toggleDropdown(t){const e=t.target!==this.searchEl;e&&t.preventDefault();const a=[...this.deselectButtons||[],this.$refs.clearButton];if(this.searchEl===void 0||a.filter(Boolean).some(n=>n.contains(t.target)||n===t.target)){t.preventDefault();return}this.open&&e?this.searchEl.blur():this.disabled||(this.open=!0,this.searchEl.focus())},isOptionSelected(t){return this.selectedValue.some(e=>this.optionComparator(e,t))},isOptionDeselectable(t){return this.isOptionSelected(t)&&this.deselectFromDropdown},optionComparator(t,e){return this.getOptionKey(t)===this.getOptionKey(e)},findOptionFromReducedValue(t){const e=n=>JSON.stringify(this.reduce(n))===JSON.stringify(t),a=[...this.options,...this.pushedTags].filter(e);return a.length===1?a[0]:a.find(n=>this.optionComparator(n,this.$data._value))||t},closeSearchOptions(){this.open=!1,this.$emit("search:blur")},maybeDeleteValue(){if(!this.searchEl.value.length&&this.selectedValue&&this.selectedValue.length&&this.clearable){let t=null;this.multiple&&(t=[...this.selectedValue.slice(0,this.selectedValue.length-1)]),this.updateValue(t)}},optionExists(t){return this.optionList.some(e=>this.optionComparator(e,t))},normalizeOptionForSlot(t){return typeof t=="object"?t:{[this.label]:t}},pushTag(t){this.pushedTags.push(t)},onEscape(){this.search.length?this.search="":this.searchEl.blur()},onSearchBlur(){if(this.mousedown&&!this.searching)this.mousedown=!1;else{const{clearSearchOnSelect:t,multiple:e}=this;this.clearSearchOnBlur({clearSearchOnSelect:t,multiple:e})&&(this.search=""),this.closeSearchOptions();return}if(this.search.length===0&&this.options.length===0){this.closeSearchOptions();return}},onSearchFocus(){this.open=!0,this.$emit("search:focus")},onMousedown(){this.mousedown=!0},onMouseUp(){this.mousedown=!1},onSearchKeyDown(t){const e=o=>(o.preventDefault(),!this.isComposing&&this.typeAheadSelect()),a={8:o=>this.maybeDeleteValue(),9:o=>this.onTab(),27:o=>this.onEscape(),38:o=>(o.preventDefault(),this.typeAheadUp()),40:o=>(o.preventDefault(),this.typeAheadDown())};this.selectOnKeyCodes.forEach(o=>a[o]=e);const n=this.mapKeydown(a,this);if(typeof n[t.keyCode]=="function")return n[t.keyCode](t)}}},Is=["dir"],ks=["id","aria-expanded","aria-owns"],Os={ref:"selectedOptions",class:"vs__selected-options"},Ms=["disabled","title","aria-label","onClick"],Bs={ref:"actions",class:"vs__actions"},Vs=["disabled"],Es={class:"vs__spinner"},Ns=["id"],Rs=["id","aria-selected","onMouseover","onClick"],zs={key:0,class:"vs__no-options"},$s=re(" Sorry, no matching options. "),Fs=["id"];function Us(t,e,a,n,o,r){const i=dr("append-to-body");return M(),$("div",{dir:a.dir,class:Xa(["v-select",r.stateClasses])},[de(t.$slots,"header",pe(be(r.scope.header))),N("div",{id:`vs${a.uid}__combobox`,ref:"toggle",class:"vs__dropdown-toggle",role:"combobox","aria-expanded":r.dropdownOpen.toString(),"aria-owns":`vs${a.uid}__listbox`,"aria-label":"Search for option",onMousedown:e[1]||(e[1]=s=>r.toggleDropdown(s))},[N("div",Os,[(M(!0),$(na,null,oa(r.selectedValue,(s,l)=>de(t.$slots,"selected-option-container",{option:r.normalizeOptionForSlot(s),deselect:r.deselect,multiple:a.multiple,disabled:a.disabled},()=>[(M(),$("span",{key:a.getOptionKey(s),class:"vs__selected"},[de(t.$slots,"selected-option",pe(be(r.normalizeOptionForSlot(s))),()=>[re(fe(a.getOptionLabel(s)),1)]),a.multiple?(M(),$("button",{key:0,ref_for:!0,ref:c=>o.deselectButtons[l]=c,disabled:a.disabled,type:"button",class:"vs__deselect",title:`Deselect ${a.getOptionLabel(s)}`,"aria-label":`Deselect ${a.getOptionLabel(s)}`,onClick:c=>r.deselect(s)},[(M(),X(Et(r.childComponents.Deselect)))],8,Ms)):j("",!0)]))])),256)),de(t.$slots,"search",pe(be(r.scope.search)),()=>[N("input",Ka({class:"vs__search"},r.scope.search.attributes,pr(r.scope.search.events)),null,16)])],512),N("div",Bs,[bt(N("button",{ref:"clearButton",disabled:a.disabled,type:"button",class:"vs__clear",title:"Clear Selected","aria-label":"Clear Selected",onClick:e[0]||(e[0]=(...s)=>r.clearSelection&&r.clearSelection(...s))},[(M(),X(Et(r.childComponents.Deselect)))],8,Vs),[[ra,r.showClearButton]]),de(t.$slots,"open-indicator",pe(be(r.scope.openIndicator)),()=>[a.noDrop?j("",!0):(M(),X(Et(r.childComponents.OpenIndicator),pe(Ka({key:0},r.scope.openIndicator.attributes)),null,16))]),de(t.$slots,"spinner",pe(be(r.scope.spinner)),()=>[bt(N("div",Es,"Loading...",512),[[ra,t.mutableLoading]])])],512)],40,ks),O(io,{name:a.transition},{default:z(()=>[r.dropdownOpen?bt((M(),$("ul",{id:`vs${a.uid}__listbox`,ref:"dropdownMenu",key:`vs${a.uid}__listbox`,class:"vs__dropdown-menu",role:"listbox",tabindex:"-1",onMousedown:e[2]||(e[2]=qa((...s)=>r.onMousedown&&r.onMousedown(...s),["prevent"])),onMouseup:e[3]||(e[3]=(...s)=>r.onMouseUp&&r.onMouseUp(...s))},[de(t.$slots,"list-header",pe(be(r.scope.listHeader))),(M(!0),$(na,null,oa(r.filteredOptions,(s,l)=>(M(),$("li",{id:`vs${a.uid}__option-${l}`,key:a.getOptionKey(s),role:"option",class:Xa(["vs__dropdown-option",{"vs__dropdown-option--deselect":r.isOptionDeselectable(s)&&l===t.typeAheadPointer,"vs__dropdown-option--selected":r.isOptionSelected(s),"vs__dropdown-option--highlight":l===t.typeAheadPointer,"vs__dropdown-option--disabled":!a.selectable(s)}]),"aria-selected":l===t.typeAheadPointer?!0:null,onMouseover:c=>a.selectable(s)?t.typeAheadPointer=l:null,onClick:qa(c=>a.selectable(s)?r.select(s):null,["prevent","stop"])},[de(t.$slots,"option",pe(be(r.normalizeOptionForSlot(s))),()=>[re(fe(a.getOptionLabel(s)),1)])],42,Rs))),128)),r.filteredOptions.length===0?(M(),$("li",zs,[de(t.$slots,"no-options",pe(be(r.scope.noOptions)),()=>[$s])])):j("",!0),de(t.$slots,"list-footer",pe(be(r.scope.listFooter)))],40,Ns)),[[i]]):(M(),$("ul",{key:1,id:`vs${a.uid}__listbox`,role:"listbox",style:{display:"none",visibility:"hidden"}},null,8,Fs))]),_:3},8,["name"]),de(t.$slots,"footer",pe(be(r.scope.footer)))],10,Is)}const Bo=Ea(Ls,[["render",Us]]),Ws={class:"d-flex flex-row"},Vo=Ne({__name:"PlotIndicatorSelect",props:{modelValue:{required:!1,default:"",type:String},columns:{required:!0,type:Array},label:{required:!0,type:String}},emits:["update:modelValue","indicatorSelected"],setup(t,{emit:e}){const a=t,n=e,o=F("");function r(){n("indicatorSelected",o.value),n("update:modelValue",o.value)}function i(){o.value="",r()}return wa(()=>{o.value=a.modelValue}),Y(()=>a.modelValue,s=>{o.value=s}),(s,l)=>{const c=Tt,u=so,d=ct;return M(),$("div",Ws,[O(c,{class:"flex-grow-1",label:t.label,"label-for":"indicatorSelector"},{default:z(()=>[O(S(Bo),{modelValue:S(o),"onUpdate:modelValue":l[0]||(l[0]=p=>ie(o)?o.value=p:null),options:t.columns,size:"sm",clearable:!1,"onOption:selected":r},null,8,["modelValue","options"])]),_:1},8,["label"]),O(d,{size:"sm",title:"Abort",class:"ms-1 mt-auto",variant:"secondary",onClick:i},{default:z(()=>[O(u)]),_:1})])}}}),Gs={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},js=N("path",{fill:"currentColor",d:"M19.78 3h-8.56C10.55 3 10 3.55 10 4.22V8h6v6h3.78c.67 0 1.22-.55 1.22-1.22V4.22C21 3.55 20.45 3 19.78 3m-7.34 3.67a1.23 1.23 0 1 1 0-2.46a1.23 1.23 0 0 1 1.23 1.23c0 .68-.55 1.23-1.23 1.23m6.12 6.11a1.23 1.23 0 1 1-.02-2.46c.68-.01 1.23.54 1.24 1.24c-.01.67-.55 1.21-1.22 1.22m0-6.11a1.23 1.23 0 1 1-.02-2.46a1.231 1.231 0 0 1 .02 2.46M4.22 10h8.56A1.22 1.22 0 0 1 14 11.22v8.56c0 .67-.55 1.22-1.22 1.22H4.22C3.55 21 3 20.45 3 19.78v-8.56c0-.67.55-1.22 1.22-1.22m4.28 4.28c-.67 0-1.22.55-1.22 1.22s.55 1.22 1.22 1.22s1.22-.55 1.22-1.22a1.22 1.22 0 0 0-1.22-1.22m-3.06-3.06c-.67 0-1.22.55-1.22 1.22a1.22 1.22 0 0 0 1.22 1.22c.67 0 1.22-.55 1.22-1.22s-.55-1.22-1.22-1.22m6.11 6.11c-.67 0-1.22.55-1.22 1.22s.55 1.22 1.22 1.22a1.22 1.22 0 0 0 1.22-1.22c0-.67-.54-1.21-1.21-1.22z"},null,-1),Zs=[js];function Hs(t,e){return M(),$("svg",Gs,[...Zs])}const Ys={name:"mdi-dice-multiple",render:Hs};function nt(){return`#${(Math.random()*16777215<<0).toString(16)}`}const Ks={class:"d-flex flex-col flex-xl-row justify-content-between mt-1"},qs=Ne({__name:"PlotIndicator",props:{modelValue:{required:!0,type:Object},columns:{required:!0,type:Array}},emits:["update:modelValue"],setup(t,{emit:e}){const a=t,n=e,o=F(nt()),r=F(we.line),i=F(Object.keys(we)),s=F(""),l=F(!1),c=F("");function u(){o.value=nt()}const d=W(()=>{if(l.value||!s.value)return{};const h={color:o.value,type:r.value};return c.value&&r.value===we.line&&(h.fill_to=c.value),{[s.value]:h}});function p(){n("update:modelValue",d.value)}return Y(()=>a.modelValue,()=>{if([s.value]=Object.keys(a.modelValue),l.value=!1,s.value&&a.modelValue){const h=a.modelValue[s.value];o.value=h.color||nt(),r.value=h.type||we.line,c.value=h.fill_to||""}},{immediate:!0}),fr([o,r,c],()=>{p()},{debounce:200}),(h,f)=>{const y=Pt,g=Tt,b=hr,m=Ys,x=ct,v=vr,C=Vo;return M(),$("div",null,[N("div",Ks,[O(g,{class:"col flex-grow-1",label:"Type","label-for":"plotTypeSelector"},{default:z(()=>[O(y,{id:"plotTypeSelector",modelValue:S(r),"onUpdate:modelValue":f[0]||(f[0]=_=>ie(r)?r.value=_:null),size:"sm",options:S(i)},null,8,["modelValue","options"])]),_:1}),O(g,{label:"Color","label-for":"colsel",size:"sm",class:"ms-xl-1 col"},{default:z(()=>[O(v,null,{prepend:z(()=>[O(b,{modelValue:S(o),"onUpdate:modelValue":f[1]||(f[1]=_=>ie(o)?o.value=_:null),type:"color",size:"sm",class:"p-0",style:{"max-width":"29px"}},null,8,["modelValue"])]),append:z(()=>[O(x,{variant:"primary",size:"sm",onClick:u},{default:z(()=>[O(m)]),_:1})]),default:z(()=>[O(b,{id:"colsel",modelValue:S(o),"onUpdate:modelValue":f[2]||(f[2]=_=>ie(o)?o.value=_:null),size:"sm",class:"flex-grow-1"},null,8,["modelValue"])]),_:1})]),_:1})]),S(r)===S(we).line?(M(),X(C,{key:0,modelValue:S(c),"onUpdate:modelValue":f[3]||(f[3]=_=>ie(c)?c.value=_:null),columns:t.columns,class:"mt-1",label:"Area chart - Fill to (leave empty for line chart)"},null,8,["modelValue","columns"])):j("",!0)])}}});var Xs=function(e){return Js(e)&&!Qs(e)};function Js(t){return!!t&&typeof t=="object"}function Qs(t){var e=Object.prototype.toString.call(t);return e==="[object RegExp]"||e==="[object Date]"||al(t)}var el=typeof Symbol=="function"&&Symbol.for,tl=el?Symbol.for("react.element"):60103;function al(t){return t.$$typeof===tl}function nl(t){return Array.isArray(t)?[]:{}}function st(t,e){return e.clone!==!1&&e.isMergeableObject(t)?We(nl(t),t,e):t}function ol(t,e,a){return t.concat(e).map(function(n){return st(n,a)})}function rl(t,e){if(!e.customMerge)return We;var a=e.customMerge(t);return typeof a=="function"?a:We}function il(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return Object.propertyIsEnumerable.call(t,e)}):[]}function pn(t){return Object.keys(t).concat(il(t))}function Eo(t,e){try{return e in t}catch{return!1}}function sl(t,e){return Eo(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))}function ll(t,e,a){var n={};return a.isMergeableObject(t)&&pn(t).forEach(function(o){n[o]=st(t[o],a)}),pn(e).forEach(function(o){sl(t,o)||(Eo(t,o)&&a.isMergeableObject(e[o])?n[o]=rl(o,a)(t[o],e[o],a):n[o]=st(e[o],a))}),n}function We(t,e,a){a=a||{},a.arrayMerge=a.arrayMerge||ol,a.isMergeableObject=a.isMergeableObject||Xs,a.cloneUnlessOtherwiseSpecified=st;var n=Array.isArray(e),o=Array.isArray(t),r=n===o;return r?n?a.arrayMerge(t,e,a):ll(t,e,a):st(e,a)}We.all=function(e,a){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(n,o){return We(n,o,a)},{})};var ul=We,cl=ul;const dl=mr(cl),zt=F({BollingerBands:{main_plot:{bb_upperband:{color:"#008af4",type:"line",fill_to:"bb_lowerband"},bb_lowerband:{color:"#008af4",type:"line"}}},RSI:{subplots:{RSI:{rsi:{color:"#ff8000",type:"line"}}}},MACD:{subplots:{MACD:{macdsignal:{color:"#ff8000",type:"line"},macd:{color:"#1370f4",type:"line"}}}}});function fn(t,e){const a=ia(t);if(!e)return a;const n={};for(const r in t.main_plot){const i=e[r]||r;n[i]=t.main_plot[r],n[i].fill_to!==void 0&&(n[i].fill_to=e[n[i].fill_to]||n[i].fill_to)}"main_plot"in t&&(a.main_plot=n);const o={};for(const r in t.subplots){const i={};for(const s in t.subplots[r]){const l=e[s]||s;i[l]=t.subplots[r][s],i[l].fill_to!==void 0&&(i[l].fill_to=e[i[l].fill_to]||i[l].fill_to)}o[r]=i}return"subplots"in t&&(a.subplots=o),a}function pl(){function t(a){return zt.value[a]||{}}function e(a,n,o={}){const r=t(a);if(!r)return n;const i=fn(r,o);return dl(n,i)}return{plotTemplates:zt,applyPlotTemplate:e,getTemplateContent:t,replaceTemplateColumns:fn,plotTemplateNames:W(()=>Object.keys(zt.value))}}const fl={key:0,class:"pt-1"},hl={key:1},vl=N("h5",{class:"mt-1 text-center"},"Re-map indicators",-1),ml={class:"d-flex gap-2 align-items-center"},gl={class:"flex-grow-1 w-100"},yl={class:"mt-2 d-flex gap-1 justify-content-end"},bl=Ne({__name:"PlotFromTemplate",props:gr({columns:{}},{visible:{type:Boolean},visibleModifiers:{}}),emits:["update:visible"],setup(t){const e=yr(t,"visible"),{plotTemplateNames:a,applyPlotTemplate:n,getTemplateContent:o}=pl(),r=Dt();function i(){l.value&&(r.editablePlotConfig={...n(l.value,r.editablePlotConfig,c.value)},e.value=!1)}function s(){u.value=!u.value,c.value=br(o(l.value)).reduce((d,p)=>(d[p]=p,d),{})}const l=F("");Y(()=>e.value,d=>{d&&(l.value="",u.value=!1)});const c=F({}),u=F(!1);return(d,p)=>{const h=Pt,f=Tt,y=so,g=ct,b=_r;return e.value?(M(),$("div",fl,[S(u)?(M(),$("div",hl,[vl,(M(!0),$(na,null,oa(Object.keys(S(c)),m=>(M(),$("div",{key:m},[N("div",ml,[N("span",gl,fe(m),1),O(h,{id:`indicator-${m}`,modelValue:S(c)[m],"onUpdate:modelValue":x=>S(c)[m]=x,class:"flex-grow-1 w-100",options:d.columns},null,8,["id","modelValue","onUpdate:modelValue","options"])])]))),128))])):(M(),X(f,{key:0,label:"Select Templates","label-for":"selectTemplate"},{default:z(()=>[O(h,{id:"selectTemplate",modelValue:S(l),"onUpdate:modelValue":p[0]||(p[0]=m=>ie(l)?l.value=m:null),options:S(a),"select-size":4},null,8,["modelValue","options"])]),_:1})),N("div",yl,[O(g,{size:"sm",title:"Abort",variant:"secondary",onClick:p[1]||(p[1]=m=>e.value=!1)},{default:z(()=>[O(y)]),_:1}),S(u)?j("",!0):(M(),X(g,{key:0,disabled:!S(l),size:"sm",style:{width:"33%"},title:"Use template",variant:"primary",onClick:s},{default:z(()=>[O(b,{class:"me-1"}),re("Use Template ")]),_:1},8,["disabled"])),S(u)?(M(),X(g,{key:1,disabled:!S(l),size:"sm",style:{width:"33%"},title:"Apply template",variant:"primary",onClick:i},{default:z(()=>[O(b,{class:"me-1"}),re("Apply Template ")]),_:1},8,["disabled"])):j("",!0)])])):j("",!0)}}}),No=Ne({__name:"PlotConfigSelect",props:{allowEdit:{type:Boolean,default:!1},editableName:{type:String,default:"plot configuration"}},setup(t){const e=Dt();return(a,n)=>{const o=Pt,r=ho;return M(),X(r,{modelValue:S(e).plotConfigName,"onUpdate:modelValue":n[1]||(n[1]=i=>S(e).plotConfigName=i),"allow-edit":t.allowEdit,"allow-add":t.allowEdit,"allow-duplicate":t.allowEdit,"editable-name":"plot configuration",onRename:S(e).renamePlotConfig,onDelete:S(e).deletePlotConfig,onNew:S(e).newPlotConfig,onDuplicate:S(e).duplicatePlotConfig},{default:z(()=>[O(o,{id:"plotConfigSelect",modelValue:S(e).plotConfigName,"onUpdate:modelValue":[n[0]||(n[0]=i=>S(e).plotConfigName=i),S(e).plotConfigChanged],options:S(e).availablePlotConfigNames,size:"sm"},null,8,["modelValue","options","onUpdate:modelValue"])]),_:1},8,["modelValue","allow-edit","allow-add","allow-duplicate","onRename","onDelete","onNew","onDuplicate"])}}}),Na=t=>(uo("data-v-928b6406"),t=t(),co(),t),_l={key:0},xl={class:"col-mb-3"},Sl=Na(()=>N("hr",null,null,-1)),Cl=Na(()=>N("hr",null,null,-1)),wl={class:"d-flex flex-row mt-1 gap-1"},Al=Na(()=>N("hr",null,null,-1)),Tl={class:"d-flex flex-row"},Pl={key:3,class:"col-mb-5 ms-1 mt-2"},Dl=Ne({__name:"PlotConfigurator",props:{columns:{required:!0,type:Array},isVisible:{required:!0,default:!1,type:Boolean}},setup(t){const e=t,a=Dt(),n=lo(),o=F("default"),r=F(""),i=F(!1),s=F(!1),l=F("main_plot"),c=F(),u=F(!0),d=W(()=>l.value==="main_plot"),p=W(()=>d.value?a.editablePlotConfig.main_plot:a.editablePlotConfig.subplots[l.value]),h=W(()=>["main_plot",...Object.keys(a.editablePlotConfig.subplots)]),f=W(()=>{let I=[];return d.value&&(I=Object.keys(a.editablePlotConfig.main_plot)),l.value in a.editablePlotConfig.subplots&&(I=Object.keys(a.editablePlotConfig.subplots[l.value])),I.map(k=>({value:k,html:e.columns.includes(k)?k:`<span title="Column not available">${k} <-- not available in this chart</span>`}))});function y(I){const k=Object.keys(I)[0],Q=I[k];d.value?a.editablePlotConfig.main_plot[k]={...Q}:a.editablePlotConfig.subplots[l.value][k]={...Q},a.editablePlotConfig={...a.editablePlotConfig},i.value=!1}const g=W({get(){return i.value?{}:r.value?{[r.value]:p.value[r.value]}:{}},set(I){Object.keys(I)[0]&&I?y(I):i.value=!1}}),b=W({get(){return JSON.stringify(a.editablePlotConfig,null,2)},set(I){try{c.value=JSON.parse(I),u.value=!0}catch{u.value=!1}}});function m(){d.value?(console.log(`Removing ${r.value} from MainPlot`),delete a.editablePlotConfig.main_plot[r.value]):(console.log(`Removing ${r.value} from ${l.value}`),delete a.editablePlotConfig.subplots[l.value][r.value]),a.editablePlotConfig={...a.editablePlotConfig},r.value=""}function x(){i.value=!i.value,r.value=""}function v(I){a.editablePlotConfig.subplots={...a.editablePlotConfig.subplots,[I]:{}},l.value=I}function C(I){delete a.editablePlotConfig.subplots[I],a.editablePlotConfig={...a.editablePlotConfig},l.value=h.value[h.value.length-1]}function _(I,k){a.editablePlotConfig.subplots[k]=a.editablePlotConfig.subplots[I],delete a.editablePlotConfig.subplots[I],l.value=k}function w(){a.editablePlotConfig=ia(a.customPlotConfigs[a.plotConfigName])}function P(){c.value!==void 0&&u.value&&(a.editablePlotConfig=c.value)}async function A(){if(n.activeBot.isWebserverMode&&!n.activeBot.strategy.strategy){Ja("No strategy selected, can't load plot config.");return}try{await n.activeBot.getStrategyPlotConfig(),n.activeBot.strategyPlotConfig&&(a.editablePlotConfig=n.activeBot.strategyPlotConfig)}catch{Ja("Failed to load Plot configuration from Strategy.")}}function L(){a.saveCustomPlotConfig(o.value,a.editablePlotConfig)}function V(I){i.value=!1,I&&(y({[I]:{color:nt()}}),r.value=I)}Y(l,()=>{r.value=""}),Y(()=>a.plotConfigName,()=>{r.value="",o.value=a.plotConfigName}),Y(()=>e.isVisible,()=>{e.isVisible?(a.editablePlotConfig=ia(a.plotConfig),a.isEditing=!0,o.value=a.plotConfigName):a.isEditing=!1});const B=F(!1);return(I,k)=>{const Q=No,ue=Tt,K=Pt,ee=ho,ae=ct,ne=Vo,q=bl,ce=qs,oe=xr;return t.columns?(M(),$("div",_l,[O(ue,{label:"Plot config name","label-for":"idPlotConfigName"},{default:z(()=>[O(Q,{"allow-edit":""})]),_:1}),N("div",xl,[Sl,O(ue,{label:"Target Plot","label-for":"FieldSel"},{default:z(()=>[O(ee,{modelValue:S(l),"onUpdate:modelValue":k[1]||(k[1]=U=>ie(l)?l.value=U:null),"allow-edit":!S(d),"allow-add":"","editable-name":"plot configuration","align-vertical":"",onNew:v,onDelete:C,onRename:_},{default:z(()=>[O(K,{id:"FieldSel",modelValue:S(l),"onUpdate:modelValue":k[0]||(k[0]=U=>ie(l)?l.value=U:null),options:S(h),"select-size":5},null,8,["modelValue","options"])]),_:1},8,["modelValue","allow-edit"])]),_:1})]),Cl,N("div",null,[O(ue,{label:"Indicators in this plot","label-for":"selectedIndicators"},{default:z(()=>[O(K,{id:"selectedIndicators",modelValue:S(r),"onUpdate:modelValue":k[2]||(k[2]=U=>ie(r)?r.value=U:null),disabled:S(i),options:S(f),"select-size":4},null,8,["modelValue","disabled","options"])]),_:1})]),N("div",wl,[O(ae,{variant:"secondary",title:"Remove indicator to plot",size:"sm",disabled:!S(r),class:"col",onClick:m},{default:z(()=>[re(" Remove indicator ")]),_:1},8,["disabled"]),O(ae,{variant:"secondary",title:"Load indicator config from template",size:"sm",onClick:k[3]||(k[3]=U=>B.value=!S(B))},{default:z(()=>[re(" Indicator from template ")]),_:1}),O(ae,{variant:"primary",title:"Add indicator to plot",size:"sm",class:"col",disabled:S(i),onClick:x},{default:z(()=>[re(" Add new indicator ")]),_:1},8,["disabled"])]),S(i)?(M(),X(ne,{key:0,columns:t.columns,class:"mt-1",label:"Select indicator to add",onIndicatorSelected:V},null,8,["columns"])):j("",!0),O(q,{visible:S(B),"onUpdate:visible":k[4]||(k[4]=U=>ie(B)?B.value=U:null),columns:t.columns},null,8,["visible","columns"]),S(r)&&!S(B)?(M(),X(ce,{key:1,modelValue:S(g),"onUpdate:modelValue":k[5]||(k[5]=U=>ie(g)?g.value=U:null),class:"mt-1",columns:t.columns},null,8,["modelValue","columns"])):j("",!0),Al,N("div",Tl,[O(ae,{class:"ms-1 col",variant:"secondary",size:"sm",disabled:S(i),title:"Reset to last saved configuration",onClick:w},{default:z(()=>[re("Reset")]),_:1},8,["disabled"]),O(ae,{disabled:S(n).activeBot.isWebserverMode&&S(n).activeBot.botApiVersion<2.23||!S(n).activeBot.isBotOnline||S(i),class:"ms-1 col",variant:"secondary",size:"sm",onClick:A},{default:z(()=>[re(" From strategy ")]),_:1},8,["disabled"]),O(ae,{id:"showButton",class:"ms-1 col",variant:"secondary",size:"sm",disabled:S(i),title:"Show configuration for easy transfer to a strategy",onClick:k[6]||(k[6]=U=>s.value=!S(s))},{default:z(()=>[re(fe(S(s)?"Hide":"Show"),1)]),_:1},8,["disabled"]),O(ae,{class:"ms-1 col",variant:"primary",size:"sm","data-toggle":"tooltip",disabled:S(i),title:"Save configuration",onClick:L},{default:z(()=>[re("Save")]),_:1},8,["disabled"])]),S(s)?(M(),X(ae,{key:2,class:"ms-1 mt-1",variant:"secondary",size:"sm",title:"Load configuration from text box below",onClick:P},{default:z(()=>[re("Load from String")]),_:1})):j("",!0),S(s)?(M(),$("div",Pl,[O(oe,{id:"TextArea",modelValue:S(b),"onUpdate:modelValue":k[7]||(k[7]=U=>ie(b)?b.value=U:null),class:"textArea",size:"sm",state:S(u)},null,8,["modelValue","state"])])):j("",!0)])):j("",!0)}}}),Ll=Aa(Dl,[["__scopeId","data-v-928b6406"]]);var Il=function(t){R(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a.hasSymbolVisual=!0,a}return e.prototype.getInitialData=function(a,n){return zi(null,this,{useEncodeDefaulter:!0})},e.prototype.getProgressive=function(){var a=this.option.progressive;return a??(this.option.large?5e3:this.get("progressive"))},e.prototype.getProgressiveThreshold=function(){var a=this.option.progressiveThreshold;return a??(this.option.large?1e4:this.get("progressiveThreshold"))},e.prototype.brushSelector=function(a,n,o){return o.point(n.getItemLayout(a))},e.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},e.type="series.scatter",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},e}(vo),Ro=4,kl=function(){function t(){}return t}(),Ol=function(t){R(e,t);function e(a){var n=t.call(this,a)||this;return n._off=0,n.hoverDataIdx=-1,n}return e.prototype.getDefaultShape=function(){return new kl},e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.buildPath=function(a,n){var o=n.points,r=n.size,i=this.symbolProxy,s=i.shape,l=a.getContext?a.getContext():a,c=l&&r[0]<Ro,u=this.softClipShape,d;if(c){this._ctx=l;return}for(this._ctx=null,d=this._off;d<o.length;){var p=o[d++],h=o[d++];isNaN(p)||isNaN(h)||u&&!u.contain(p,h)||(s.x=p-r[0]/2,s.y=h-r[1]/2,s.width=r[0],s.height=r[1],i.buildPath(a,s,!0))}this.incremental&&(this._off=d,this.notClear=!0)},e.prototype.afterBrush=function(){var a=this.shape,n=a.points,o=a.size,r=this._ctx,i=this.softClipShape,s;if(r){for(s=this._off;s<n.length;){var l=n[s++],c=n[s++];isNaN(l)||isNaN(c)||i&&!i.contain(l,c)||r.fillRect(l-o[0]/2,c-o[1]/2,o[0],o[1])}this.incremental&&(this._off=s,this.notClear=!0)}},e.prototype.findDataIndex=function(a,n){for(var o=this.shape,r=o.points,i=o.size,s=Math.max(i[0],4),l=Math.max(i[1],4),c=r.length/2-1;c>=0;c--){var u=c*2,d=r[u]-s/2,p=r[u+1]-l/2;if(a>=d&&n>=p&&a<=d+s&&n<=p+l)return c}return-1},e.prototype.contain=function(a,n){var o=this.transformCoordToLocal(a,n),r=this.getBoundingRect();if(a=o[0],n=o[1],r.contain(a,n)){var i=this.hoverDataIdx=this.findDataIndex(a,n);return i>=0}return this.hoverDataIdx=-1,!1},e.prototype.getBoundingRect=function(){var a=this._rect;if(!a){for(var n=this.shape,o=n.points,r=n.size,i=r[0],s=r[1],l=1/0,c=1/0,u=-1/0,d=-1/0,p=0;p<o.length;){var h=o[p++],f=o[p++];l=Math.min(h,l),u=Math.max(h,u),c=Math.min(f,c),d=Math.max(f,d)}a=this._rect=new Ta(l-i/2,c-s/2,u-l+i,d-c+s)}return a},e}(dt),Ml=function(){function t(){this.group=new De}return t.prototype.updateData=function(e,a){this._clear();var n=this._create();n.setShape({points:e.getLayout("points")}),this._setCommon(n,e,a)},t.prototype.updateLayout=function(e){var a=e.getLayout("points");this.group.eachChild(function(n){if(n.startIndex!=null){var o=(n.endIndex-n.startIndex)*2,r=n.startIndex*4*2;a=new Float32Array(a.buffer,r,o)}n.setShape("points",a),n.reset()})},t.prototype.incrementalPrepareUpdate=function(e){this._clear()},t.prototype.incrementalUpdate=function(e,a,n){var o=this._newAdded[0],r=a.getLayout("points"),i=o&&o.shape.points;if(i&&i.length<2e4){var s=i.length,l=new Float32Array(s+r.length);l.set(i),l.set(r,s),o.endIndex=e.end,o.setShape({points:l})}else{this._newAdded=[];var c=this._create();c.startIndex=e.start,c.endIndex=e.end,c.incremental=!0,c.setShape({points:r}),this._setCommon(c,a,n)}},t.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},t.prototype._create=function(){var e=new Ol({cursor:"default"});return e.ignoreCoarsePointer=!0,this.group.add(e),this._newAdded.push(e),e},t.prototype._setCommon=function(e,a,n){var o=a.hostModel;n=n||{};var r=a.getVisual("symbolSize");e.setShape("size",r instanceof Array?r:[r,r]),e.softClipShape=n.clipShape||null,e.symbolProxy=Pa(a.getVisual("symbol"),0,0,0,0),e.setColor=e.symbolProxy.setColor;var i=e.shape.size[0]<Ro;e.useStyle(o.getModel("itemStyle").getItemStyle(i?["color","shadowBlur","shadowColor"]:["color"]));var s=a.getVisual("style"),l=s&&s.fill;l&&e.setColor(l);var c=Ue(e);c.seriesIndex=o.seriesIndex,e.on("mousemove",function(u){c.dataIndex=null;var d=e.hoverDataIdx;d>=0&&(c.dataIndex=d+(e.startIndex||0))})},t.prototype.remove=function(){this._clear()},t.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},t}(),Bl=function(t){R(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.render=function(a,n,o){var r=a.getData(),i=this._updateSymbolDraw(r,a);i.updateData(r,{clipShape:this._getClipShape(a)}),this._finished=!0},e.prototype.incrementalPrepareRender=function(a,n,o){var r=a.getData(),i=this._updateSymbolDraw(r,a);i.incrementalPrepareUpdate(r),this._finished=!1},e.prototype.incrementalRender=function(a,n,o){this._symbolDraw.incrementalUpdate(a,n.getData(),{clipShape:this._getClipShape(n)}),this._finished=a.end===n.getData().count()},e.prototype.updateTransform=function(a,n,o){var r=a.getData();if(this.group.dirty(),!this._finished||r.count()>1e4)return{update:!0};var i=Mo("").reset(a,n,o);i.progress&&i.progress({start:0,end:r.count(),count:r.count()},r),this._symbolDraw.updateLayout(r)},e.prototype.eachRendered=function(a){this._symbolDraw&&this._symbolDraw.eachRendered(a)},e.prototype._getClipShape=function(a){if(a.get("clip",!0)){var n=a.coordinateSystem;return n&&n.getArea&&n.getArea(.1)}},e.prototype._updateSymbolDraw=function(a,n){var o=this._symbolDraw,r=n.pipelineContext,i=r.large;return(!o||i!==this._isLargeDraw)&&(o&&o.remove(),o=this._symbolDraw=i?new Ml:new $i,this._isLargeDraw=i,this.group.removeAll()),this.group.add(o.group),o},e.prototype.remove=function(a,n){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},e.prototype.dispose=function(){},e.type="scatter",e}(mo);function Vl(t){Da(Fi),t.registerSeriesModel(Il),t.registerChartView(Bl),t.registerLayout(Mo("scatter"))}var El={axisPointer:1,tooltip:1,brush:1};function Nl(t,e,a){var n=e.getComponentByElement(t.topTarget),o=n&&n.coordinateSystem;return n&&n!==a&&!El.hasOwnProperty(n.mainType)&&o&&o.model!==a}var hn=sa.prototype,$t=kr.prototype,zo=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return t}();(function(t){R(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(zo);function Ft(t){return isNaN(+t.cpx1)||isNaN(+t.cpy1)}var Rl=function(t){R(e,t);function e(a){var n=t.call(this,a)||this;return n.type="ec-line",n}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new zo},e.prototype.buildPath=function(a,n){Ft(n)?hn.buildPath.call(this,a,n):$t.buildPath.call(this,a,n)},e.prototype.pointAt=function(a){return Ft(this.shape)?hn.pointAt.call(this,a):$t.pointAt.call(this,a)},e.prototype.tangentAt=function(a){var n=this.shape,o=Ft(n)?[n.x2-n.x1,n.y2-n.y1]:$t.tangentAt.call(this,a);return go(o,o)},e}(dt),Ut=["fromSymbol","toSymbol"];function vn(t){return"_"+t+"Type"}function mn(t,e,a){var n=e.getItemVisual(a,t);if(!n||n==="none")return n;var o=e.getItemVisual(a,t+"Size"),r=e.getItemVisual(a,t+"Rotate"),i=e.getItemVisual(a,t+"Offset"),s=e.getItemVisual(a,t+"KeepAspect"),l=Ia(o),c=ka(i||0,l);return n+l+c+(r||"")+(s||"")}function gn(t,e,a){var n=e.getItemVisual(a,t);if(!(!n||n==="none")){var o=e.getItemVisual(a,t+"Size"),r=e.getItemVisual(a,t+"Rotate"),i=e.getItemVisual(a,t+"Offset"),s=e.getItemVisual(a,t+"KeepAspect"),l=Ia(o),c=ka(i||0,l),u=Pa(n,-l[0]/2+c[0],-l[1]/2+c[1],l[0],l[1],null,s);return u.__specifiedRotation=r==null||isNaN(r)?void 0:+r*Math.PI/180||0,u.name=t,u}}function zl(t){var e=new Rl({name:"line",subPixelOptimize:!0});return pa(e.shape,t),e}function pa(t,e){t.x1=e[0][0],t.y1=e[0][1],t.x2=e[1][0],t.y2=e[1][1],t.percent=1;var a=e[2];a?(t.cpx1=a[0],t.cpy1=a[1]):(t.cpx1=NaN,t.cpy1=NaN)}var $l=function(t){R(e,t);function e(a,n,o){var r=t.call(this)||this;return r._createLine(a,n,o),r}return e.prototype._createLine=function(a,n,o){var r=a.hostModel,i=a.getItemLayout(n),s=zl(i);s.shape.percent=0,yo(s,{shape:{percent:1}},r,n),this.add(s),T(Ut,function(l){var c=gn(l,a,n);this.add(c),this[vn(l)]=mn(l,a,n)},this),this._updateCommonStl(a,n,o)},e.prototype.updateData=function(a,n,o){var r=a.hostModel,i=this.childOfName("line"),s=a.getItemLayout(n),l={shape:{}};pa(l.shape,s),La(i,l,r,n),T(Ut,function(c){var u=mn(c,a,n),d=vn(c);if(this[d]!==u){this.remove(this.childOfName(c));var p=gn(c,a,n);this.add(p)}this[d]=u},this),this._updateCommonStl(a,n,o)},e.prototype.getLinePath=function(){return this.childAt(0)},e.prototype._updateCommonStl=function(a,n,o){var r=a.hostModel,i=this.childOfName("line"),s=o&&o.emphasisLineStyle,l=o&&o.blurLineStyle,c=o&&o.selectLineStyle,u=o&&o.labelStatesModels,d=o&&o.emphasisDisabled,p=o&&o.focus,h=o&&o.blurScope;if(!o||a.hasItemOption){var f=a.getItemModel(n),y=f.getModel("emphasis");s=y.getModel("lineStyle").getLineStyle(),l=f.getModel(["blur","lineStyle"]).getLineStyle(),c=f.getModel(["select","lineStyle"]).getLineStyle(),d=y.get("disabled"),p=y.get("focus"),h=y.get("blurScope"),u=bo(f)}var g=a.getItemVisual(n,"style"),b=g.stroke;i.useStyle(g),i.style.fill=null,i.style.strokeNoScale=!0,i.ensureState("emphasis").style=s,i.ensureState("blur").style=l,i.ensureState("select").style=c,T(Ut,function(_){var w=this.childOfName(_);if(w){w.setColor(b),w.style.opacity=g.opacity;for(var P=0;P<tn.length;P++){var A=tn[P],L=i.getState(A);if(L){var V=L.style||{},B=w.ensureState(A),I=B.style||(B.style={});V.stroke!=null&&(I[w.__isEmptyBrush?"stroke":"fill"]=V.stroke),V.opacity!=null&&(I.opacity=V.opacity)}}w.markRedraw()}},this);var m=r.getRawValue(n);Or(this,u,{labelDataIndex:n,labelFetcher:{getFormattedLabel:function(_,w){return r.getFormattedLabel(_,w,a.dataType)}},inheritColor:b||"#000",defaultOpacity:g.opacity,defaultText:(m==null?a.getName(n):isFinite(m)?Mr(m):m)+""});var x=this.getTextContent();if(x){var v=u.normal;x.__align=x.style.align,x.__verticalAlign=x.style.verticalAlign,x.__position=v.get("position")||"middle";var C=v.get("distance");G(C)||(C=[C,C]),x.__labelDistance=C}this.setTextConfig({position:null,local:!0,inside:!1}),Br(this,p,h,d)},e.prototype.highlight=function(){la(this)},e.prototype.downplay=function(){ua(this)},e.prototype.updateLayout=function(a,n){this.setLinePoints(a.getItemLayout(n))},e.prototype.setLinePoints=function(a){var n=this.childOfName("line");pa(n.shape,a),n.dirty()},e.prototype.beforeUpdate=function(){var a=this,n=a.childOfName("fromSymbol"),o=a.childOfName("toSymbol"),r=a.getTextContent();if(!n&&!o&&(!r||r.ignore))return;for(var i=1,s=this.parent;s;)s.scaleX&&(i/=s.scaleX),s=s.parent;var l=a.childOfName("line");if(!this.__dirty&&!l.__dirty)return;var c=l.shape.percent,u=l.pointAt(0),d=l.pointAt(c),p=Vr([],d,u);go(p,p);function h(L,V){var B=L.__specifiedRotation;if(B==null){var I=l.tangentAt(V);L.attr("rotation",(V===1?-1:1)*Math.PI/2-Math.atan2(I[1],I[0]))}else L.attr("rotation",B)}if(n&&(n.setPosition(u),h(n,0),n.scaleX=n.scaleY=i*c,n.markRedraw()),o&&(o.setPosition(d),h(o,1),o.scaleX=o.scaleY=i*c,o.markRedraw()),r&&!r.ignore){r.x=r.y=0,r.originX=r.originY=0;var f=void 0,y=void 0,g=r.__labelDistance,b=g[0]*i,m=g[1]*i,x=c/2,v=l.tangentAt(x),C=[v[1],-v[0]],_=l.pointAt(x);C[1]>0&&(C[0]=-C[0],C[1]=-C[1]);var w=v[0]<0?-1:1;if(r.__position!=="start"&&r.__position!=="end"){var P=-Math.atan2(v[1],v[0]);d[0]<u[0]&&(P=Math.PI+P),r.rotation=P}var A=void 0;switch(r.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":A=-m,y="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":A=m,y="top";break;default:A=0,y="middle"}switch(r.__position){case"end":r.x=p[0]*b+d[0],r.y=p[1]*m+d[1],f=p[0]>.8?"left":p[0]<-.8?"right":"center",y=p[1]>.8?"top":p[1]<-.8?"bottom":"middle";break;case"start":r.x=-p[0]*b+u[0],r.y=-p[1]*m+u[1],f=p[0]>.8?"right":p[0]<-.8?"left":"center",y=p[1]>.8?"bottom":p[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":r.x=b*w+u[0],r.y=u[1]+A,f=v[0]<0?"right":"left",r.originX=-b*w,r.originY=-A;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":r.x=_[0],r.y=_[1]+A,f="center",r.originY=-A;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":r.x=-b*w+d[0],r.y=d[1]+A,f=v[0]>=0?"right":"left",r.originX=b*w,r.originY=-A;break}r.scaleX=r.scaleY=i,r.setStyle({verticalAlign:r.__verticalAlign||y,align:r.__align||f})}},e}(De),Fl=function(){function t(e){this.group=new De,this._LineCtor=e||$l}return t.prototype.updateData=function(e){var a=this;this._progressiveEls=null;var n=this,o=n.group,r=n._lineData;n._lineData=e,r||o.removeAll();var i=yn(e);e.diff(r).add(function(s){a._doAdd(e,s,i)}).update(function(s,l){a._doUpdate(r,e,l,s,i)}).remove(function(s){o.remove(r.getItemGraphicEl(s))}).execute()},t.prototype.updateLayout=function(){var e=this._lineData;e&&e.eachItemGraphicEl(function(a,n){a.updateLayout(e,n)},this)},t.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=yn(e),this._lineData=null,this.group.removeAll()},t.prototype.incrementalUpdate=function(e,a){this._progressiveEls=[];function n(s){!s.isGroup&&!Ul(s)&&(s.incremental=!0,s.ensureState("emphasis").hoverLayer=!0)}for(var o=e.start;o<e.end;o++){var r=a.getItemLayout(o);if(Wt(r)){var i=new this._LineCtor(a,o,this._seriesScope);i.traverse(n),this.group.add(i),a.setItemGraphicEl(o,i),this._progressiveEls.push(i)}}},t.prototype.remove=function(){this.group.removeAll()},t.prototype.eachRendered=function(e){_o(this._progressiveEls||this.group,e)},t.prototype._doAdd=function(e,a,n){var o=e.getItemLayout(a);if(Wt(o)){var r=new this._LineCtor(e,a,n);e.setItemGraphicEl(a,r),this.group.add(r)}},t.prototype._doUpdate=function(e,a,n,o,r){var i=e.getItemGraphicEl(n);if(!Wt(a.getItemLayout(o))){this.group.remove(i);return}i?i.updateData(a,o,r):i=new this._LineCtor(a,o,r),a.setItemGraphicEl(o,i),this.group.add(i)},t}();function Ul(t){return t.animators&&t.animators.length>0}function yn(t){var e=t.hostModel,a=e.getModel("emphasis");return{lineStyle:e.getModel("lineStyle").getLineStyle(),emphasisLineStyle:a.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:e.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:e.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:a.get("disabled"),blurScope:a.get("blurScope"),focus:a.get("focus"),labelStatesModels:bo(e)}}function bn(t){return isNaN(t[0])||isNaN(t[1])}function Wt(t){return t&&!bn(t[0])&&!bn(t[1])}var Ve=!0,lt=Math.min,Ge=Math.max,Wl=Math.pow,Gl=1e4,jl=6,Zl=6,_n="globalPan",Hl={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},Yl={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},xn={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},Kl=0,ql=function(t){R(e,t);function e(a){var n=t.call(this)||this;return n._track=[],n._covers=[],n._handlers={},n._zr=a,n.group=new De,n._uid="brushController_"+Kl++,T(nu,function(o,r){this._handlers[r]=he(o,this)},n),n}return e.prototype.enableBrush=function(a){return this._brushType&&this._doDisableBrush(),a.brushType&&this._doEnableBrush(a),this},e.prototype._doEnableBrush=function(a){var n=this._zr;this._enableGlobalPan||Ui(n,_n,this._uid),T(this._handlers,function(o,r){n.on(r,o)}),this._brushType=a.brushType,this._brushOption=me(xe(xn),a,!0)},e.prototype._doDisableBrush=function(){var a=this._zr;Wi(a,_n,this._uid),T(this._handlers,function(n,o){a.off(o,n)}),this._brushType=this._brushOption=null},e.prototype.setPanels=function(a){if(a&&a.length){var n=this._panels={};T(a,function(o){n[o.panelId]=xe(o)})}else this._panels=null;return this},e.prototype.mount=function(a){a=a||{},this._enableGlobalPan=a.enableGlobalPan;var n=this.group;return this._zr.add(n),n.attr({x:a.x||0,y:a.y||0,rotation:a.rotation||0,scaleX:a.scaleX||1,scaleY:a.scaleY||1}),this._transform=n.getLocalTransform(),this},e.prototype.updateCovers=function(a){a=Z(a,function(p){return me(xe(xn),p,!0)});var n="\0-brush-index-",o=this._covers,r=this._covers=[],i=this,s=this._creatingCover;return new xo(o,a,c,l).add(u).update(u).remove(d).execute(),this;function l(p,h){return(p.id!=null?p.id:n+h)+"-"+p.brushType}function c(p,h){return l(p.__brushOption,h)}function u(p,h){var f=a[p];if(h!=null&&o[h]===s)r[p]=o[h];else{var y=r[p]=h!=null?(o[h].__brushOption=f,o[h]):Fo(i,$o(i,f));Ra(i,y)}}function d(p){o[p]!==s&&i.group.remove(o[p])}},e.prototype.unmount=function(){return this.enableBrush(!1),fa(this),this._zr.remove(this.group),this},e.prototype.dispose=function(){this.unmount(),this.off()},e}(Er);function $o(t,e){var a=It[e.brushType].createCover(t,e);return a.__brushOption=e,Wo(a,e),t.group.add(a),a}function Fo(t,e){var a=za(e);return a.endCreating&&(a.endCreating(t,e),Wo(e,e.__brushOption)),e}function Uo(t,e){var a=e.__brushOption;za(e).updateCoverShape(t,e,a.range,a)}function Wo(t,e){var a=e.z;a==null&&(a=Gl),t.traverse(function(n){n.z=a,n.z2=a})}function Ra(t,e){za(e).updateCommon(t,e),Uo(t,e)}function za(t){return It[t.__brushOption.brushType]}function $a(t,e,a){var n=t._panels;if(!n)return Ve;var o,r=t._transform;return T(n,function(i){i.isTargetByCursor(e,a,r)&&(o=i)}),o}function Go(t,e){var a=t._panels;if(!a)return Ve;var n=e.__brushOption.panelId;return n!=null?a[n]:Ve}function fa(t){var e=t._covers,a=e.length;return T(e,function(n){t.group.remove(n)},t),e.length=0,!!a}function Ee(t,e){var a=Z(t._covers,function(n){var o=n.__brushOption,r=xe(o.range);return{brushType:o.brushType,panelId:o.panelId,range:r}});t.trigger("brush",{areas:a,isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function Xl(t){var e=t._track;if(!e.length)return!1;var a=e[e.length-1],n=e[0],o=a[0]-n[0],r=a[1]-n[1],i=Wl(o*o+r*r,.5);return i>jl}function jo(t){var e=t.length-1;return e<0&&(e=0),[t[0],t[e]]}function Zo(t,e,a,n){var o=new De;return o.add(new ca({name:"main",style:Fa(a),silent:!0,draggable:!0,cursor:"move",drift:H(Sn,t,e,o,["n","s","w","e"]),ondragend:H(Ee,e,{isEnd:!0})})),T(n,function(r){o.add(new ca({name:r.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:H(Sn,t,e,o,r),ondragend:H(Ee,e,{isEnd:!0})}))}),o}function Ho(t,e,a,n){var o=n.brushStyle.lineWidth||0,r=Ge(o,Zl),i=a[0][0],s=a[1][0],l=i-o/2,c=s-o/2,u=a[0][1],d=a[1][1],p=u-r+o/2,h=d-r+o/2,f=u-i,y=d-s,g=f+o,b=y+o;Se(t,e,"main",i,s,f,y),n.transformable&&(Se(t,e,"w",l,c,r,b),Se(t,e,"e",p,c,r,b),Se(t,e,"n",l,c,g,r),Se(t,e,"s",l,h,g,r),Se(t,e,"nw",l,c,r,r),Se(t,e,"ne",p,c,r,r),Se(t,e,"sw",l,h,r,r),Se(t,e,"se",p,h,r,r))}function ha(t,e){var a=e.__brushOption,n=a.transformable,o=e.childAt(0);o.useStyle(Fa(a)),o.attr({silent:!n,cursor:n?"move":"default"}),T([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(r){var i=e.childOfName(r.join("")),s=r.length===1?va(t,r[0]):Ql(t,r);i&&i.attr({silent:!n,invisible:!n,cursor:n?Yl[s]+"-resize":null})})}function Se(t,e,a,n,o,r,i){var s=e.childOfName(a);s&&s.setShape(tu(Ua(t,e,[[n,o],[n+r,o+i]])))}function Fa(t){return He({strokeNoScale:!0},t.brushStyle)}function Yo(t,e,a,n){var o=[lt(t,a),lt(e,n)],r=[Ge(t,a),Ge(e,n)];return[[o[0],r[0]],[o[1],r[1]]]}function Jl(t){return Co(t.group)}function va(t,e){var a={w:"left",e:"right",n:"top",s:"bottom"},n={left:"w",right:"e",top:"n",bottom:"s"},o=Rr(a[e],Jl(t));return n[o]}function Ql(t,e){var a=[va(t,e[0]),va(t,e[1])];return(a[0]==="e"||a[0]==="w")&&a.reverse(),a.join("")}function Sn(t,e,a,n,o,r){var i=a.__brushOption,s=t.toRectRange(i.range),l=Ko(e,o,r);T(n,function(c){var u=Hl[c];s[u[0]][u[1]]+=l[u[0]]}),i.range=t.fromRectRange(Yo(s[0][0],s[1][0],s[0][1],s[1][1])),Ra(e,a),Ee(e,{isEnd:!1})}function eu(t,e,a,n){var o=e.__brushOption.range,r=Ko(t,a,n);T(o,function(i){i[0]+=r[0],i[1]+=r[1]}),Ra(t,e),Ee(t,{isEnd:!1})}function Ko(t,e,a){var n=t.group,o=n.transformCoordToLocal(e,a),r=n.transformCoordToLocal(0,0);return[o[0]-r[0],o[1]-r[1]]}function Ua(t,e,a){var n=Go(t,e);return n&&n!==Ve?n.clipPath(a,t._transform):xe(a)}function tu(t){var e=lt(t[0][0],t[1][0]),a=lt(t[0][1],t[1][1]),n=Ge(t[0][0],t[1][0]),o=Ge(t[0][1],t[1][1]);return{x:e,y:a,width:n-e,height:o-a}}function au(t,e,a){if(!(!t._brushType||ou(t,e.offsetX,e.offsetY))){var n=t._zr,o=t._covers,r=$a(t,e,a);if(!t._dragging)for(var i=0;i<o.length;i++){var s=o[i].__brushOption;if(r&&(r===Ve||s.panelId===r.panelId)&&It[s.brushType].contain(o[i],a[0],a[1]))return}r&&n.setCursorStyle("crosshair")}}function ma(t){var e=t.event;e.preventDefault&&e.preventDefault()}function ga(t,e,a){return t.childOfName("main").contain(e,a)}function qo(t,e,a,n){var o=t._creatingCover,r=t._creatingPanel,i=t._brushOption,s;if(t._track.push(a.slice()),Xl(t)||o){if(r&&!o){i.brushMode==="single"&&fa(t);var l=xe(i);l.brushType=Cn(l.brushType,r),l.panelId=r===Ve?null:r.panelId,o=t._creatingCover=$o(t,l),t._covers.push(o)}if(o){var c=It[Cn(t._brushType,r)],u=o.__brushOption;u.range=c.getCreatingRange(Ua(t,o,t._track)),n&&(Fo(t,o),c.updateCommon(t,o)),Uo(t,o),s={isEnd:n}}}else n&&i.brushMode==="single"&&i.removeOnClick&&$a(t,e,a)&&fa(t)&&(s={isEnd:n,removeOnClick:!0});return s}function Cn(t,e){return t==="auto"?e.defaultBrushType:t}var nu={mousedown:function(t){if(this._dragging)wn(this,t);else if(!t.target||!t.target.draggable){ma(t);var e=this.group.transformCoordToLocal(t.offsetX,t.offsetY);this._creatingCover=null;var a=this._creatingPanel=$a(this,t,e);a&&(this._dragging=!0,this._track=[e.slice()])}},mousemove:function(t){var e=t.offsetX,a=t.offsetY,n=this.group.transformCoordToLocal(e,a);if(au(this,t,n),this._dragging){ma(t);var o=qo(this,t,n,!1);o&&Ee(this,o)}},mouseup:function(t){wn(this,t)}};function wn(t,e){if(t._dragging){ma(e);var a=e.offsetX,n=e.offsetY,o=t.group.transformCoordToLocal(a,n),r=qo(t,e,o,!0);t._dragging=!1,t._track=[],t._creatingCover=null,r&&Ee(t,r)}}function ou(t,e,a){var n=t._zr;return e<0||e>n.getWidth()||a<0||a>n.getHeight()}var It={lineX:An(0),lineY:An(1),rect:{createCover:function(t,e){function a(n){return n}return Zo({toRectRange:a,fromRectRange:a},t,e,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(t){var e=jo(t);return Yo(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(t,e,a,n){Ho(t,e,a,n)},updateCommon:ha,contain:ga},polygon:{createCover:function(t,e){var a=new De;return a.add(new So({name:"main",style:Fa(e),silent:!0})),a},getCreatingRange:function(t){return t},endCreating:function(t,e){e.remove(e.childAt(0)),e.add(new Nr({name:"main",draggable:!0,drift:H(eu,t,e),ondragend:H(Ee,t,{isEnd:!0})}))},updateCoverShape:function(t,e,a,n){e.childAt(0).setShape({points:Ua(t,e,a)})},updateCommon:ha,contain:ga}};function An(t){return{createCover:function(e,a){return Zo({toRectRange:function(n){var o=[n,[0,100]];return t&&o.reverse(),o},fromRectRange:function(n){return n[t]}},e,a,[[["w"],["e"]],[["n"],["s"]]][t])},getCreatingRange:function(e){var a=jo(e),n=lt(a[0][t],a[1][t]),o=Ge(a[0][t],a[1][t]);return[n,o]},updateCoverShape:function(e,a,n,o){var r,i=Go(e,a);if(i!==Ve&&i.getLinearBrushOtherExtent)r=i.getLinearBrushOtherExtent(t);else{var s=e._zr;r=[0,[s.getWidth(),s.getHeight()][1-t]]}var l=[n,r];t&&l.reverse(),Ho(e,a,l,o)},updateCommon:ha,contain:ga}}function ru(t){return t=Wa(t),function(e){return zr(e,t)}}function iu(t,e){return t=Wa(t),function(a){var n=e??a,o=n?t.width:t.height,r=n?t.x:t.y;return[r,r+(o||0)]}}function su(t,e,a){var n=Wa(t);return function(o,r){return n.contain(r[0],r[1])&&!Nl(o,e,a)}}function Wa(t){return Ta.create(t)}var lu=function(){function t(){}return t.prototype.getInitialData=function(e,a){var n,o=a.getComponent("xAxis",this.get("xAxisIndex")),r=a.getComponent("yAxis",this.get("yAxisIndex")),i=o.get("type"),s=r.get("type"),l;i==="category"?(e.layout="horizontal",n=o.getOrdinalMeta(),l=!0):s==="category"?(e.layout="vertical",n=r.getOrdinalMeta(),l=!0):e.layout=e.layout||"horizontal";var c=["x","y"],u=e.layout==="horizontal"?0:1,d=this._baseAxisDim=c[u],p=c[1-u],h=[o,r],f=h[u].get("type"),y=h[1-u].get("type"),g=e.data;if(g&&l){var b=[];T(g,function(v,C){var _;G(v)?(_=v.slice(),v.unshift(C)):G(v.value)?(_=J({},v),_.value=_.value.slice(),v.value.unshift(C)):_=v,b.push(_)}),e.data=b}var m=this.defaultValueDimensions,x=[{name:d,type:an(f),ordinalMeta:n,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:p,type:an(y),dimsDef:m.slice()}];return os(this,{coordDimensions:x,dimensionsCount:m.length+1,encodeDefaulter:H($r,x,this)})},t.prototype.getBaseAxis=function(){var e=this._baseAxisDim;return this.ecModel.getComponent(e+"Axis",this.get(e+"AxisIndex")).axis},t}(),uu=["color","borderColor"],cu=function(t){R(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.render=function(a,n,o){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(a),this._isLargeDraw?this._renderLarge(a):this._renderNormal(a)},e.prototype.incrementalPrepareRender=function(a,n,o){this._clear(),this._updateDrawMode(a)},e.prototype.incrementalRender=function(a,n,o,r){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(a,n):this._incrementalRenderNormal(a,n)},e.prototype.eachRendered=function(a){_o(this._progressiveEls||this.group,a)},e.prototype._updateDrawMode=function(a){var n=a.pipelineContext.large;(this._isLargeDraw==null||n!==this._isLargeDraw)&&(this._isLargeDraw=n,this._clear())},e.prototype._renderNormal=function(a){var n=a.getData(),o=this._data,r=this.group,i=n.getLayout("isSimpleBox"),s=a.get("clip",!0),l=a.coordinateSystem,c=l.getArea&&l.getArea();this._data||r.removeAll(),n.diff(o).add(function(u){if(n.hasValue(u)){var d=n.getItemLayout(u);if(s&&Tn(c,d))return;var p=Gt(d,u,!0);yo(p,{shape:{points:d.ends}},a,u),jt(p,n,u,i),r.add(p),n.setItemGraphicEl(u,p)}}).update(function(u,d){var p=o.getItemGraphicEl(d);if(!n.hasValue(u)){r.remove(p);return}var h=n.getItemLayout(u);if(s&&Tn(c,h)){r.remove(p);return}p?(La(p,{shape:{points:h.ends}},a,u),Fr(p)):p=Gt(h),jt(p,n,u,i),r.add(p),n.setItemGraphicEl(u,p)}).remove(function(u){var d=o.getItemGraphicEl(u);d&&r.remove(d)}).execute(),this._data=n},e.prototype._renderLarge=function(a){this._clear(),Pn(a,this.group);var n=a.get("clip",!0)?Gi(a.coordinateSystem,!1,a):null;n?this.group.setClipPath(n):this.group.removeClipPath()},e.prototype._incrementalRenderNormal=function(a,n){for(var o=n.getData(),r=o.getLayout("isSimpleBox"),i;(i=a.next())!=null;){var s=o.getItemLayout(i),l=Gt(s);jt(l,o,i,r),l.incremental=!0,this.group.add(l),this._progressiveEls.push(l)}},e.prototype._incrementalRenderLarge=function(a,n){Pn(n,this.group,this._progressiveEls,!0)},e.prototype.remove=function(a){this._clear()},e.prototype._clear=function(){this.group.removeAll(),this._data=null},e.type="candlestick",e}(mo),du=function(){function t(){}return t}(),pu=function(t){R(e,t);function e(a){var n=t.call(this,a)||this;return n.type="normalCandlestickBox",n}return e.prototype.getDefaultShape=function(){return new du},e.prototype.buildPath=function(a,n){var o=n.points;this.__simpleBox?(a.moveTo(o[4][0],o[4][1]),a.lineTo(o[6][0],o[6][1])):(a.moveTo(o[0][0],o[0][1]),a.lineTo(o[1][0],o[1][1]),a.lineTo(o[2][0],o[2][1]),a.lineTo(o[3][0],o[3][1]),a.closePath(),a.moveTo(o[4][0],o[4][1]),a.lineTo(o[5][0],o[5][1]),a.moveTo(o[6][0],o[6][1]),a.lineTo(o[7][0],o[7][1]))},e}(dt);function Gt(t,e,a){var n=t.ends;return new pu({shape:{points:a?fu(n,t):n},z2:100})}function Tn(t,e){for(var a=!0,n=0;n<e.ends.length;n++)if(t.contain(e.ends[n][0],e.ends[n][1])){a=!1;break}return a}function jt(t,e,a,n){var o=e.getItemModel(a);t.useStyle(e.getItemVisual(a,"style")),t.style.strokeNoScale=!0,t.__simpleBox=n,Ur(t,o)}function fu(t,e){return Z(t,function(a){return a=a.slice(),a[1]=e.initBaseline,a})}var hu=function(){function t(){}return t}(),Zt=function(t){R(e,t);function e(a){var n=t.call(this,a)||this;return n.type="largeCandlestickBox",n}return e.prototype.getDefaultShape=function(){return new hu},e.prototype.buildPath=function(a,n){for(var o=n.points,r=0;r<o.length;)if(this.__sign===o[r++]){var i=o[r++];a.moveTo(i,o[r++]),a.lineTo(i,o[r++])}else r+=3},e}(dt);function Pn(t,e,a,n){var o=t.getData(),r=o.getLayout("largePoints"),i=new Zt({shape:{points:r},__sign:1,ignoreCoarsePointer:!0});e.add(i);var s=new Zt({shape:{points:r},__sign:-1,ignoreCoarsePointer:!0});e.add(s);var l=new Zt({shape:{points:r},__sign:0,ignoreCoarsePointer:!0});e.add(l),Ht(1,i,t),Ht(-1,s,t),Ht(0,l,t),n&&(i.incremental=!0,s.incremental=!0),a&&a.push(i,s)}function Ht(t,e,a,n){var o=a.get(["itemStyle",t>0?"borderColor":"borderColor0"])||a.get(["itemStyle",t>0?"color":"color0"]);t===0&&(o=a.get(["itemStyle","borderColorDoji"]));var r=a.getModel("itemStyle").getItemStyle(uu);e.useStyle(r),e.style.fill=null,e.style.stroke=o}var Xo=function(t){R(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],a}return e.prototype.getShadowDim=function(){return"open"},e.prototype.brushSelector=function(a,n,o){var r=n.getItemLayout(a);return r&&o.rect(r.brushRect)},e.type="series.candlestick",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},e}(vo);Oa(Xo,lu,!0);function vu(t){!t||!G(t.series)||T(t.series,function(e){ot(e)&&e.type==="k"&&(e.type="candlestick")})}var mu=["itemStyle","borderColor"],gu=["itemStyle","borderColor0"],yu=["itemStyle","borderColorDoji"],bu=["itemStyle","color"],_u=["itemStyle","color0"],xu={seriesType:"candlestick",plan:wo(),performRawSeries:!0,reset:function(t,e){function a(r,i){return i.get(r>0?bu:_u)}function n(r,i){return i.get(r===0?yu:r>0?mu:gu)}if(!e.isSeriesFiltered(t)){var o=t.pipelineContext.large;return!o&&{progress:function(r,i){for(var s;(s=r.next())!=null;){var l=i.getItemModel(s),c=i.getItemLayout(s).sign,u=l.getItemStyle();u.fill=a(c,l),u.stroke=n(c,l)||u.fill;var d=i.ensureUniqueItemVisual(s,"style");J(d,u)}}}}}},Su={seriesType:"candlestick",plan:wo(),reset:function(t){var e=t.coordinateSystem,a=t.getData(),n=Cu(t,a),o=0,r=1,i=["x","y"],s=a.getDimensionIndex(a.mapDimension(i[o])),l=Z(a.mapDimensionsAll(i[r]),a.getDimensionIndex,a),c=l[0],u=l[1],d=l[2],p=l[3];if(a.setLayout({candleWidth:n,isSimpleBox:n<=1.3}),s<0||l.length<4)return;return{progress:t.pipelineContext.large?f:h};function h(y,g){for(var b,m=g.getStore();(b=y.next())!=null;){var x=m.get(s,b),v=m.get(c,b),C=m.get(u,b),_=m.get(d,b),w=m.get(p,b),P=Math.min(v,C),A=Math.max(v,C),L=K(P,x),V=K(A,x),B=K(_,x),I=K(w,x),k=[];ee(k,V,0),ee(k,L,1),k.push(ne(I),ne(V),ne(B),ne(L));var Q=g.getItemModel(b),ue=!!Q.get(["itemStyle","borderColorDoji"]);g.setItemLayout(b,{sign:Dn(m,b,v,C,u,ue),initBaseline:v>C?V[r]:L[r],ends:k,brushRect:ae(_,w,x)})}function K(q,ce){var oe=[];return oe[o]=ce,oe[r]=q,isNaN(ce)||isNaN(q)?[NaN,NaN]:e.dataToPoint(oe)}function ee(q,ce,oe){var U=ce.slice(),ye=ce.slice();U[o]=Nt(U[o]+n/2,1,!1),ye[o]=Nt(ye[o]-n/2,1,!0),oe?q.push(U,ye):q.push(ye,U)}function ae(q,ce,oe){var U=K(q,oe),ye=K(ce,oe);return U[o]-=n/2,ye[o]-=n/2,{x:U[0],y:U[1],width:n,height:ye[1]-U[1]}}function ne(q){return q[o]=Nt(q[o],1),q}}function f(y,g){for(var b=Wr(y.count*4),m=0,x,v=[],C=[],_,w=g.getStore(),P=!!t.get(["itemStyle","borderColorDoji"]);(_=y.next())!=null;){var A=w.get(s,_),L=w.get(c,_),V=w.get(u,_),B=w.get(d,_),I=w.get(p,_);if(isNaN(A)||isNaN(B)||isNaN(I)){b[m++]=NaN,m+=3;continue}b[m++]=Dn(w,_,L,V,u,P),v[o]=A,v[r]=B,x=e.dataToPoint(v,null,C),b[m++]=x?x[0]:NaN,b[m++]=x?x[1]:NaN,v[r]=I,x=e.dataToPoint(v,null,C),b[m++]=x?x[1]:NaN}g.setLayout("largePoints",b)}}};function Dn(t,e,a,n,o,r){var i;return a>n?i=-1:a<n?i=1:i=r?0:e>0?t.get(o,e-1)<=n?1:-1:1,i}function Cu(t,e){var a=t.getBaseAxis(),n,o=a.type==="category"?a.getBandWidth():(n=a.getExtent(),Math.abs(n[1]-n[0])/e.count()),r=Te(Ae(t.get("barMaxWidth"),o),o),i=Te(Ae(t.get("barMinWidth"),1),o),s=t.get("barWidth");return s!=null?Te(s,o):Math.max(Math.min(o/2,r),i)}function wu(t){t.registerChartView(cu),t.registerSeriesModel(Xo),t.registerPreprocessor(vu),t.registerVisual(xu),t.registerLayout(Su)}function Au(t,e,a,n){return t&&(t.legacy||t.legacy!==!1&&!a&&!n&&e!=="tspan"&&(e==="text"||E(t,"text")))}function Tu(t,e,a){var n=t,o,r,i;if(e==="text")i=n;else{i={},E(n,"text")&&(i.text=n.text),E(n,"rich")&&(i.rich=n.rich),E(n,"textFill")&&(i.fill=n.textFill),E(n,"textStroke")&&(i.stroke=n.textStroke),E(n,"fontFamily")&&(i.fontFamily=n.fontFamily),E(n,"fontSize")&&(i.fontSize=n.fontSize),E(n,"fontStyle")&&(i.fontStyle=n.fontStyle),E(n,"fontWeight")&&(i.fontWeight=n.fontWeight),r={type:"text",style:i,silent:!0},o={};var s=E(n,"textPosition");o.position=s?n.textPosition:"inside",E(n,"textPosition")&&(o.position=n.textPosition),E(n,"textOffset")&&(o.offset=n.textOffset),E(n,"textRotation")&&(o.rotation=n.textRotation),E(n,"textDistance")&&(o.distance=n.textDistance)}return Ln(i,t),T(i.rich,function(l){Ln(l,l)}),{textConfig:o,textContent:r}}function Ln(t,e){e&&(e.font=e.textFont||e.font,E(e,"textStrokeWidth")&&(t.lineWidth=e.textStrokeWidth),E(e,"textAlign")&&(t.align=e.textAlign),E(e,"textVerticalAlign")&&(t.verticalAlign=e.textVerticalAlign),E(e,"textLineHeight")&&(t.lineHeight=e.textLineHeight),E(e,"textWidth")&&(t.width=e.textWidth),E(e,"textHeight")&&(t.height=e.textHeight),E(e,"textBackgroundColor")&&(t.backgroundColor=e.textBackgroundColor),E(e,"textPadding")&&(t.padding=e.textPadding),E(e,"textBorderColor")&&(t.borderColor=e.textBorderColor),E(e,"textBorderWidth")&&(t.borderWidth=e.textBorderWidth),E(e,"textBorderRadius")&&(t.borderRadius=e.textBorderRadius),E(e,"textBoxShadowColor")&&(t.shadowColor=e.textBoxShadowColor),E(e,"textBoxShadowBlur")&&(t.shadowBlur=e.textBoxShadowBlur),E(e,"textBoxShadowOffsetX")&&(t.shadowOffsetX=e.textBoxShadowOffsetX),E(e,"textBoxShadowOffsetY")&&(t.shadowOffsetY=e.textBoxShadowOffsetY))}var Jo={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},In=Ye(Jo);Gr(rt,function(t,e){return t[e]=1,t},{});rt.join(", ");var Ct=["","style","shape","extra"],je=Le();function Ga(t,e,a,n,o){var r=t+"Animation",i=To(t,n,o)||{},s=je(e).userDuring;return i.duration>0&&(i.during=s?he(Ou,{el:e,userDuring:s}):null,i.setToFinal=!0,i.scope=t),J(i,a[r]),i}function Yt(t,e,a,n){n=n||{};var o=n.dataIndex,r=n.isInit,i=n.clearStyle,s=a.isAnimationEnabled(),l=je(t),c=e.style;l.userDuring=e.during;var u={},d={};if(Bu(t,e,d),On("shape",e,d),On("extra",e,d),!r&&s&&(Mu(t,e,u),kn("shape",t,e,u),kn("extra",t,e,u),Vu(t,e,c,u)),d.style=c,Du(t,d,i),Iu(t,e),s)if(r){var p={};T(Ct,function(f){var y=f?e[f]:e;y&&y.enterFrom&&(f&&(p[f]=p[f]||{}),J(f?p[f]:p,y.enterFrom))});var h=Ga("enter",t,e,a,o);h.duration>0&&t.animateFrom(p,h)}else Lu(t,e,o||0,a,u);Qo(t,e),c?t.dirty():t.markRedraw()}function Qo(t,e){for(var a=je(t).leaveToProps,n=0;n<Ct.length;n++){var o=Ct[n],r=o?e[o]:e;r&&r.leaveTo&&(a||(a=je(t).leaveToProps={}),o&&(a[o]=a[o]||{}),J(o?a[o]:a,r.leaveTo))}}function Pu(t,e,a,n){if(t){var o=t.parent,r=je(t).leaveToProps;if(r){var i=Ga("update",t,e,a,0);i.done=function(){o.remove(t)},t.animateTo(r,i)}else o.remove(t)}}function Be(t){return t==="all"}function Du(t,e,a){var n=e.style;if(!t.isGroup&&n){if(a){t.useStyle({});for(var o=t.animators,r=0;r<o.length;r++){var i=o[r];i.targetName==="style"&&i.changeTarget(t.style)}}t.setStyle(n)}e&&(e.style=null,e&&t.attr(e),e.style=n)}function Lu(t,e,a,n,o){if(o){var r=Ga("update",t,e,n,a);r.duration>0&&t.animateFrom(o,r)}}function Iu(t,e){E(e,"silent")&&(t.silent=e.silent),E(e,"ignore")&&(t.ignore=e.ignore),t instanceof Ao&&E(e,"invisible")&&(t.invisible=e.invisible),t instanceof dt&&E(e,"autoBatch")&&(t.autoBatch=e.autoBatch)}var _e={},ku={setTransform:function(t,e){return _e.el[t]=e,this},getTransform:function(t){return _e.el[t]},setShape:function(t,e){var a=_e.el,n=a.shape||(a.shape={});return n[t]=e,a.dirtyShape&&a.dirtyShape(),this},getShape:function(t){var e=_e.el.shape;if(e)return e[t]},setStyle:function(t,e){var a=_e.el,n=a.style;return n&&(n[t]=e,a.dirtyStyle&&a.dirtyStyle()),this},getStyle:function(t){var e=_e.el.style;if(e)return e[t]},setExtra:function(t,e){var a=_e.el.extra||(_e.el.extra={});return a[t]=e,this},getExtra:function(t){var e=_e.el.extra;if(e)return e[t]}};function Ou(){var t=this,e=t.el;if(e){var a=je(e).userDuring,n=t.userDuring;if(a!==n){t.el=t.userDuring=null;return}_e.el=e,n(ku)}}function kn(t,e,a,n){var o=a[t];if(o){var r=e[t],i;if(r){var s=a.transition,l=o.transition;if(l)if(!i&&(i=n[t]={}),Be(l))J(i,r);else for(var c=Ma(l),u=0;u<c.length;u++){var d=c[u],p=r[d];i[d]=p}else if(Be(s)||ge(s,t)>=0){!i&&(i=n[t]={});for(var h=Ye(r),u=0;u<h.length;u++){var d=h[u],p=r[d];Eu(o[d],p)&&(i[d]=p)}}}}}function On(t,e,a){var n=e[t];if(n)for(var o=a[t]={},r=Ye(n),i=0;i<r.length;i++){var s=r[i];o[s]=jr(n[s])}}function Mu(t,e,a){for(var n=e.transition,o=Be(n)?rt:Ma(n||[]),r=0;r<o.length;r++){var i=o[r];if(!(i==="style"||i==="shape"||i==="extra")){var s=t[i];a[i]=s}}}function Bu(t,e,a){for(var n=0;n<In.length;n++){var o=In[n],r=Jo[o],i=e[o];i&&(a[r[0]]=i[0],a[r[1]]=i[1])}for(var n=0;n<rt.length;n++){var s=rt[n];e[s]!=null&&(a[s]=e[s])}}function Vu(t,e,a,n){if(a){var o=t.style,r;if(o){var i=a.transition,s=e.transition;if(i&&!Be(i)){var l=Ma(i);!r&&(r=n.style={});for(var c=0;c<l.length;c++){var u=l[c],d=o[u];r[u]=d}}else if(t.getAnimationStyleProps&&(Be(s)||Be(i)||ge(s,"style")>=0)){var p=t.getAnimationStyleProps(),h=p?p.style:null;if(h){!r&&(r=n.style={});for(var f=Ye(a),c=0;c<f.length;c++){var u=f[c];if(h[u]){var d=o[u];r[u]=d}}}}}}}function Eu(t,e){return Zr(t)?t!==e:t!=null&&isFinite(t)}var er=Le(),Nu=["percent","easing","shape","style","extra"];function Ru(t){t.stopAnimation("keyframe"),t.attr(er(t))}function ya(t,e,a){if(!(!a.isAnimationEnabled()||!e)){if(G(e)){T(e,function(s){ya(t,s,a)});return}var n=e.keyframes,o=e.duration;if(a&&o==null){var r=To("enter",a,0);o=r&&r.duration}if(!(!n||!o)){var i=er(t);T(Ct,function(s){if(!(s&&!t[s])){var l;n.sort(function(c,u){return c.percent-u.percent}),T(n,function(c){var u=t.animators,d=s?c[s]:c;if(d){var p=Ye(d);if(s||(p=Lt(p,function(y){return ge(Nu,y)<0})),!!p.length){l||(l=t.animate(s,e.loop,!0),l.scope="keyframe");for(var h=0;h<u.length;h++)u[h]!==l&&u[h].targetName===l.targetName&&u[h].stopTracks(p);s&&(i[s]=i[s]||{});var f=s?i[s]:i;T(p,function(y){f[y]=((s?t[s]:t)||{})[y]}),l.whenWithKeys(o*c.percent,d,p,c.easing)}}}),l&&l.delay(e.delay||0).duration(o).start(e.easing)}})}}}var zu=function(t){R(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.init=function(a,n,o){var r=Hr(a);t.prototype.init.apply(this,arguments),Mn(a,r)},e.prototype.mergeOption=function(a){t.prototype.mergeOption.apply(this,arguments),Mn(this.option,a)},e.prototype.getCellSize=function(){return this.option.cellSize},e.type="calendar",e.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},e}(pt);function Mn(t,e){var a=t.cellSize,n;G(a)?n=a:n=t.cellSize=[a,a],n.length===1&&(n[1]=n[0]);var o=Z([0,1],function(r){return Yr(e,r)&&(n[r]="auto"),n[r]!=null&&n[r]!=="auto"});Po(t,e,{type:"box",ignoreSize:o})}var $u=function(t){R(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.render=function(a,n,o){var r=this.group;r.removeAll();var i=a.coordinateSystem,s=i.getRangeInfo(),l=i.getOrient(),c=n.getLocaleModel();this._renderDayRect(a,s,r),this._renderLines(a,s,l,r),this._renderYearText(a,s,l,r),this._renderMonthText(a,c,l,r),this._renderWeekText(a,c,s,l,r)},e.prototype._renderDayRect=function(a,n,o){for(var r=a.coordinateSystem,i=a.getModel("itemStyle").getItemStyle(),s=r.getCellWidth(),l=r.getCellHeight(),c=n.start.time;c<=n.end.time;c=r.getNextNDay(c,1).time){var u=r.dataToRect([c],!1).tl,d=new ca({shape:{x:u[0],y:u[1],width:s,height:l},cursor:"default",style:i});o.add(d)}},e.prototype._renderLines=function(a,n,o,r){var i=this,s=a.coordinateSystem,l=a.getModel(["splitLine","lineStyle"]).getLineStyle(),c=a.get(["splitLine","show"]),u=l.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var d=n.start,p=0;d.time<=n.end.time;p++){f(d.formatedDate),p===0&&(d=s.getDateInfo(n.start.y+"-"+n.start.m));var h=d.date;h.setMonth(h.getMonth()+1),d=s.getDateInfo(h)}f(s.getNextNDay(n.end.time,1).formatedDate);function f(y){i._firstDayOfMonth.push(s.getDateInfo(y)),i._firstDayPoints.push(s.dataToRect([y],!1).tl);var g=i._getLinePointsOfOneWeek(a,y,o);i._tlpoints.push(g[0]),i._blpoints.push(g[g.length-1]),c&&i._drawSplitline(g,l,r)}c&&this._drawSplitline(i._getEdgesPoints(i._tlpoints,u,o),l,r),c&&this._drawSplitline(i._getEdgesPoints(i._blpoints,u,o),l,r)},e.prototype._getEdgesPoints=function(a,n,o){var r=[a[0].slice(),a[a.length-1].slice()],i=o==="horizontal"?0:1;return r[0][i]=r[0][i]-n/2,r[1][i]=r[1][i]+n/2,r},e.prototype._drawSplitline=function(a,n,o){var r=new So({z2:20,shape:{points:a},style:n});o.add(r)},e.prototype._getLinePointsOfOneWeek=function(a,n,o){for(var r=a.coordinateSystem,i=r.getDateInfo(n),s=[],l=0;l<7;l++){var c=r.getNextNDay(i.time,l),u=r.dataToRect([c.time],!1);s[2*c.day]=u.tl,s[2*c.day+1]=u[o==="horizontal"?"bl":"tr"]}return s},e.prototype._formatterLabel=function(a,n){return Pe(a)&&a?Kr(a,n):it(a)?a(n):n.nameMap},e.prototype._yearTextPositionControl=function(a,n,o,r,i){var s=n[0],l=n[1],c=["center","bottom"];r==="bottom"?(l+=i,c=["center","top"]):r==="left"?s-=i:r==="right"?(s+=i,c=["center","top"]):l-=i;var u=0;return(r==="left"||r==="right")&&(u=Math.PI/2),{rotation:u,x:s,y:l,style:{align:c[0],verticalAlign:c[1]}}},e.prototype._renderYearText=function(a,n,o,r){var i=a.getModel("yearLabel");if(i.get("show")){var s=i.get("margin"),l=i.get("position");l||(l=o!=="horizontal"?"top":"left");var c=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],u=(c[0][0]+c[1][0])/2,d=(c[0][1]+c[1][1])/2,p=o==="horizontal"?0:1,h={top:[u,c[p][1]],bottom:[u,c[1-p][1]],left:[c[1-p][0],d],right:[c[p][0],d]},f=n.start.y;+n.end.y>+n.start.y&&(f=f+"-"+n.end.y);var y=i.get("formatter"),g={start:n.start.y,end:n.end.y,nameMap:f},b=this._formatterLabel(y,g),m=new Ce({z2:30,style:Fe(i,{text:b})});m.attr(this._yearTextPositionControl(m,h[l],o,l,s)),r.add(m)}},e.prototype._monthTextPositionControl=function(a,n,o,r,i){var s="left",l="top",c=a[0],u=a[1];return o==="horizontal"?(u=u+i,n&&(s="center"),r==="start"&&(l="bottom")):(c=c+i,n&&(l="middle"),r==="start"&&(s="right")),{x:c,y:u,align:s,verticalAlign:l}},e.prototype._renderMonthText=function(a,n,o,r){var i=a.getModel("monthLabel");if(i.get("show")){var s=i.get("nameMap"),l=i.get("margin"),c=i.get("position"),u=i.get("align"),d=[this._tlpoints,this._blpoints];(!s||Pe(s))&&(s&&(n=nn(s)||n),s=n.get(["time","monthAbbr"])||[]);var p=c==="start"?0:1,h=o==="horizontal"?0:1;l=c==="start"?-l:l;for(var f=u==="center",y=0;y<d[p].length-1;y++){var g=d[p][y].slice(),b=this._firstDayOfMonth[y];if(f){var m=this._firstDayPoints[y];g[h]=(m[h]+d[0][y+1][h])/2}var x=i.get("formatter"),v=s[+b.m-1],C={yyyy:b.y,yy:(b.y+"").slice(2),MM:b.m,M:+b.m,nameMap:v},_=this._formatterLabel(x,C),w=new Ce({z2:30,style:J(Fe(i,{text:_}),this._monthTextPositionControl(g,f,o,c,l))});r.add(w)}}},e.prototype._weekTextPositionControl=function(a,n,o,r,i){var s="center",l="middle",c=a[0],u=a[1],d=o==="start";return n==="horizontal"?(c=c+r+(d?1:-1)*i[0]/2,s=d?"right":"left"):(u=u+r+(d?1:-1)*i[1]/2,l=d?"bottom":"top"),{x:c,y:u,align:s,verticalAlign:l}},e.prototype._renderWeekText=function(a,n,o,r,i){var s=a.getModel("dayLabel");if(s.get("show")){var l=a.coordinateSystem,c=s.get("position"),u=s.get("nameMap"),d=s.get("margin"),p=l.getFirstDayOfWeek();if(!u||Pe(u)){u&&(n=nn(u)||n);var h=n.get(["time","dayOfWeekShort"]);u=h||Z(n.get(["time","dayOfWeekAbbr"]),function(C){return C[0]})}var f=l.getNextNDay(o.end.time,7-o.lweek).time,y=[l.getCellWidth(),l.getCellHeight()];d=Te(d,Math.min(y[1],y[0])),c==="start"&&(f=l.getNextNDay(o.start.time,-(7+o.fweek)).time,d=-d);for(var g=0;g<7;g++){var b=l.getNextNDay(f,g),m=l.dataToRect([b.time],!1).center,x=g;x=Math.abs((g+p)%7);var v=new Ce({z2:30,style:J(Fe(s,{text:u[x]}),this._weekTextPositionControl(m,r,c,d,y))});i.add(v)}}},e.type="calendar",e}(ft),Kt=864e5,Fu=function(){function t(e,a,n){this.type="calendar",this.dimensions=t.dimensions,this.getDimensionsInfo=t.getDimensionsInfo,this._model=e}return t.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},t.prototype.getRangeInfo=function(){return this._rangeInfo},t.prototype.getModel=function(){return this._model},t.prototype.getRect=function(){return this._rect},t.prototype.getCellWidth=function(){return this._sw},t.prototype.getCellHeight=function(){return this._sh},t.prototype.getOrient=function(){return this._orient},t.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},t.prototype.getDateInfo=function(e){e=qr(e);var a=e.getFullYear(),n=e.getMonth()+1,o=n<10?"0"+n:""+n,r=e.getDate(),i=r<10?"0"+r:""+r,s=e.getDay();return s=Math.abs((s+7-this.getFirstDayOfWeek())%7),{y:a+"",m:o,d:i,day:s,time:e.getTime(),formatedDate:a+"-"+o+"-"+i,date:e}},t.prototype.getNextNDay=function(e,a){return a=a||0,a===0?this.getDateInfo(e):(e=new Date(this.getDateInfo(e).time),e.setDate(e.getDate()+a),this.getDateInfo(e))},t.prototype.update=function(e,a){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var n=this._rangeInfo.weeks||1,o=["width","height"],r=this._model.getCellSize().slice(),i=this._model.getBoxLayoutParams(),s=this._orient==="horizontal"?[n,7]:[7,n];T([0,1],function(d){u(r,d)&&(i[o[d]]=r[d]*s[d])});var l={width:a.getWidth(),height:a.getHeight()},c=this._rect=Do(i,l);T([0,1],function(d){u(r,d)||(r[d]=c[o[d]]/s[d])});function u(d,p){return d[p]!=null&&d[p]!=="auto"}this._sw=r[0],this._sh=r[1]},t.prototype.dataToPoint=function(e,a){G(e)&&(e=e[0]),a==null&&(a=!0);var n=this.getDateInfo(e),o=this._rangeInfo,r=n.formatedDate;if(a&&!(n.time>=o.start.time&&n.time<o.end.time+Kt))return[NaN,NaN];var i=n.day,s=this._getRangeInfo([o.start.time,r]).nthWeek;return this._orient==="vertical"?[this._rect.x+i*this._sw+this._sw/2,this._rect.y+s*this._sh+this._sh/2]:[this._rect.x+s*this._sw+this._sw/2,this._rect.y+i*this._sh+this._sh/2]},t.prototype.pointToData=function(e){var a=this.pointToDate(e);return a&&a.time},t.prototype.dataToRect=function(e,a){var n=this.dataToPoint(e,a);return{contentShape:{x:n[0]-(this._sw-this._lineWidth)/2,y:n[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:n,tl:[n[0]-this._sw/2,n[1]-this._sh/2],tr:[n[0]+this._sw/2,n[1]-this._sh/2],br:[n[0]+this._sw/2,n[1]+this._sh/2],bl:[n[0]-this._sw/2,n[1]+this._sh/2]}},t.prototype.pointToDate=function(e){var a=Math.floor((e[0]-this._rect.x)/this._sw)+1,n=Math.floor((e[1]-this._rect.y)/this._sh)+1,o=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(n,a-1,o):this._getDateByWeeksAndDay(a,n-1,o)},t.prototype.convertToPixel=function(e,a,n){var o=Bn(a);return o===this?o.dataToPoint(n):null},t.prototype.convertFromPixel=function(e,a,n){var o=Bn(a);return o===this?o.pointToData(n):null},t.prototype.containPoint=function(e){return console.warn("Not implemented."),!1},t.prototype._initRangeOption=function(){var e=this._model.get("range"),a;if(G(e)&&e.length===1&&(e=e[0]),G(e))a=e;else{var n=e.toString();if(/^\d{4}$/.test(n)&&(a=[n+"-01-01",n+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(n)){var o=this.getDateInfo(n),r=o.date;r.setMonth(r.getMonth()+1);var i=this.getNextNDay(r,-1);a=[o.formatedDate,i.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(n)&&(a=[n,n])}if(!a)return e;var s=this._getRangeInfo(a);return s.start.time>s.end.time&&a.reverse(),a},t.prototype._getRangeInfo=function(e){var a=[this.getDateInfo(e[0]),this.getDateInfo(e[1])],n;a[0].time>a[1].time&&(n=!0,a.reverse());var o=Math.floor(a[1].time/Kt)-Math.floor(a[0].time/Kt)+1,r=new Date(a[0].time),i=r.getDate(),s=a[1].date.getDate();r.setDate(i+o-1);var l=r.getDate();if(l!==s)for(var c=r.getTime()-a[1].time>0?1:-1;(l=r.getDate())!==s&&(r.getTime()-a[1].time)*c>0;)o-=c,r.setDate(l-c);var u=Math.floor((o+a[0].day+6)/7),d=n?-u+1:u-1;return n&&a.reverse(),{range:[a[0].formatedDate,a[1].formatedDate],start:a[0],end:a[1],allDay:o,weeks:u,nthWeek:d,fweek:a[0].day,lweek:a[1].day}},t.prototype._getDateByWeeksAndDay=function(e,a,n){var o=this._getRangeInfo(n);if(e>o.weeks||e===0&&a<o.fweek||e===o.weeks&&a>o.lweek)return null;var r=(e-1)*7-o.fweek+a,i=new Date(o.start.time);return i.setDate(+o.start.d+r),this.getDateInfo(i)},t.create=function(e,a){var n=[];return e.eachComponent("calendar",function(o){var r=new t(o);n.push(r),o.coordinateSystem=r}),e.eachSeries(function(o){o.get("coordinateSystem")==="calendar"&&(o.coordinateSystem=n[o.get("calendarIndex")||0])}),n},t.dimensions=["time","value"],t}();function Bn(t){var e=t.calendarModel,a=t.seriesModel,n=e?e.coordinateSystem:a?a.coordinateSystem:null;return n}function Uu(t){t.registerComponentModel(zu),t.registerComponentView($u),t.registerCoordinateSystem("calendar",Fu)}function Wu(t,e){var a=t.existing;if(e.id=t.keyInfo.id,!e.type&&a&&(e.type=a.type),e.parentId==null){var n=e.parentOption;n?e.parentId=n.id:a&&(e.parentId=a.parentId)}e.parentOption=null}function Vn(t,e){var a;return T(e,function(n){t[n]!=null&&t[n]!=="auto"&&(a=!0)}),a}function Gu(t,e,a){var n=J({},a),o=t[e],r=a.$action||"merge";r==="merge"?o?(me(o,n,!0),Po(o,n,{ignoreSize:!0}),Jr(a,o),ht(a,o),ht(a,o,"shape"),ht(a,o,"style"),ht(a,o,"extra"),a.clipPath=o.clipPath):t[e]=n:r==="replace"?t[e]=n:r==="remove"&&o&&(t[e]=null)}var tr=["transition","enterFrom","leaveTo"],ju=tr.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function ht(t,e,a){if(a&&(!t[a]&&e[a]&&(t[a]={}),t=t[a],e=e[a]),!(!t||!e))for(var n=a?tr:ju,o=0;o<n.length;o++){var r=n[o];t[r]==null&&e[r]!=null&&(t[r]=e[r])}}function Zu(t,e){if(t&&(t.hv=e.hv=[Vn(e,["left","right"]),Vn(e,["top","bottom"])],t.type==="group")){var a=t,n=e;a.width==null&&(a.width=n.width=0),a.height==null&&(a.height=n.height=0)}}var Hu=function(t){R(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a.preventAutoZ=!0,a}return e.prototype.mergeOption=function(a,n){var o=this.option.elements;this.option.elements=null,t.prototype.mergeOption.call(this,a,n),this.option.elements=o},e.prototype.optionUpdated=function(a,n){var o=this.option,r=(n?o:a).elements,i=o.elements=n?[]:o.elements,s=[];this._flatten(r,s,null);var l=Xr(i,s,"normalMerge"),c=this._elOptionsToUpdate=[];T(l,function(u,d){var p=u.newOption;p&&(c.push(p),Wu(u,p),Gu(i,d,p),Zu(i[d],p))},this),o.elements=Lt(i,function(u){return u&&delete u.$action,u!=null})},e.prototype._flatten=function(a,n,o){T(a,function(r){if(r){o&&(r.parentOption=o),n.push(r);var i=r.children;i&&i.length&&this._flatten(i,n,r),delete r.children}},this)},e.prototype.useElOptionsToUpdate=function(){var a=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,a},e.type="graphic",e.defaultOption={elements:[]},e}(pt),En={path:null,compoundPath:null,group:De,image:ai,text:Ce},le=Le(),Yu=function(t){R(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.init=function(){this._elMap=St()},e.prototype.render=function(a,n,o){a!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=a,this._updateElements(a),this._relocate(a,o)},e.prototype._updateElements=function(a){var n=a.useElOptionsToUpdate();if(n){var o=this._elMap,r=this.group,i=a.get("z"),s=a.get("zlevel");T(n,function(l){var c=at(l.id,null),u=c!=null?o.get(c):null,d=at(l.parentId,null),p=d!=null?o.get(d):r,h=l.type,f=l.style;h==="text"&&f&&l.hv&&l.hv[1]&&(f.textVerticalAlign=f.textBaseline=f.verticalAlign=f.align=null);var y=l.textContent,g=l.textConfig;if(f&&Au(f,h,!!g,!!y)){var b=Tu(f,h);!g&&b.textConfig&&(g=l.textConfig=b.textConfig),!y&&b.textContent&&(y=b.textContent)}var m=Ku(l),x=l.$action||"merge",v=x==="merge",C=x==="replace";if(v){var _=!u,w=u;_?w=Nn(c,p,l.type,o):(w&&(le(w).isNew=!1),Ru(w)),w&&(Yt(w,m,a,{isInit:_}),Rn(w,l,i,s))}else if(C){xt(u,l,o,a);var P=Nn(c,p,l.type,o);P&&(Yt(P,m,a,{isInit:!0}),Rn(P,l,i,s))}else x==="remove"&&(Qo(u,l),xt(u,l,o,a));var A=o.get(c);if(A&&y)if(v){var L=A.getTextContent();L?L.attr(y):A.setTextContent(new Ce(y))}else C&&A.setTextContent(new Ce(y));if(A){var V=l.clipPath;if(V){var B=V.type,I=void 0,_=!1;if(v){var k=A.getClipPath();_=!k||le(k).type!==B,I=_?ba(B):k}else C&&(_=!0,I=ba(B));A.setClipPath(I),Yt(I,V,a,{isInit:_}),ya(I,V.keyframeAnimation,a)}var Q=le(A);A.setTextConfig(g),Q.option=l,qu(A,a,l),Lo({el:A,componentModel:a,itemName:A.name,itemTooltipOption:l.tooltip}),ya(A,l.keyframeAnimation,a)}})}},e.prototype._relocate=function(a,n){for(var o=a.option.elements,r=this.group,i=this._elMap,s=n.getWidth(),l=n.getHeight(),c=["x","y"],u=0;u<o.length;u++){var d=o[u],p=at(d.id,null),h=p!=null?i.get(p):null;if(!(!h||!h.isGroup)){var f=h.parent,y=f===r,g=le(h),b=le(f);g.width=Te(g.option.width,y?s:b.width)||0,g.height=Te(g.option.height,y?l:b.height)||0}}for(var u=o.length-1;u>=0;u--){var d=o[u],p=at(d.id,null),h=p!=null?i.get(p):null;if(h){var f=h.parent,b=le(f),m=f===r?{width:s,height:l}:{width:b.width,height:b.height},x={},v=Qr(h,d,m,null,{hv:d.hv,boundingMode:d.bounding},x);if(!le(h).isNew&&v){for(var C=d.transition,_={},w=0;w<c.length;w++){var P=c[w],A=x[P];C&&(Be(C)||ge(C,P)>=0)?_[P]=A:h[P]=A}La(h,_,a,0)}else h.attr(x)}}},e.prototype._clear=function(){var a=this,n=this._elMap;n.each(function(o){xt(o,le(o).option,n,a._lastGraphicModel)}),this._elMap=St()},e.prototype.dispose=function(){this._clear()},e.type="graphic",e}(ft);function ba(t){var e=E(En,t)?En[t]:ei(t),a=new e({});return le(a).type=t,a}function Nn(t,e,a,n){var o=ba(a);return e.add(o),n.set(t,o),le(o).id=t,le(o).isNew=!0,o}function xt(t,e,a,n){var o=t&&t.parent;o&&(t.type==="group"&&t.traverse(function(r){xt(r,e,a,n)}),Pu(t,e,n),a.removeKey(le(t).id))}function Rn(t,e,a,n){t.isGroup||T([["cursor",Ao.prototype.cursor],["zlevel",n||0],["z",a||0],["z2",0]],function(o){var r=o[0];E(e,r)?t[r]=Ae(e[r],o[1]):t[r]==null&&(t[r]=o[1])}),T(Ye(e),function(o){if(o.indexOf("on")===0){var r=e[o];t[o]=it(r)?r:null}}),E(e,"draggable")&&(t.draggable=e.draggable),e.name!=null&&(t.name=e.name),e.id!=null&&(t.id=e.id)}function Ku(t){return t=J({},t),T(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(ti),function(e){delete t[e]}),t}function qu(t,e,a){var n=Ue(t).eventData;!t.silent&&!t.ignore&&!n&&(n=Ue(t).eventData={componentType:"graphic",componentIndex:e.componentIndex,name:t.name}),n&&(n.info=a.info)}function Xu(t){t.registerComponentModel(Hu),t.registerComponentView(Yu),t.registerPreprocessor(function(e){var a=e.graphic;G(a)?!a[0]||!a[0].elements?e.graphic=[{elements:a}]:e.graphic=[e.graphic[0]]:a&&!a.elements&&(e.graphic=[{elements:[a]}])})}var Ju=function(t){R(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.type="dataZoom.select",e}(ji),Qu=function(t){R(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.type="dataZoom.select",e}(Zi);function ec(t){t.registerComponentModel(Ju),t.registerComponentView(Qu),Hi(t)}var ve=function(){function t(){}return t}(),ar={};function et(t,e){ar[t]=e}function nr(t){return ar[t]}var tc=function(t){R(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.optionUpdated=function(){t.prototype.optionUpdated.apply(this,arguments);var a=this.ecModel;T(this.option.feature,function(n,o){var r=nr(o);r&&(r.getDefaultOption&&(r.defaultOption=r.getDefaultOption(a)),me(n,r.defaultOption))})},e.type="toolbox",e.layoutMode={type:"box",ignoreSize:!0},e.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},e}(pt),ac=function(t){R(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(a,n,o,r){var i=this.group;if(i.removeAll(),!a.get("show"))return;var s=+a.get("itemSize"),l=a.get("orient")==="vertical",c=a.get("feature")||{},u=this._features||(this._features={}),d=[];T(c,function(f,y){d.push(y)}),new xo(this._featureNames||[],d).add(p).update(p).remove(H(p,null)).execute(),this._featureNames=d;function p(f,y){var g=d[f],b=d[y],m=c[g],x=new ni(m,a,a.ecModel),v;if(r&&r.newTitle!=null&&r.featureName===g&&(m.title=r.newTitle),g&&!b){if(nc(g))v={onclick:x.option.onclick,featureName:g};else{var C=nr(g);if(!C)return;v=new C}u[g]=v}else if(v=u[b],!v)return;v.uid=oi("toolbox-feature"),v.model=x,v.ecModel=n,v.api=o;var _=v instanceof ve;if(!g&&b){_&&v.dispose&&v.dispose(n,o);return}if(!x.get("show")||_&&v.unusable){_&&v.remove&&v.remove(n,o);return}h(x,v,g),x.setIconStatus=function(w,P){var A=this.option,L=this.iconPaths;A.iconStatus=A.iconStatus||{},A.iconStatus[w]=P,L[w]&&(P==="emphasis"?la:ua)(L[w])},v instanceof ve&&v.render&&v.render(x,n,o,r)}function h(f,y,g){var b=f.getModel("iconStyle"),m=f.getModel(["emphasis","iconStyle"]),x=y instanceof ve&&y.getIcons?y.getIcons():f.get("icon"),v=f.get("title")||{},C,_;Pe(x)?(C={},C[g]=x):C=x,Pe(v)?(_={},_[g]=v):_=v;var w=f.iconPaths={};T(C,function(P,A){var L=Io(P,{},{x:-s/2,y:-s/2,width:s,height:s});L.setStyle(b.getItemStyle());var V=L.ensureState("emphasis");V.style=m.getItemStyle();var B=new Ce({style:{text:_[A],align:m.get("textAlign"),borderRadius:m.get("textBorderRadius"),padding:m.get("textPadding"),fill:null,font:ri({fontStyle:m.get("textFontStyle"),fontFamily:m.get("textFontFamily"),fontSize:m.get("textFontSize"),fontWeight:m.get("textFontWeight")},n)},ignore:!0});L.setTextContent(B),Lo({el:L,componentModel:a,itemName:A,formatterParamsExtra:{title:_[A]}}),L.__title=_[A],L.on("mouseover",function(){var I=m.getItemStyle(),k=l?a.get("right")==null&&a.get("left")!=="right"?"right":"left":a.get("bottom")==null&&a.get("top")!=="bottom"?"bottom":"top";B.setStyle({fill:m.get("textFill")||I.fill||I.stroke||"#000",backgroundColor:m.get("textBackgroundColor")}),L.setTextConfig({position:m.get("textPosition")||k}),B.ignore=!a.get("showTitle"),o.enterEmphasis(this)}).on("mouseout",function(){f.get(["iconStatus",A])!=="emphasis"&&o.leaveEmphasis(this),B.hide()}),(f.get(["iconStatus",A])==="emphasis"?la:ua)(L),i.add(L),L.on("click",he(y.onclick,y,n,o,A)),w[A]=L})}ii(i,a,o),i.add(si(i.getBoundingRect(),a)),l||i.eachChild(function(f){var y=f.__title,g=f.ensureState("emphasis"),b=g.textConfig||(g.textConfig={}),m=f.getTextContent(),x=m&&m.ensureState("emphasis");if(x&&!it(x)&&y){var v=x.style||(x.style={}),C=li(y,Ce.makeFont(v)),_=f.x+i.x,w=f.y+i.y+s,P=!1;w+C.height>o.getHeight()&&(b.position="top",P=!0);var A=P?-5-C.height:s+10;_+C.width/2>o.getWidth()?(b.position=["100%",A],v.align="right"):_-C.width/2<0&&(b.position=[0,A],v.align="left")}})},e.prototype.updateView=function(a,n,o,r){T(this._features,function(i){i instanceof ve&&i.updateView&&i.updateView(i.model,n,o,r)})},e.prototype.remove=function(a,n){T(this._features,function(o){o instanceof ve&&o.remove&&o.remove(a,n)}),this.group.removeAll()},e.prototype.dispose=function(a,n){T(this._features,function(o){o instanceof ve&&o.dispose&&o.dispose(a,n)})},e.type="toolbox",e}(ft);function nc(t){return t.indexOf("my")===0}var oc=function(t){R(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.onclick=function(a,n){var o=this.model,r=o.get("name")||a.get("title.0.text")||"echarts",i=n.getZr().painter.getType()==="svg",s=i?"svg":o.get("type",!0)||"png",l=n.getConnectedDataURL({type:s,backgroundColor:o.get("backgroundColor",!0)||a.get("backgroundColor")||"#fff",connectedBackgroundColor:o.get("connectedBackgroundColor"),excludeComponents:o.get("excludeComponents"),pixelRatio:o.get("pixelRatio")}),c=ko.browser;if(typeof MouseEvent=="function"&&(c.newEdge||!c.ie&&!c.edge)){var u=document.createElement("a");u.download=r+"."+s,u.target="_blank",u.href=l;var d=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});u.dispatchEvent(d)}else if(window.navigator.msSaveOrOpenBlob||i){var p=l.split(","),h=p[0].indexOf("base64")>-1,f=i?decodeURIComponent(p[1]):p[1];h&&(f=window.atob(f));var y=r+"."+s;if(window.navigator.msSaveOrOpenBlob){for(var g=f.length,b=new Uint8Array(g);g--;)b[g]=f.charCodeAt(g);var m=new Blob([b]);window.navigator.msSaveOrOpenBlob(m,y)}else{var x=document.createElement("iframe");document.body.appendChild(x);var v=x.contentWindow,C=v.document;C.open("image/svg+xml","replace"),C.write(f),C.close(),v.focus(),C.execCommand("SaveAs",!0,y),document.body.removeChild(x)}}else{var _=o.get("lang"),w='<body style="margin:0;"><img src="'+l+'" style="max-width:100%;" title="'+(_&&_[0]||"")+'" /></body>',P=window.open();P.document.write(w),P.document.title=r}},e.getDefaultOption=function(a){var n={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:a.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:a.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return n},e}(ve),zn="__ec_magicType_stack__",rc=[["line","bar"],["stack"]],ic=function(t){R(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getIcons=function(){var a=this.model,n=a.get("icon"),o={};return T(a.get("type"),function(r){n[r]&&(o[r]=n[r])}),o},e.getDefaultOption=function(a){var n={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:a.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return n},e.prototype.onclick=function(a,n,o){var r=this.model,i=r.get(["seriesIndex",o]);if($n[o]){var s={series:[]},l=function(d){var p=d.subType,h=d.id,f=$n[o](p,h,d,r);f&&(He(f,d.option),s.series.push(f));var y=d.coordinateSystem;if(y&&y.type==="cartesian2d"&&(o==="line"||o==="bar")){var g=y.getAxesByScale("ordinal")[0];if(g){var b=g.dim,m=b+"Axis",x=d.getReferringComponents(m,ui).models[0],v=x.componentIndex;s[m]=s[m]||[];for(var C=0;C<=v;C++)s[m][v]=s[m][v]||{};s[m][v].boundaryGap=o==="bar"}}};T(rc,function(d){ge(d,o)>=0&&T(d,function(p){r.setIconStatus(p,"normal")})}),r.setIconStatus(o,"emphasis"),a.eachComponent({mainType:"series",query:i==null?null:{seriesIndex:i}},l);var c,u=o;o==="stack"&&(c=me({stack:r.option.title.tiled,tiled:r.option.title.stack},r.option.title),r.get(["iconStatus",o])!=="emphasis"&&(u="tiled")),n.dispatchAction({type:"changeMagicType",currentType:u,newOption:s,newTitle:c,featureName:"magicType"})}},e}(ve),$n={line:function(t,e,a,n){if(t==="bar")return me({id:e,type:"line",data:a.get("data"),stack:a.get("stack"),markPoint:a.get("markPoint"),markLine:a.get("markLine")},n.get(["option","line"])||{},!0)},bar:function(t,e,a,n){if(t==="line")return me({id:e,type:"bar",data:a.get("data"),stack:a.get("stack"),markPoint:a.get("markPoint"),markLine:a.get("markLine")},n.get(["option","bar"])||{},!0)},stack:function(t,e,a,n){var o=a.get("stack")===zn;if(t==="line"||t==="bar")return n.setIconStatus("stack",o?"normal":"emphasis"),me({id:e,stack:o?"":zn},n.get(["option","stack"])||{},!0)}};Ba({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(t,e){e.mergeOption(t.newOption)});var kt=new Array(60).join("-"),Ze="	";function sc(t){var e={},a=[],n=[];return t.eachRawSeries(function(o){var r=o.coordinateSystem;if(r&&(r.type==="cartesian2d"||r.type==="polar")){var i=r.getBaseAxis();if(i.type==="category"){var s=i.dim+"_"+i.index;e[s]||(e[s]={categoryAxis:i,valueAxis:r.getOtherAxis(i),series:[]},n.push({axisDim:i.dim,axisIndex:i.index})),e[s].series.push(o)}else a.push(o)}else a.push(o)}),{seriesGroupByCategoryAxis:e,other:a,meta:n}}function lc(t){var e=[];return T(t,function(a,n){var o=a.categoryAxis,r=a.valueAxis,i=r.dim,s=[" "].concat(Z(a.series,function(h){return h.name})),l=[o.model.getCategories()];T(a.series,function(h){var f=h.getRawData();l.push(h.getRawData().mapArray(f.mapDimension(i),function(y){return y}))});for(var c=[s.join(Ze)],u=0;u<l[0].length;u++){for(var d=[],p=0;p<l.length;p++)d.push(l[p][u]);c.push(d.join(Ze))}e.push(c.join(`
`))}),e.join(`

`+kt+`

`)}function uc(t){return Z(t,function(e){var a=e.getRawData(),n=[e.name],o=[];return a.each(a.dimensions,function(){for(var r=arguments.length,i=arguments[r-1],s=a.getName(i),l=0;l<r-1;l++)o[l]=arguments[l];n.push((s?s+Ze:"")+o.join(Ze))}),n.join(`
`)}).join(`

`+kt+`

`)}function cc(t){var e=sc(t);return{value:Lt([lc(e.seriesGroupByCategoryAxis),uc(e.other)],function(a){return!!a.replace(/[\n\t\s]/g,"")}).join(`

`+kt+`

`),meta:e.meta}}function wt(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function dc(t){var e=t.slice(0,t.indexOf(`
`));if(e.indexOf(Ze)>=0)return!0}var _a=new RegExp("["+Ze+"]+","g");function pc(t){for(var e=t.split(/\n+/g),a=wt(e.shift()).split(_a),n=[],o=Z(a,function(l){return{name:l,data:[]}}),r=0;r<e.length;r++){var i=wt(e[r]).split(_a);n.push(i.shift());for(var s=0;s<i.length;s++)o[s]&&(o[s].data[r]=i[s])}return{series:o,categories:n}}function fc(t){for(var e=t.split(/\n+/g),a=wt(e.shift()),n=[],o=0;o<e.length;o++){var r=wt(e[o]);if(r){var i=r.split(_a),s="",l=void 0,c=!1;isNaN(i[0])?(c=!0,s=i[0],i=i.slice(1),n[o]={name:s,value:[]},l=n[o].value):l=n[o]=[];for(var u=0;u<i.length;u++)l.push(+i[u]);l.length===1&&(c?n[o].value=l[0]:n[o]=l[0])}}return{name:a,data:n}}function hc(t,e){var a=t.split(new RegExp(`
*`+kt+`
*`,"g")),n={series:[]};return T(a,function(o,r){if(dc(o)){var i=pc(o),s=e[r],l=s.axisDim+"Axis";s&&(n[l]=n[l]||[],n[l][s.axisIndex]={data:i.categories},n.series=n.series.concat(i.series))}else{var i=fc(o);n.series.push(i)}}),n}var vc=function(t){R(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.onclick=function(a,n){setTimeout(function(){n.dispatchAction({type:"hideTip"})});var o=n.getDom(),r=this.model;this._dom&&o.removeChild(this._dom);var i=document.createElement("div");i.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",i.style.backgroundColor=r.get("backgroundColor")||"#fff";var s=document.createElement("h4"),l=r.get("lang")||[];s.innerHTML=l[0]||r.get("title"),s.style.cssText="margin:10px 20px",s.style.color=r.get("textColor");var c=document.createElement("div"),u=document.createElement("textarea");c.style.cssText="overflow:auto";var d=r.get("optionToContent"),p=r.get("contentToOption"),h=cc(a);if(it(d)){var f=d(n.getOption());Pe(f)?c.innerHTML=f:ci(f)&&c.appendChild(f)}else{u.readOnly=r.get("readOnly");var y=u.style;y.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",y.color=r.get("textColor"),y.borderColor=r.get("textareaBorderColor"),y.backgroundColor=r.get("textareaColor"),u.value=h.value,c.appendChild(u)}var g=h.meta,b=document.createElement("div");b.style.cssText="position:absolute;bottom:5px;left:0;right:0";var m="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",x=document.createElement("div"),v=document.createElement("div");m+=";background-color:"+r.get("buttonColor"),m+=";color:"+r.get("buttonTextColor");var C=this;function _(){o.removeChild(i),C._dom=null}on(x,"click",_),on(v,"click",function(){if(p==null&&d!=null||p!=null&&d==null){_();return}var w;try{it(p)?w=p(c,n.getOption()):w=hc(u.value,g)}catch(P){throw _(),new Error("Data view format error "+P)}w&&n.dispatchAction({type:"changeDataView",newOption:w}),_()}),x.innerHTML=l[1],v.innerHTML=l[2],v.style.cssText=x.style.cssText=m,!r.get("readOnly")&&b.appendChild(v),b.appendChild(x),i.appendChild(s),i.appendChild(c),i.appendChild(b),c.style.height=o.clientHeight-80+"px",o.appendChild(i),this._dom=i},e.prototype.remove=function(a,n){this._dom&&n.getDom().removeChild(this._dom)},e.prototype.dispose=function(a,n){this.remove(a,n)},e.getDefaultOption=function(a){var n={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:a.getLocaleModel().get(["toolbox","dataView","title"]),lang:a.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return n},e}(ve);function mc(t,e){return Z(t,function(a,n){var o=e&&e[n];if(ot(o)&&!G(o)){var r=ot(a)&&!G(a);r||(a={value:a});var i=o.name!=null&&a.name==null;return a=He(a,o),i&&delete a.name,a}else return a})}Ba({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(t,e){var a=[];T(t.newOption.series,function(n){var o=e.getSeriesByName(n.name)[0];if(!o)a.push(J({type:"scatter"},n));else{var r=o.get("data");a.push({name:n.name,data:mc(n.data,r)})}}),e.mergeOption(He({series:a},t.newOption))});var or=T,rr=Le();function gc(t,e){var a=ja(t);or(e,function(n,o){for(var r=a.length-1;r>=0;r--){var i=a[r];if(i[o])break}if(r<0){var s=t.queryComponents({mainType:"dataZoom",subType:"select",id:o})[0];if(s){var l=s.getPercentRange();a[0][o]={dataZoomId:o,start:l[0],end:l[1]}}}}),a.push(e)}function yc(t){var e=ja(t),a=e[e.length-1];e.length>1&&e.pop();var n={};return or(a,function(o,r){for(var i=e.length-1;i>=0;i--)if(o=e[i][r],o){n[r]=o;break}}),n}function bc(t){rr(t).snapshots=null}function _c(t){return ja(t).length}function ja(t){var e=rr(t);return e.snapshots||(e.snapshots=[{}]),e.snapshots}var xc=function(t){R(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.onclick=function(a,n){bc(a),n.dispatchAction({type:"restore",from:this.uid})},e.getDefaultOption=function(a){var n={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:a.getLocaleModel().get(["toolbox","restore","title"])};return n},e}(ve);Ba({type:"restore",event:"restore",update:"prepareAndUpdate"},function(t,e){e.resetOption("recreate")});var Sc=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],ir=function(){function t(e,a,n){var o=this;this._targetInfoList=[];var r=Fn(a,e);T(Cc,function(i,s){(!n||!n.include||ge(n.include,s)>=0)&&i(r,o._targetInfoList)})}return t.prototype.setOutputRanges=function(e,a){return this.matchOutputRanges(e,a,function(n,o,r){if((n.coordRanges||(n.coordRanges=[])).push(o),!n.coordRange){n.coordRange=o;var i=qt[n.brushType](0,r,o);n.__rangeOffset={offset:jn[n.brushType](i.values,n.range,[1,1]),xyMinMax:i.xyMinMax}}}),e},t.prototype.matchOutputRanges=function(e,a,n){T(e,function(o){var r=this.findTargetInfo(o,a);r&&r!==!0&&T(r.coordSyses,function(i){var s=qt[o.brushType](1,i,o.range,!0);n(o,s.values,i,a)})},this)},t.prototype.setInputRanges=function(e,a){T(e,function(n){var o=this.findTargetInfo(n,a);if(n.range=n.range||[],o&&o!==!0){n.panelId=o.panelId;var r=qt[n.brushType](0,o.coordSys,n.coordRange),i=n.__rangeOffset;n.range=i?jn[n.brushType](r.values,i.offset,wc(r.xyMinMax,i.xyMinMax)):r.values}},this)},t.prototype.makePanelOpts=function(e,a){return Z(this._targetInfoList,function(n){var o=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:a?a(n):null,clipPath:ru(o),isTargetByCursor:su(o,e,n.coordSysModel),getLinearBrushOtherExtent:iu(o)}})},t.prototype.controlSeries=function(e,a,n){var o=this.findTargetInfo(e,n);return o===!0||o&&ge(o.coordSyses,a.coordinateSystem)>=0},t.prototype.findTargetInfo=function(e,a){for(var n=this._targetInfoList,o=Fn(a,e),r=0;r<n.length;r++){var i=n[r],s=e.panelId;if(s){if(i.panelId===s)return i}else for(var l=0;l<Un.length;l++)if(Un[l](o,i))return i}return!0},t}();function xa(t){return t[0]>t[1]&&t.reverse(),t}function Fn(t,e){return Oo(t,e,{includeMainTypes:Sc})}var Cc={grid:function(t,e){var a=t.xAxisModels,n=t.yAxisModels,o=t.gridModels,r=St(),i={},s={};!a&&!n&&!o||(T(a,function(l){var c=l.axis.grid.model;r.set(c.id,c),i[c.id]=!0}),T(n,function(l){var c=l.axis.grid.model;r.set(c.id,c),s[c.id]=!0}),T(o,function(l){r.set(l.id,l),i[l.id]=!0,s[l.id]=!0}),r.each(function(l){var c=l.coordinateSystem,u=[];T(c.getCartesians(),function(d,p){(ge(a,d.getAxis("x").model)>=0||ge(n,d.getAxis("y").model)>=0)&&u.push(d)}),e.push({panelId:"grid--"+l.id,gridModel:l,coordSysModel:l,coordSys:u[0],coordSyses:u,getPanelRect:Wn.grid,xAxisDeclared:i[l.id],yAxisDeclared:s[l.id]})}))},geo:function(t,e){T(t.geoModels,function(a){var n=a.coordinateSystem;e.push({panelId:"geo--"+a.id,geoModel:a,coordSysModel:a,coordSys:n,coordSyses:[n],getPanelRect:Wn.geo})})}},Un=[function(t,e){var a=t.xAxisModel,n=t.yAxisModel,o=t.gridModel;return!o&&a&&(o=a.axis.grid.model),!o&&n&&(o=n.axis.grid.model),o&&o===e.gridModel},function(t,e){var a=t.geoModel;return a&&a===e.geoModel}],Wn={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var t=this.coordSys,e=t.getBoundingRect().clone();return e.applyTransform(Co(t)),e}},qt={lineX:H(Gn,0),lineY:H(Gn,1),rect:function(t,e,a,n){var o=t?e.pointToData([a[0][0],a[1][0]],n):e.dataToPoint([a[0][0],a[1][0]],n),r=t?e.pointToData([a[0][1],a[1][1]],n):e.dataToPoint([a[0][1],a[1][1]],n),i=[xa([o[0],r[0]]),xa([o[1],r[1]])];return{values:i,xyMinMax:i}},polygon:function(t,e,a,n){var o=[[1/0,-1/0],[1/0,-1/0]],r=Z(a,function(i){var s=t?e.pointToData(i,n):e.dataToPoint(i,n);return o[0][0]=Math.min(o[0][0],s[0]),o[1][0]=Math.min(o[1][0],s[1]),o[0][1]=Math.max(o[0][1],s[0]),o[1][1]=Math.max(o[1][1],s[1]),s});return{values:r,xyMinMax:o}}};function Gn(t,e,a,n){var o=a.getAxis(["x","y"][t]),r=xa(Z([0,1],function(s){return e?o.coordToData(o.toLocalCoord(n[s]),!0):o.toGlobalCoord(o.dataToCoord(n[s]))})),i=[];return i[t]=r,i[1-t]=[NaN,NaN],{values:r,xyMinMax:i}}var jn={lineX:H(Zn,0),lineY:H(Zn,1),rect:function(t,e,a){return[[t[0][0]-a[0]*e[0][0],t[0][1]-a[0]*e[0][1]],[t[1][0]-a[1]*e[1][0],t[1][1]-a[1]*e[1][1]]]},polygon:function(t,e,a){return Z(t,function(n,o){return[n[0]-a[0]*e[o][0],n[1]-a[1]*e[o][1]]})}};function Zn(t,e,a,n){return[e[0]-n[t]*a[0],e[1]-n[t]*a[1]]}function wc(t,e){var a=Hn(t),n=Hn(e),o=[a[0]/n[0],a[1]/n[1]];return isNaN(o[0])&&(o[0]=1),isNaN(o[1])&&(o[1]=1),o}function Hn(t){return t?[t[0][1]-t[0][0],t[1][1]-t[1][0]]:[NaN,NaN]}var Sa=T,Ac=pi("toolbox-dataZoom_"),Tc=function(t){R(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(a,n,o,r){this._brushController||(this._brushController=new ql(o.getZr()),this._brushController.on("brush",he(this._onBrush,this)).mount()),Lc(a,n,this,r,o),Dc(a,n)},e.prototype.onclick=function(a,n,o){Pc[o].call(this)},e.prototype.remove=function(a,n){this._brushController&&this._brushController.unmount()},e.prototype.dispose=function(a,n){this._brushController&&this._brushController.dispose()},e.prototype._onBrush=function(a){var n=a.areas;if(!a.isEnd||!n.length)return;var o={},r=this.ecModel;this._brushController.updateCovers([]);var i=new ir(Za(this.model),r,{include:["grid"]});i.matchOutputRanges(n,r,function(c,u,d){if(d.type==="cartesian2d"){var p=c.brushType;p==="rect"?(s("x",d,u[0]),s("y",d,u[1])):s({lineX:"x",lineY:"y"}[p],d,u)}}),gc(r,o),this._dispatchZoomAction(o);function s(c,u,d){var p=u.getAxis(c),h=p.model,f=l(c,h,r),y=f.findRepresentativeAxisProxy(h).getMinMaxSpan();(y.minValueSpan!=null||y.maxValueSpan!=null)&&(d=Yi(0,d.slice(),p.scale.getExtent(),0,y.minValueSpan,y.maxValueSpan)),f&&(o[f.id]={dataZoomId:f.id,startValue:d[0],endValue:d[1]})}function l(c,u,d){var p;return d.eachComponent({mainType:"dataZoom",subType:"select"},function(h){var f=h.getAxisModel(c,u.componentIndex);f&&(p=h)}),p}},e.prototype._dispatchZoomAction=function(a){var n=[];Sa(a,function(o,r){n.push(xe(o))}),n.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:n})},e.getDefaultOption=function(a){var n={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:a.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return n},e}(ve),Pc={zoom:function(){var t=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:t})},back:function(){this._dispatchZoomAction(yc(this.ecModel))}};function Za(t){var e={xAxisIndex:t.get("xAxisIndex",!0),yAxisIndex:t.get("yAxisIndex",!0),xAxisId:t.get("xAxisId",!0),yAxisId:t.get("yAxisId",!0)};return e.xAxisIndex==null&&e.xAxisId==null&&(e.xAxisIndex="all"),e.yAxisIndex==null&&e.yAxisId==null&&(e.yAxisIndex="all"),e}function Dc(t,e){t.setIconStatus("back",_c(e)>1?"emphasis":"normal")}function Lc(t,e,a,n,o){var r=a._isZoomActive;n&&n.type==="takeGlobalCursor"&&(r=n.key==="dataZoomSelect"?n.dataZoomSelectActive:!1),a._isZoomActive=r,t.setIconStatus("zoom",r?"emphasis":"normal");var i=new ir(Za(t),e,{include:["grid"]}),s=i.makePanelOpts(o,function(l){return l.xAxisDeclared&&!l.yAxisDeclared?"lineX":!l.xAxisDeclared&&l.yAxisDeclared?"lineY":"rect"});a._brushController.setPanels(s).enableBrush(r&&s.length?{brushType:"auto",brushStyle:t.getModel("brushStyle").getItemStyle()}:!1)}di("dataZoom",function(t){var e=t.getComponent("toolbox",0),a=["feature","dataZoom"];if(!e||e.get(a)==null)return;var n=e.getModel(a),o=[],r=Za(n),i=Oo(t,r);Sa(i.xAxisModels,function(l){return s(l,"xAxis","xAxisIndex")}),Sa(i.yAxisModels,function(l){return s(l,"yAxis","yAxisIndex")});function s(l,c,u){var d=l.componentIndex,p={type:"select",$fromToolbox:!0,filterMode:n.get("filterMode",!0)||"filter",id:Ac+c+d};p[u]=d,o.push(p)}return o});function Ic(t){t.registerComponentModel(tc),t.registerComponentView(ac),et("saveAsImage",oc),et("magicType",ic),et("dataView",vc),et("dataZoom",Tc),et("restore",xc),Da(ec)}var Yn=function(t){R(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a.layoutMode="box",a}return e.prototype.init=function(a,n,o){this.mergeDefaultAndTheme(a,o),this._initData()},e.prototype.mergeOption=function(a){t.prototype.mergeOption.apply(this,arguments),this._initData()},e.prototype.setCurrentIndex=function(a){a==null&&(a=this.option.currentIndex);var n=this._data.count();this.option.loop?a=(a%n+n)%n:(a>=n&&(a=n-1),a<0&&(a=0)),this.option.currentIndex=a},e.prototype.getCurrentIndex=function(){return this.option.currentIndex},e.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},e.prototype.setPlayState=function(a){this.option.autoPlay=!!a},e.prototype.getPlayState=function(){return!!this.option.autoPlay},e.prototype._initData=function(){var a=this.option,n=a.data||[],o=a.axisType,r=this._names=[],i;o==="category"?(i=[],T(n,function(c,u){var d=at(fi(c),""),p;ot(c)?(p=xe(c),p.value=u):p=u,i.push(p),r.push(d)})):i=n;var s={category:"ordinal",time:"time",value:"number"}[o]||"number",l=this._data=new _t([{name:"value",type:s}],this);l.initData(i,r)},e.prototype.getData=function(){return this._data},e.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},e.type="timeline",e.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},e}(pt),sr=function(t){R(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.type="timeline.slider",e.defaultOption=hi(Yn.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),e}(Yn);Oa(sr,Va.prototype);var kc=function(t){R(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.type="timeline",e}(ft),Oc=function(t){R(e,t);function e(a,n,o,r){var i=t.call(this,a,n,o)||this;return i.type=r||"value",i}return e.prototype.getLabelModel=function(){return this.model.getModel("label")},e.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},e}(Ki),Xt=Math.PI,Kn=Le(),Mc=function(t){R(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.init=function(a,n){this.api=n},e.prototype.render=function(a,n,o){if(this.model=a,this.api=o,this.ecModel=n,this.group.removeAll(),a.get("show",!0)){var r=this._layout(a,o),i=this._createGroup("_mainGroup"),s=this._createGroup("_labelGroup"),l=this._axis=this._createAxis(r,a);a.formatTooltip=function(c){var u=l.scale.getLabel({value:c});return da("nameValue",{noName:!0,value:u})},T(["AxisLine","AxisTick","Control","CurrentPointer"],function(c){this["_render"+c](r,i,l,a)},this),this._renderAxisLabel(r,s,l,a),this._position(r,a)}this._doPlayStop(),this._updateTicksStatus()},e.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},e.prototype.dispose=function(){this._clearTimer()},e.prototype._layout=function(a,n){var o=a.get(["label","position"]),r=a.get("orient"),i=Vc(a,n),s;o==null||o==="auto"?s=r==="horizontal"?i.y+i.height/2<n.getHeight()/2?"-":"+":i.x+i.width/2<n.getWidth()/2?"+":"-":Pe(o)?s={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[r][o]:s=o;var l={horizontal:"center",vertical:s>=0||s==="+"?"left":"right"},c={horizontal:s>=0||s==="+"?"top":"bottom",vertical:"middle"},u={horizontal:0,vertical:Xt/2},d=r==="vertical"?i.height:i.width,p=a.getModel("controlStyle"),h=p.get("show",!0),f=h?p.get("itemSize"):0,y=h?p.get("itemGap"):0,g=f+y,b=a.get(["label","rotate"])||0;b=b*Xt/180;var m,x,v,C=p.get("position",!0),_=h&&p.get("showPlayBtn",!0),w=h&&p.get("showPrevBtn",!0),P=h&&p.get("showNextBtn",!0),A=0,L=d;C==="left"||C==="bottom"?(_&&(m=[0,0],A+=g),w&&(x=[A,0],A+=g),P&&(v=[L-f,0],L-=g)):(_&&(m=[L-f,0],L-=g),w&&(x=[0,0],A+=g),P&&(v=[L-f,0],L-=g));var V=[A,L];return a.get("inverse")&&V.reverse(),{viewRect:i,mainLength:d,orient:r,rotation:u[r],labelRotation:b,labelPosOpt:s,labelAlign:a.get(["label","align"])||l[r],labelBaseline:a.get(["label","verticalAlign"])||a.get(["label","baseline"])||c[r],playPosition:m,prevBtnPosition:x,nextBtnPosition:v,axisExtent:V,controlSize:f,controlGap:y}},e.prototype._position=function(a,n){var o=this._mainGroup,r=this._labelGroup,i=a.viewRect;if(a.orient==="vertical"){var s=Si(),l=i.x,c=i.y+i.height;rn(s,s,[-l,-c]),vi(s,s,-Xt/2),rn(s,s,[l,c]),i=i.clone(),i.applyTransform(s)}var u=m(i),d=m(o.getBoundingRect()),p=m(r.getBoundingRect()),h=[o.x,o.y],f=[r.x,r.y];f[0]=h[0]=u[0][0];var y=a.labelPosOpt;if(y==null||Pe(y)){var g=y==="+"?0:1;x(h,d,u,1,g),x(f,p,u,1,1-g)}else{var g=y>=0?0:1;x(h,d,u,1,g),f[1]=h[1]+y}o.setPosition(h),r.setPosition(f),o.rotation=r.rotation=a.rotation,b(o),b(r);function b(v){v.originX=u[0][0]-v.x,v.originY=u[1][0]-v.y}function m(v){return[[v.x,v.x+v.width],[v.y,v.y+v.height]]}function x(v,C,_,w,P){v[w]+=_[w][P]-C[w][P]}},e.prototype._createAxis=function(a,n){var o=n.getData(),r=n.get("axisType"),i=Bc(n,r);i.getTicks=function(){return o.mapArray(["value"],function(c){return{value:c}})};var s=o.getDataExtent("value");i.setExtent(s[0],s[1]),i.calcNiceTicks();var l=new Oc("value",i,a.axisExtent,r);return l.model=n,l},e.prototype._createGroup=function(a){var n=this[a]=new De;return this.group.add(n),n},e.prototype._renderAxisLine=function(a,n,o,r){var i=o.getExtent();if(r.get(["lineStyle","show"])){var s=new sa({shape:{x1:i[0],y1:0,x2:i[1],y2:0},style:J({lineCap:"round"},r.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});n.add(s);var l=this._progressLine=new sa({shape:{x1:i[0],x2:this._currentPointer?this._currentPointer.x:i[0],y1:0,y2:0},style:He({lineCap:"round",lineWidth:s.style.lineWidth},r.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});n.add(l)}},e.prototype._renderAxisTick=function(a,n,o,r){var i=this,s=r.getData(),l=o.scale.getTicks();this._tickSymbols=[],T(l,function(c){var u=o.dataToCoord(c.value),d=s.getItemModel(c.value),p=d.getModel("itemStyle"),h=d.getModel(["emphasis","itemStyle"]),f=d.getModel(["progress","itemStyle"]),y={x:u,y:0,onclick:he(i._changeTimeline,i,c.value)},g=qn(d,p,n,y);g.ensureState("emphasis").style=h.getItemStyle(),g.ensureState("progress").style=f.getItemStyle(),Rt(g);var b=Ue(g);d.get("tooltip")?(b.dataIndex=c.value,b.dataModel=r):b.dataIndex=b.dataModel=null,i._tickSymbols.push(g)})},e.prototype._renderAxisLabel=function(a,n,o,r){var i=this,s=o.getLabelModel();if(s.get("show")){var l=r.getData(),c=o.getViewLabels();this._tickLabels=[],T(c,function(u){var d=u.tickValue,p=l.getItemModel(d),h=p.getModel("label"),f=p.getModel(["emphasis","label"]),y=p.getModel(["progress","label"]),g=o.dataToCoord(u.tickValue),b=new Ce({x:g,y:0,rotation:a.labelRotation-a.rotation,onclick:he(i._changeTimeline,i,d),silent:!1,style:Fe(h,{text:u.formattedLabel,align:a.labelAlign,verticalAlign:a.labelBaseline})});b.ensureState("emphasis").style=Fe(f),b.ensureState("progress").style=Fe(y),n.add(b),Rt(b),Kn(b).dataIndex=d,i._tickLabels.push(b)})}},e.prototype._renderControl=function(a,n,o,r){var i=a.controlSize,s=a.rotation,l=r.getModel("controlStyle").getItemStyle(),c=r.getModel(["emphasis","controlStyle"]).getItemStyle(),u=r.getPlayState(),d=r.get("inverse",!0);p(a.nextBtnPosition,"next",he(this._changeTimeline,this,d?"-":"+")),p(a.prevBtnPosition,"prev",he(this._changeTimeline,this,d?"+":"-")),p(a.playPosition,u?"stop":"play",he(this._handlePlayClick,this,!u),!0);function p(h,f,y,g){if(h){var b=mi(Ae(r.get(["controlStyle",f+"BtnSize"]),i),i),m=[0,-b/2,b,b],x=Ec(r,f+"Icon",m,{x:h[0],y:h[1],originX:i/2,originY:0,rotation:g?-s:0,rectHover:!0,style:l,onclick:y});x.ensureState("emphasis").style=c,n.add(x),Rt(x)}}},e.prototype._renderCurrentPointer=function(a,n,o,r){var i=r.getData(),s=r.getCurrentIndex(),l=i.getItemModel(s).getModel("checkpointStyle"),c=this,u={onCreate:function(d){d.draggable=!0,d.drift=he(c._handlePointerDrag,c),d.ondragend=he(c._handlePointerDragend,c),Xn(d,c._progressLine,s,o,r,!0)},onUpdate:function(d){Xn(d,c._progressLine,s,o,r)}};this._currentPointer=qn(l,l,this._mainGroup,{},this._currentPointer,u)},e.prototype._handlePlayClick=function(a){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:a,from:this.uid})},e.prototype._handlePointerDrag=function(a,n,o){this._clearTimer(),this._pointerChangeTimeline([o.offsetX,o.offsetY])},e.prototype._handlePointerDragend=function(a){this._pointerChangeTimeline([a.offsetX,a.offsetY],!0)},e.prototype._pointerChangeTimeline=function(a,n){var o=this._toAxisCoord(a)[0],r=this._axis,i=gi(r.getExtent().slice());o>i[1]&&(o=i[1]),o<i[0]&&(o=i[0]),this._currentPointer.x=o,this._currentPointer.markRedraw();var s=this._progressLine;s&&(s.shape.x2=o,s.dirty());var l=this._findNearestTick(o),c=this.model;(n||l!==c.getCurrentIndex()&&c.get("realtime"))&&this._changeTimeline(l)},e.prototype._doPlayStop=function(){var a=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var n=a.model;a._changeTimeline(n.getCurrentIndex()+(n.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},e.prototype._toAxisCoord=function(a){var n=this._mainGroup.getLocalTransform();return yi(a,n,!0)},e.prototype._findNearestTick=function(a){var n=this.model.getData(),o=1/0,r,i=this._axis;return n.each(["value"],function(s,l){var c=i.dataToCoord(s),u=Math.abs(c-a);u<o&&(o=u,r=l)}),r},e.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},e.prototype._changeTimeline=function(a){var n=this.model.getCurrentIndex();a==="+"?a=n+1:a==="-"&&(a=n-1),this.api.dispatchAction({type:"timelineChange",currentIndex:a,from:this.uid})},e.prototype._updateTicksStatus=function(){var a=this.model.getCurrentIndex(),n=this._tickSymbols,o=this._tickLabels;if(n)for(var r=0;r<n.length;r++)n&&n[r]&&n[r].toggleState("progress",r<a);if(o)for(var r=0;r<o.length;r++)o&&o[r]&&o[r].toggleState("progress",Kn(o[r]).dataIndex<=a)},e.type="timeline.slider",e}(kc);function Bc(t,e){if(e=e||t.get("type"),e)switch(e){case"category":return new xi({ordinalMeta:t.getCategories(),extent:[1/0,-1/0]});case"time":return new _i({locale:t.ecModel.getLocaleModel(),useUTC:t.ecModel.get("useUTC")});default:return new bi}}function Vc(t,e){return Do(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()},t.get("padding"))}function Ec(t,e,a,n){var o=n.style,r=Io(t.get(["controlStyle",e]),n||{},new Ta(a[0],a[1],a[2],a[3]));return o&&r.setStyle(o),r}function qn(t,e,a,n,o,r){var i=e.get("color");if(o)o.setColor(i),a.add(o),r&&r.onUpdate(o);else{var s=t.get("symbol");o=Pa(s,-1,-1,2,2,i),o.setStyle("strokeNoScale",!0),a.add(o),r&&r.onCreate(o)}var l=e.getItemStyle(["color"]);o.setStyle(l),n=me({rectHover:!0,z2:100},n,!0);var c=Ia(t.get("symbolSize"));n.scaleX=c[0]/2,n.scaleY=c[1]/2;var u=ka(t.get("symbolOffset"),c);u&&(n.x=(n.x||0)+u[0],n.y=(n.y||0)+u[1]);var d=t.get("symbolRotate");return n.rotation=(d||0)*Math.PI/180||0,o.attr(n),o.updateTransform(),o}function Xn(t,e,a,n,o,r){if(!t.dragging){var i=o.getModel("checkpointStyle"),s=n.dataToCoord(o.getData().get("value",a));if(r||!i.get("animation",!0))t.attr({x:s,y:0}),e&&e.attr({shape:{x2:s}});else{var l={duration:i.get("animationDuration",!0),easing:i.get("animationEasing",!0)};t.stopAnimation(null,!0),t.animateTo({x:s,y:0},l),e&&e.animateTo({shape:{x2:s}},l)}}}function Nc(t){t.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(e,a,n){var o=a.getComponent("timeline");return o&&e.currentIndex!=null&&(o.setCurrentIndex(e.currentIndex),!o.get("loop",!0)&&o.isIndexMax()&&o.getPlayState()&&(o.setPlayState(!1),n.dispatchAction({type:"timelinePlayChange",playState:!1,from:e.from}))),a.resetOption("timeline",{replaceMerge:o.get("replaceMerge",!0)}),He({currentIndex:o.option.currentIndex},e)}),t.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(e,a){var n=a.getComponent("timeline");n&&e.playState!=null&&n.setPlayState(e.playState)})}function Rc(t){var e=t&&t.timeline;G(e)||(e=e?[e]:[]),T(e,function(a){a&&zc(a)})}function zc(t){var e=t.type,a={number:"value",time:"time"};if(a[e]&&(t.axisType=a[e],delete t.type),Jn(t),Me(t,"controlPosition")){var n=t.controlStyle||(t.controlStyle={});Me(n,"position")||(n.position=t.controlPosition),n.position==="none"&&!Me(n,"show")&&(n.show=!1,delete n.position),delete t.controlPosition}T(t.data||[],function(o){ot(o)&&!G(o)&&(!Me(o,"value")&&Me(o,"name")&&(o.value=o.name),Jn(o))})}function Jn(t){var e=t.itemStyle||(t.itemStyle={}),a=e.emphasis||(e.emphasis={}),n=t.label||t.label||{},o=n.normal||(n.normal={}),r={normal:1,emphasis:1};T(n,function(i,s){!r[s]&&!Me(o,s)&&(o[s]=i)}),a.label&&!Me(n,"emphasis")&&(n.emphasis=a.label,delete a.label)}function Me(t,e){return t.hasOwnProperty(e)}function $c(t){t.registerComponentModel(sr),t.registerComponentView(Mc),t.registerSubTypeDefaulter("timeline",function(){return"slider"}),Nc(t),t.registerPreprocessor(Rc)}function Fc(t,e){if(!t)return!1;for(var a=G(t)?t:[t],n=0;n<a.length;n++)if(a[n]&&a[n][e])return!0;return!1}function vt(t){Ci(t,"label",["show"])}var mt=Le(),ut=function(t){R(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a.createdBySelf=!1,a}return e.prototype.init=function(a,n,o){this.mergeDefaultAndTheme(a,o),this._mergeOption(a,o,!1,!0)},e.prototype.isAnimationEnabled=function(){if(ko.node)return!1;var a=this.__hostSeries;return this.getShallow("animation")&&a&&a.isAnimationEnabled()},e.prototype.mergeOption=function(a,n){this._mergeOption(a,n,!1,!1)},e.prototype._mergeOption=function(a,n,o,r){var i=this.mainType;o||n.eachSeries(function(s){var l=s.get(this.mainType,!0),c=mt(s)[i];if(!l||!l.data){mt(s)[i]=null;return}c?c._mergeOption(l,n,!0):(r&&vt(l),T(l.data,function(u){u instanceof Array?(vt(u[0]),vt(u[1])):vt(u)}),c=this.createMarkerModelFromSeries(l,this,n),J(c,{mainType:this.mainType,seriesIndex:s.seriesIndex,name:s.name,createdBySelf:!0}),c.__hostSeries=s),mt(s)[i]=c},this)},e.prototype.formatTooltip=function(a,n,o){var r=this.getData(),i=this.getRawValue(a),s=r.getName(a);return da("section",{header:this.name,blocks:[da("nameValue",{name:s,value:i,noName:!s,noValue:i==null})]})},e.prototype.getData=function(){return this._data},e.prototype.setData=function(a){this._data=a},e.prototype.getDataParams=function(a,n){var o=Va.prototype.getDataParams.call(this,a,n),r=this.__hostSeries;return r&&(o.seriesId=r.id,o.seriesName=r.name,o.seriesType=r.subType),o},e.getMarkerModelFromSeries=function(a,n){return mt(a)[n]},e.type="marker",e.dependencies=["series","grid","polar","geo"],e}(pt);Oa(ut,Va.prototype);function Uc(t){return!(isNaN(parseFloat(t.x))&&isNaN(parseFloat(t.y)))}function Wc(t){return!isNaN(parseFloat(t.x))&&!isNaN(parseFloat(t.y))}function gt(t,e,a,n,o,r){var i=[],s=wi(e,n),l=s?e.getCalculationInfo("stackResultDimension"):n,c=Ha(e,l,t),u=e.indicesOfNearest(l,c)[0];i[o]=e.get(a,u),i[r]=e.get(l,u);var d=e.get(n,u),p=Ai(e.get(n,u));return p=Math.min(p,20),p>=0&&(i[r]=+i[r].toFixed(p)),[i,d]}var Jt={min:H(gt,"min"),max:H(gt,"max"),average:H(gt,"average"),median:H(gt,"median")};function Qn(t,e){if(e){var a=t.getData(),n=t.coordinateSystem,o=n&&n.dimensions;if(!Wc(e)&&!G(e.coord)&&G(o)){var r=lr(e,a,n,t);if(e=xe(e),e.type&&Jt[e.type]&&r.baseAxis&&r.valueAxis){var i=ge(o,r.baseAxis.dim),s=ge(o,r.valueAxis.dim),l=Jt[e.type](a,r.baseDataDim,r.valueDataDim,i,s);e.coord=l[0],e.value=l[1]}else e.coord=[e.xAxis!=null?e.xAxis:e.radiusAxis,e.yAxis!=null?e.yAxis:e.angleAxis]}if(e.coord==null||!G(o))e.coord=[];else for(var c=e.coord,u=0;u<2;u++)Jt[c[u]]&&(c[u]=Ha(a,a.mapDimension(o[u]),c[u]));return e}}function lr(t,e,a,n){var o={};return t.valueIndex!=null||t.valueDim!=null?(o.valueDataDim=t.valueIndex!=null?e.getDimension(t.valueIndex):t.valueDim,o.valueAxis=a.getAxis(Gc(n,o.valueDataDim)),o.baseAxis=a.getOtherAxis(o.valueAxis),o.baseDataDim=e.mapDimension(o.baseAxis.dim)):(o.baseAxis=n.getBaseAxis(),o.valueAxis=a.getOtherAxis(o.baseAxis),o.baseDataDim=e.mapDimension(o.baseAxis.dim),o.valueDataDim=e.mapDimension(o.valueAxis.dim)),o}function Gc(t,e){var a=t.getData().getDimensionInfo(e);return a&&a.coordDim}function eo(t,e){return t&&t.containData&&e.coord&&!Uc(e)?t.containData(e.coord):!0}function jc(t,e){return t?function(a,n,o,r){var i=r<2?a.coord&&a.coord[r]:a.value;return sn(i,e[r])}:function(a,n,o,r){return sn(a.value,e[r])}}function Ha(t,e,a){if(a==="average"){var n=0,o=0;return t.each(e,function(r,i){isNaN(r)||(n+=r,o++)}),n/o}else return a==="median"?t.getMedian(e):t.getDataExtent(e)[a==="max"?1:0]}var Qt=Le(),Zc=function(t){R(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.init=function(){this.markerGroupMap=St()},e.prototype.render=function(a,n,o){var r=this,i=this.markerGroupMap;i.each(function(s){Qt(s).keep=!1}),n.eachSeries(function(s){var l=ut.getMarkerModelFromSeries(s,r.type);l&&r.renderSeries(s,l,n,o)}),i.each(function(s){!Qt(s).keep&&r.group.remove(s.group)})},e.prototype.markKeep=function(a){Qt(a).keep=!0},e.prototype.toggleBlurSeries=function(a,n){var o=this;T(a,function(r){var i=ut.getMarkerModelFromSeries(r,o.type);if(i){var s=i.getData();s.eachItemGraphicEl(function(l){l&&(n?Ti(l):Pi(l))})}})},e.type="marker",e}(ft),Hc=function(t){R(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.createMarkerModelFromSeries=function(a,n,o){return new e(a,n,o)},e.type="markLine",e.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},e}(ut),yt=Le(),Yc=function(t,e,a,n){var o=t.getData(),r;if(G(n))r=n;else{var i=n.type;if(i==="min"||i==="max"||i==="average"||i==="median"||n.xAxis!=null||n.yAxis!=null){var s=void 0,l=void 0;if(n.yAxis!=null||n.xAxis!=null)s=e.getAxis(n.yAxis!=null?"y":"x"),l=Li(n.yAxis,n.xAxis);else{var c=lr(n,o,e,t);s=c.valueAxis;var u=Ii(o,c.valueDataDim);l=Ha(o,u,i)}var d=s.dim==="x"?0:1,p=1-d,h=xe(n),f={coord:[]};h.type=null,h.coord=[],h.coord[p]=-1/0,f.coord[p]=1/0;var y=a.get("precision");y>=0&&ki(l)&&(l=+l.toFixed(Math.min(y,20))),h.coord[d]=f.coord[d]=l,r=[h,f,{type:i,valueIndex:n.valueIndex,value:l}]}else r=[]}var g=[Qn(t,r[0]),Qn(t,r[1]),J({},r[2])];return g[2].type=g[2].type||null,me(g[2],g[0]),me(g[2],g[1]),g};function At(t){return!isNaN(t)&&!isFinite(t)}function to(t,e,a,n){var o=1-t,r=n.dimensions[t];return At(e[o])&&At(a[o])&&e[t]===a[t]&&n.getAxis(r).containData(e[t])}function Kc(t,e){if(t.type==="cartesian2d"){var a=e[0].coord,n=e[1].coord;if(a&&n&&(to(1,a,n,t)||to(0,a,n,t)))return!0}return eo(t,e[0])&&eo(t,e[1])}function ea(t,e,a,n,o){var r=n.coordinateSystem,i=t.getItemModel(e),s,l=Te(i.get("x"),o.getWidth()),c=Te(i.get("y"),o.getHeight());if(!isNaN(l)&&!isNaN(c))s=[l,c];else{if(n.getMarkerPosition)s=n.getMarkerPosition(t.getValues(t.dimensions,e));else{var u=r.dimensions,d=t.get(u[0],e),p=t.get(u[1],e);s=r.dataToPoint([d,p])}if(qi(r,"cartesian2d")){var h=r.getAxis("x"),f=r.getAxis("y"),u=r.dimensions;At(t.get(u[0],e))?s[0]=h.toGlobalCoord(h.getExtent()[a?0:1]):At(t.get(u[1],e))&&(s[1]=f.toGlobalCoord(f.getExtent()[a?0:1]))}isNaN(l)||(s[0]=l),isNaN(c)||(s[1]=c)}t.setItemLayout(e,s)}var qc=function(t){R(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.updateTransform=function(a,n,o){n.eachSeries(function(r){var i=ut.getMarkerModelFromSeries(r,"markLine");if(i){var s=i.getData(),l=yt(i).from,c=yt(i).to;l.each(function(u){ea(l,u,!0,r,o),ea(c,u,!1,r,o)}),s.each(function(u){s.setItemLayout(u,[l.getItemLayout(u),c.getItemLayout(u)])}),this.markerGroupMap.get(r.id).updateLayout()}},this)},e.prototype.renderSeries=function(a,n,o,r){var i=a.coordinateSystem,s=a.id,l=a.getData(),c=this.markerGroupMap,u=c.get(s)||c.set(s,new Fl);this.group.add(u.group);var d=Xc(i,a,n),p=d.from,h=d.to,f=d.line;yt(n).from=p,yt(n).to=h,n.setData(f);var y=n.get("symbol"),g=n.get("symbolSize"),b=n.get("symbolRotate"),m=n.get("symbolOffset");G(y)||(y=[y,y]),G(g)||(g=[g,g]),G(b)||(b=[b,b]),G(m)||(m=[m,m]),d.from.each(function(v){x(p,v,!0),x(h,v,!1)}),f.each(function(v){var C=f.getItemModel(v).getModel("lineStyle").getLineStyle();f.setItemLayout(v,[p.getItemLayout(v),h.getItemLayout(v)]),C.stroke==null&&(C.stroke=p.getItemVisual(v,"style").fill),f.setItemVisual(v,{fromSymbolKeepAspect:p.getItemVisual(v,"symbolKeepAspect"),fromSymbolOffset:p.getItemVisual(v,"symbolOffset"),fromSymbolRotate:p.getItemVisual(v,"symbolRotate"),fromSymbolSize:p.getItemVisual(v,"symbolSize"),fromSymbol:p.getItemVisual(v,"symbol"),toSymbolKeepAspect:h.getItemVisual(v,"symbolKeepAspect"),toSymbolOffset:h.getItemVisual(v,"symbolOffset"),toSymbolRotate:h.getItemVisual(v,"symbolRotate"),toSymbolSize:h.getItemVisual(v,"symbolSize"),toSymbol:h.getItemVisual(v,"symbol"),style:C})}),u.updateData(f),d.line.eachItemGraphicEl(function(v){Ue(v).dataModel=n,v.traverse(function(C){Ue(C).dataModel=n})});function x(v,C,_){var w=v.getItemModel(C);ea(v,C,_,a,r);var P=w.getModel("itemStyle").getItemStyle();P.fill==null&&(P.fill=Di(l,"color")),v.setItemVisual(C,{symbolKeepAspect:w.get("symbolKeepAspect"),symbolOffset:Ae(w.get("symbolOffset",!0),m[_?0:1]),symbolRotate:Ae(w.get("symbolRotate",!0),b[_?0:1]),symbolSize:Ae(w.get("symbolSize"),g[_?0:1]),symbol:Ae(w.get("symbol",!0),y[_?0:1]),style:P})}this.markKeep(u),u.group.silent=n.get("silent")||a.get("silent")},e.type="markLine",e}(Zc);function Xc(t,e,a){var n;t?n=Z(t&&t.dimensions,function(c){var u=e.getData().getDimensionInfo(e.getData().mapDimension(c))||{};return J(J({},u),{name:c,ordinalMeta:null})}):n=[{name:"value",type:"float"}];var o=new _t(n,a),r=new _t(n,a),i=new _t([],a),s=Z(a.get("data"),H(Yc,e,t,a));t&&(s=Lt(s,H(Kc,t)));var l=jc(!!t,n);return o.initData(Z(s,function(c){return c[0]}),null,l),r.initData(Z(s,function(c){return c[1]}),null,l),i.initData(Z(s,function(c){return c[2]})),i.hasItemOption=!0,{from:o,to:r,line:i}}function Jc(t){t.registerComponentModel(Hc),t.registerComponentView(qc),t.registerPreprocessor(function(e){Fc(e.series,"markLine")&&(e.markLine=e.markLine||{})})}function Qc(t,e,a,n){const o=t.indexOf(a),r=t.indexOf(n),i=o>0&&r>0;return i&&t.push(`${a}-${n}`),e.map(s=>{const l=s.slice();if(i){const c=l===null||l[r]===null||l[o]===null?null:l[r]-l[o];l.push(c)}return l})}function ed(t){const e=[];return"main_plot"in t&&Object.entries(t.main_plot).forEach(([a,n])=>{n.fill_to&&e.push([a,n.fill_to])}),"subplots"in t&&Object.values(t.subplots).forEach(a=>{Object.entries(a).forEach(([n,o])=>{o.fill_to&&e.push([n,o.fill_to])})}),e}const td=2,ad=3,ur=4;function Oe(t,e,a=ad){const n=e%t;let o=a===td;return a===ur&&(o=n>t/2),e-n+(o?t:0)}function nd(t,e,a){const n=Sr("Shift",{events:["keydown","keyup"]}),o=W(()=>e.value==="dark"?"white":"black"),r=F({x:0,y:0}),i=144,s=F(!0),l=F(!1),c=F(!1),u=35,d=170;function p(m){return Oe(a.value,m,ur)}function h(m){s.value&&!c.value&&b(m.offsetX,m.offsetY)}function f(m){var x,v,C,_,w,P,A,L;if(l.value)c.value?(g(),c.value=!1,(P=(w=t.value)==null?void 0:w.chart)==null||P.getZr().off("mousemove",h),(L=(A=t.value)==null?void 0:A.chart)==null||L.getZr().off("mousedown",f)):c.value=!0;else{const V=((x=t.value)==null?void 0:x.convertFromPixel({seriesIndex:0},[m.offsetX,m.offsetY]))??[0,0];V[0]=p(Number(V[0]));const B=((v=t.value)==null?void 0:v.convertToPixel({seriesIndex:0},V))??[0,0];r.value={x:B[0],y:B[1]},(_=(C=t.value)==null?void 0:C.chart)==null||_.getZr().on("mousemove",h),y()}}function y(){var m;l.value=!0,(m=t.value)==null||m.setOption({dataZoom:[{disabled:!0}],graphic:[{type:"rect",shape:{x:r.value.x,width:0,y:r.value.y,height:0},style:{fill:o.value,opacity:.1}},{type:"rect",z:5,shape:{x:r.value.x,width:d,y:r.value.y,height:u,r:5},style:{fill:"#002fff",opacity:.8},textContent:{z:10,style:{text:"0 bars - 0%",font:"14px sans-serif",fill:"white"}},textConfig:{position:"inside"}}]})}function g(){var m;l.value=!1,(m=t.value)==null||m.setOption({dataZoom:[{disabled:!1}],graphic:[{$action:"remove"},{$action:"remove"}]})}function b(m,x){var k,Q,ue,K;const v=((k=t.value)==null?void 0:k.convertFromPixel({seriesIndex:0},[r.value.x,r.value.y]))??[0,0],C=((Q=t.value)==null?void 0:Q.convertFromPixel({seriesIndex:0},[m,x]))??[0,0],_=Number(v[1]),w=Number(C[1]),P=p(Number(v[0])),A=p(Number(C[0])),L=Math.abs(P-A),V=((ue=t.value)==null?void 0:ue.convertToPixel({seriesIndex:0},[A,0])[0])??0,B=Cr(L,{units:["d","h","m"]}),I=Math.abs((_-w)/_*100).toFixed(2);(K=t.value)==null||K.setOption({graphic:[{shape:{width:V>r.value.x?-1*(r.value.x-V):V-r.value.x,height:x>r.value.y?-1*(r.value.y-x):x-r.value.y}},{shape:{x:r.value.x+(V-r.value.x)/2-d/2,y:x>r.value.y?x-(u+5):x+9},textContent:{style:{textAlign:m<r.value.x?"left":"right",text:`${L/a.value} bars (${_<w?I:"-"+I}%) 
 ${B}`}}}]}),s.value=!1,setTimeout(()=>{s.value=!0},1e3/i)}Y(()=>n.value,()=>{var m,x;n.value&&!l.value&&((x=(m=t.value)==null?void 0:m.chart)==null||x.getZr().on("mousedown",f))})}function od(t,e){const a=t.indexOf("open"),n=t.indexOf("close"),o=t.indexOf("high"),r=t.indexOf("low");let i;return e.map((s,l)=>{const c=s.slice(),u=l===0?(c[a]+c[n])/2:(i[a]+i[n])/2,d=(c[a]+c[o]+c[r]+c[n])/4,p=Math.max(c[o],c[a],c[n]),h=Math.min(c[r],c[a],c[n]);return c[a]=u,c[n]=d,c[o]=p,c[r]=h,i=c.slice(),c})}function Ca(t,e,a,n,o=0){return{name:a,type:n.type||"line",xAxisIndex:o,yAxisIndex:o,itemStyle:{color:n.color||nt()},encode:{x:t,y:e},showSymbol:!1}}function ao(t,e,a,n,o=0){const r={type:we.line},i=Ca(t,e,a,r,o),s={stack:a,stackStrategy:"all",lineStyle:{opacity:0},showSymbol:!1,areaStyle:{color:n.color,opacity:.1},tooltip:{show:!1}};return Object.assign(i,s),i}function rd(t){if(!t)return{baseCurrency:"",quoteCurrency:""};const[e,a]=t.split("/");if(a!==void 0){const n=a.split(":");return{baseCurrency:e,quoteCurrency:n[0]||a}}return{baseCurrency:a??"",quoteCurrency:e??""}}function cr(t,e){return`${t.ft_order_side==="buy"?"+":"-"}${fo("cost"in t?t.cost:t.amount*t.safe_price,e)}`}function no(t,e,a,n){let o=`${t.is_short?"Short":"Long"} ${a}
  ${po(t.profit_ratio)} ${t.profit_abs?"("+fo(t.profit_abs,n)+")":""}
  ${cr(e,n)}
  Enter-tag: ${t.enter_tag??""}`;return o+=`${"ft_order_tag"in e&&e.ft_order_tag&&t.enter_tag!=e.ft_order_tag?`
Order-Tag: `+e.ft_order_tag:""}`,o+=`${t.exit_reason?`
Exit-Tag: `+t.exit_reason:""}`,o}function id(t,e,a){let n=`${t.is_short?"Short":"Long"} adjustment
  ${cr(e,a)}
  Enter-tag: ${t.enter_tag??""}`;return n+=`${"ft_order_tag"in e&&e.ft_order_tag?`
Order-Tag: `+e.ft_order_tag:""}`,n}const sd="path://m 52.444161,104.1909 8.386653,25.34314 8.386651,25.34313 -16.731501,0.0422 -16.731501,0.0422 8.344848,-25.38539 z m 0.08656,-48.368126 8.386652,25.343139 8.386652,25.343137 -16.731501,0.0422 -16.731502,0.0422 8.344848,-25.385389 z",oo="path://m 102.20764,19.885384 h 24.1454 v 41.928829 h -24.1454 z m 12.17344,36.423813 8.38665,25.343139 8.38666,25.343134 -16.7315,0.0422 -16.731507,0.0422 8.344847,-25.385386 z",ta="#AD00FF",aa="#0066FF";function ld(t,e){const a=[],n=t.data_stop_ts+t.timeframe_ms;for(let o=0,r=e.length;o<r;o+=1){const i=e[o],s=i.open_fill_timestamp??i.open_timestamp;if((Oe(t.timeframe_ms??0,i.open_timestamp)<=n||!i.close_timestamp||i.close_timestamp&&i.close_timestamp>=t.data_start_ts)&&i.orders)for(let l=0;l<i.orders.length;l++){const c=i.orders[l],u=c.order_filled_timestamp??("order_timestamp"in c?c.order_timestamp:i.open_timestamp),{quoteCurrency:d}=rd(i.quote_currency??i.pair??"");u&&Oe(t.timeframe_ms??0,u)<=n&&u>t.data_start_ts&&(l===0?a.push([Oe(t.timeframe_ms??0,s),c.safe_price,oo,c.ft_order_side=="sell"?180:0,i.is_short?ta:aa,(i.is_short?"Short":"Long")+(c.order_filled_timestamp?"":" (open)"),no(i,c,"entry",d)]):l===i.orders.length-1&&i.close_timestamp?Oe(t.timeframe_ms??0,i.close_timestamp)<=n&&i.close_timestamp>t.data_start_ts&&i.is_open===!1&&a.push([Oe(t.timeframe_ms??0,i.close_timestamp),c.safe_price,oo,i.is_short?0:180,i.is_short?ta:aa,po(i.profit_ratio,2),no(i,c,"exit",d)]):(c.ft_order_side!=="stoploss"||"filled"in c&&(c.filled??0)>0)&&a.push([Oe(t.timeframe_ms??0,u),c.safe_price,sd,c.ft_order_side=="sell"?180:0,i.is_short?ta:aa,"",id(i,c,d)]))}}return{tradeData:a}}function ud(t,e,a,n){const{tradeData:o}=ld(a,n),r=n.filter(s=>s.is_open),i={name:t,type:"scatter",xAxisIndex:0,yAxisIndex:0,encode:{x:0,y:1,label:5,tooltip:6},label:{show:!0,fontSize:12,backgroundColor:e!=="dark"?"#fff":"#000",padding:2,color:e==="dark"?"#fff":"#000",rotate:75,offset:[10,0],align:"left"},itemStyle:{color:s=>s.data?s.data[4]:"#000",opacity:.9},symbol:s=>s[2],symbolRotate:s=>s[3],symbolSize:13,data:o};if(r.length>0){const s=a.timeframe_ms*10;i.markLine={symbol:"none",itemStyle:{color:"#ff0000AA"},label:{show:!0,position:"middle"},lineStyle:{type:"solid"},data:r.map(l=>[{name:"Stoploss",yAxis:l.stop_loss_abs,xAxis:a.data_stop_ts-s>l.open_timestamp?l.open_timestamp:a.data_stop_ts-s},{yAxis:l.stop_loss_abs,xAxis:l.close_timestamp??a.data_stop_ts+a.timeframe_ms}])}}return i}const cd={class:"chart-wrapper"},ro=55,tt=8,dd="#00ff26",pd="#00ff26",fd="#faba25",hd="#faba25",vd=Ne({__name:"CandleChart",props:{trades:{},dataset:{},heikinAshi:{type:Boolean},useUTC:{type:Boolean},plotConfig:{},theme:{},sliderPosition:{},colorUp:{},colorDown:{},labelSide:{}},setup(t){Da([Oi,Uu,Mi,Xi,Ji,Bi,$c,Vi,Ic,Ei,Qi,es,Jc,wu,ts,as,Vl,Ni,Xu]);const e=t,a=W(()=>e.labelSide==="left"),n=a.value?"5.5%":"1%",o=a.value?"1%":"5.5%",r=e.colorUp,i=e.colorUp,s=e.colorDown,l=e.colorDown,c=F(),u=F({}),d=W(()=>e.dataset?e.dataset.strategy:""),p=W(()=>e.dataset?e.dataset.pair:""),h=W(()=>e.dataset?e.dataset.timeframe:""),f=W(()=>e.dataset!==null&&typeof e.dataset=="object"),y=W(()=>e.trades.filter(C=>C.pair===p.value)),g=W(()=>`${d.value} - ${p.value} - ${h.value}`),b=W(()=>ed(e.plotConfig));nd(c,Qa(()=>e.theme),Qa(()=>e.dataset.timeframe_ms));function m(C=!1){var oe,U,ye,Ya;if(!f.value)return;(oe=u.value)!=null&&oe.title&&(u.value.title[0].text=g.value);const _=e.dataset.columns.slice(),w=_.findIndex(D=>D==="__date_ts"),P=_.findIndex(D=>D==="open"),A=_.findIndex(D=>D==="high"),L=_.findIndex(D=>D==="low"),V=_.findIndex(D=>D==="close"),B=_.findIndex(D=>D==="volume"),I=_.findIndex(D=>D==="_buy_signal_close"||D==="_enter_long_signal_close"),k=_.findIndex(D=>D==="_sell_signal_close"||D==="_exit_long_signal_close"),Q=_.findIndex(D=>D==="_enter_short_signal_close"),ue=_.findIndex(D=>D==="_exit_short_signal_close"),K="subplots"in e.plotConfig?Object.keys(e.plotConfig.subplots).length+1:1;if(Array.isArray((U=u.value)==null?void 0:U.dataZoom))if(C){const D=(1-250/e.dataset.length)*100;u.value.dataZoom.forEach((se,Re)=>{u.value&&u.value.dataZoom&&(u.value.dataZoom[Re].start=D)})}else u.value.dataZoom.forEach((D,se)=>{u.value&&u.value.dataZoom&&(delete u.value.dataZoom[se].start,delete u.value.dataZoom[se].end)});let ee=e.heikinAshi?od(_,e.dataset.data):e.dataset.data.slice();b.value.forEach(([D,se])=>{ee=Qc(_,ee,D,se)});const ae=Array(ee.length>0?ee[ee.length-2].length:0);ae[w]=ee[ee.length-1][w]+e.dataset.timeframe_ms*3,ee.push(ae);const ne={dataset:{source:ee},grid:[{left:n,right:o,bottom:`${K*tt+2}%`},{left:n,right:o,bottom:`${K*tt}%`,height:`${tt}%`}],series:[{name:"Candles",type:"candlestick",barWidth:"80%",itemStyle:{color:r,color0:s,borderColor:i,borderColor0:l},encode:{x:w,y:[P,V,L,A]}},{name:"Volume",type:"bar",xAxisIndex:1,yAxisIndex:1,itemStyle:{color:"#777777"},large:!0,encode:{x:w,y:B}},{name:"Entry",type:"scatter",symbol:"triangle",symbolSize:10,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:dd},tooltip:{valueFormatter:D=>D?`Long entry ${D}`:""},encode:{x:w,y:I}}]};if(k>=0&&Array.isArray(ne.series)&&ne.series.push({name:"Exit",type:"scatter",symbol:"diamond",symbolSize:8,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:fd},tooltip:{valueFormatter:D=>D?`Long exit ${D}`:""},encode:{x:w,y:k}}),Array.isArray(ne.series)&&(Q>=0&&ne.series.push({name:"Entry",type:"scatter",symbol:"triangle",symbolRotate:180,symbolSize:10,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:pd},tooltip:{valueFormatter:D=>D?`Short entry ${D}`:""},encode:{x:w,y:Q}}),ue>=0&&ne.series.push({name:"Exit",type:"scatter",symbol:"pin",symbolSize:8,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:hd},tooltip:{valueFormatter:D=>D?`Short exit ${D}`:""},encode:{x:w,y:ue}})),Object.assign(u.value,ne),"main_plot"in e.plotConfig&&Object.entries(e.plotConfig.main_plot).forEach(([D,se])=>{var Ke,te,Ie,qe,Xe,Je,Qe;const Re=_.findIndex(ke=>ke===D);if(Re>0){if(!Array.isArray((Ke=u.value)==null?void 0:Ke.legend)&&((Ie=(te=u.value)==null?void 0:te.legend)!=null&&Ie.data)&&u.value.legend.data.push(D),Array.isArray((qe=u.value)==null?void 0:qe.series)){if((Xe=u.value)==null||Xe.series.push(Ca(w,Re,D,se)),se.fill_to){const ke=`${D}-${se.fill_to}`,Ot=_.findIndex(Vt=>Vt===ke),Mt={color:se.color,type:we.line},Bt=ao(w,Ot,D,Mt,0);u.value.series[u.value.series.length-1].stack=D,u.value.series.push(Bt)}(Qe=u.value)==null||Qe.series.splice(((Je=u.value)==null?void 0:Je.series.length)-1,0)}}else console.log(`element ${D} for main plot not found in columns.`)}),"subplots"in e.plotConfig){let D=2;Object.entries(e.plotConfig.subplots).forEach(([se,Re])=>{const Ke=D;Array.isArray(u.value.yAxis)&&u.value.yAxis.length<=D&&u.value.yAxis.push({scale:!0,gridIndex:Ke,name:se,position:e.labelSide,nameLocation:"middle",nameGap:ro,axisLabel:{show:!0,hideOverlap:!0},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}}),Array.isArray(u.value.xAxis)&&u.value.xAxis.length<=D&&u.value.xAxis.push({type:"time",gridIndex:Ke,axisLine:{onZero:!1},axisTick:{show:!1},axisLabel:{show:!1},axisPointer:{label:{show:!1}},splitLine:{show:!1},splitNumber:20}),Array.isArray(u.value.dataZoom)&&u.value.dataZoom.forEach(te=>te.xAxisIndex&&Array.isArray(te.xAxisIndex)?te.xAxisIndex.push(D):null),u.value.grid&&Array.isArray(u.value.grid)&&u.value.grid.push({left:n,right:o,bottom:`${(K-D+1)*tt}%`,height:`${tt}%`}),Object.entries(Re).forEach(([te,Ie])=>{var Xe,Je,Qe;const qe=_.findIndex(ke=>ke===te);if(qe>0){if(!Array.isArray(u.value.legend)&&((Xe=u.value.legend)!=null&&Xe.data)&&u.value.legend.data.push(te),u.value.series&&Array.isArray(u.value.series)){if(u.value.series.push(Ca(w,qe,te,Ie,D)),Ie.fill_to){const ke=`${te}-${Ie.fill_to}`,Ot=_.findIndex(Vt=>Vt===ke),Mt={color:Ie.color,type:we.line},Bt=ao(w,Ot,te,Mt,D);u.value.series[u.value.series.length-1].stack=te,u.value.series.push(Bt)}(Qe=u.value)==null||Qe.series.splice(((Je=u.value)==null?void 0:Je.series.length)-1,0)}}else console.log(`element ${te} was not found in the columns.`)}),D+=1})}Array.isArray(u.value.grid)&&(u.value.grid[u.value.grid.length-1].bottom="50px",delete u.value.grid[u.value.grid.length-1].top);const q="Trades";!Array.isArray(u.value.legend)&&((ye=u.value.legend)!=null&&ye.data)&&u.value.legend.data.splice(4,0,q);const ce=ud(q,e.theme,e.dataset,y.value);Array.isArray(u.value.series)&&u.value.series.push(ce),(Ya=c.value)==null||Ya.setOption(u.value,{replaceMerge:["series","grid","yAxis","xAxis","legend"],notMerge:C})}function x(){var C;(C=c.value)==null||C.setOption({},{notMerge:!0}),u.value={title:[{show:!1}],backgroundColor:"rgba(0, 0, 0, 0)",useUTC:e.useUTC,animation:!1,legend:{data:["Candles","Volume","Entry","Exit"],right:"1%",type:"scroll",pageTextStyle:{color:e.theme==="dark"?"#dedede":"#333"},pageIconColor:e.theme==="dark"?"#aaa":"#2f4554",pageIconInactiveColor:e.theme==="dark"?"#2f4554":"#aaa"},tooltip:{show:!0,trigger:"axis",renderMode:"richText",backgroundColor:"rgba(80,80,80,0.7)",borderWidth:0,textStyle:{color:"#fff"},axisPointer:{type:"cross",lineStyle:{color:"#cccccc",width:1,opacity:1}},position(_,w,P,A,L){const V={top:60},B=_[0]<L.viewSize[0]/2;return V[["left","right"][+B]]=B?5:60,V}},axisPointer:{link:[{xAxisIndex:"all"}],label:{backgroundColor:"#777"}},xAxis:[{type:"time",axisLine:{onZero:!1},axisTick:{show:!0},axisLabel:{show:!0},axisPointer:{label:{show:!1}},position:"top",splitLine:{show:!1},splitNumber:20,min:"dataMin",max:"dataMax"},{type:"time",gridIndex:1,axisLine:{onZero:!1},axisTick:{show:!1},axisLabel:{show:!1},axisPointer:{label:{show:!1}},splitLine:{show:!1},splitNumber:20,min:"dataMin",max:"dataMax"}],yAxis:[{scale:!0,max:_=>_.max+(_.max-_.min)*.02,min:_=>_.min-(_.max-_.min)*.04,position:e.labelSide},{scale:!0,gridIndex:1,splitNumber:2,name:"volume",nameLocation:"middle",position:e.labelSide,nameGap:ro,axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}}],dataZoom:[{type:"inside",xAxisIndex:[0,1],start:80,end:100},{xAxisIndex:[0,1],bottom:10,start:80,end:100,...ns}]},console.log("Initialized"),m(!0)}function v(){if(!e.sliderPosition)return;const C=en(e.sliderPosition.startValue-e.dataset.timeframe_ms*40),_=en(e.sliderPosition.endValue?e.sliderPosition.endValue+e.dataset.timeframe_ms*40:e.sliderPosition.startValue+e.dataset.timeframe_ms*80);c.value&&c.value.dispatchAction({type:"dataZoom",dataZoomIndex:0,startValue:C,endValue:_})}return wa(()=>{x()}),Y(()=>e.useUTC,()=>x()),Y(()=>e.dataset,()=>m()),Y(()=>e.plotConfig,()=>x()),Y(()=>e.heikinAshi,()=>m()),Y(()=>e.sliderPosition,()=>v()),Y(()=>e.theme,()=>{x()}),(C,_)=>(M(),$("div",cd,[S(f)?(M(),X(S(Ri),{key:0,ref_key:"candleChart",ref:c,theme:C.theme,autoresize:"","manual-update":""},null,8,["theme"])):j("",!0)]))}}),md=Aa(vd,[["__scopeId","data-v-c75aa32a"]]),gd=t=>(uo("data-v-dd96725a"),t=t(),co(),t),yd={class:"d-flex h-100"},bd={class:"flex-fill w-100 flex-column align-items-stretch d-flex h-100"},_d={class:"d-flex me-0"},xd={class:"ms-1 ms-md-2 d-flex flex-wrap flex-md-nowrap align-items-center w-auto"},Sd={class:"ms-md-2 text-nowrap"},Cd={class:"d-flex flex-column"},wd={class:"d-flex flex-row flex-wrap"},Ad={key:0,class:"ms-2 text-nowrap",title:"Long entry signals"},Td={key:1,class:"ms-2 text-nowrap",title:"Long exit signals"},Pd={class:"d-flex flex-row flex-wrap"},Dd={key:0,class:"ms-2 text-nowrap"},Ld={key:1,class:"ms-2 text-nowrap"},Id={class:"ms-auto d-flex align-items-center w-auto"},kd=gd(()=>N("small",{class:"text-nowrap"},"Heikin Ashi",-1)),Od={class:"ms-2"},Md={class:"ms-2 me-0 me-md-1"},Bd={class:"h-100 w-100 d-flex"},Vd={class:"flex-grow-1"},Ed={key:1,class:"m-auto"},Nd={key:1,style:{"font-size":"1.5rem"}},Rd={key:2},zd={key:0,class:"w-25"},$d=Ne({__name:"CandleChartContainer",props:{trades:{required:!1,default:()=>[],type:Array},availablePairs:{required:!0,type:Array},timeframe:{required:!0,type:String},historicView:{required:!1,default:!1,type:Boolean},plotConfigModal:{required:!1,default:!0,type:Boolean},timerange:{required:!1,default:"",type:String},strategy:{required:!1,default:"",type:String},freqaiModel:{required:!1,default:void 0,type:String},sliderPosition:{required:!1,type:Object,default:()=>{}}},setup(t){const e=t,a=wr(),n=Ar(),o=lo(),r=Dt(),i=F(),s=W(()=>{var b,m;return e.historicView?(b=o.activeBot.history[`${o.activeBot.plotPair}__${e.timeframe}`])==null?void 0:b.data:(m=o.activeBot.candleData[`${o.activeBot.plotPair}__${e.timeframe}`])==null?void 0:m.data}),l=W(()=>{var b;return e.strategy||((b=s.value)==null?void 0:b.strategy)||""}),c=W(()=>s.value?s.value.all_columns??s.value.columns:[]),u=W(()=>s.value?s.value.columns??s.value.all_columns:[]),d=W(()=>s.value&&s.value.data.length>0),p=W(()=>e.historicView?o.activeBot.historyStatus===ze.loading:o.activeBot.candleDataStatus===ze.loading),h=W(()=>{switch(e.historicView?o.activeBot.historyStatus:o.activeBot.candleDataStatus){case ze.not_loaded:return"Not loaded yet.";case ze.loading:return"Loading...";case ze.success:return"No data available";case ze.error:return"Failed to load data";default:return"Unknown"}}),f=F(!1);function y(){e.plotConfigModal?f.value=!f.value:i.value=!i.value}function g(){o.activeBot.plotPair&&e.timeframe&&(e.historicView?o.activeBot.getPairHistory({pair:o.activeBot.plotPair,timeframe:e.timeframe,timerange:e.timerange,strategy:e.strategy,freqaimodel:e.freqaiModel,columns:r.usedColumns}):o.activeBot.getPairCandles({pair:o.activeBot.plotPair,timeframe:e.timeframe,columns:r.usedColumns}))}return Y(()=>e.availablePairs,()=>{e.availablePairs.find(b=>b===o.activeBot.plotPair)||([o.activeBot.plotPair]=e.availablePairs,g())}),Y(()=>o.activeBot.selectedPair,()=>{o.activeBot.plotPair=o.activeBot.selectedPair}),Y(()=>o.activeBot.plotPair,()=>{e.historicView||g()}),Y(()=>r.plotConfig,()=>{const b=r.usedColumns.some(m=>c.value.includes(m)&&!u.value.includes(m));a.useReducedPairCalls&&b&&(console.log("triggering refresh"),g())}),wa(()=>{i.value=e.plotConfigModal,o.activeBot.selectedPair?o.activeBot.plotPair=o.activeBot.selectedPair:e.availablePairs.length>0&&([o.activeBot.plotPair]=e.availablePairs),r.plotConfigChanged(),d.value||g()}),(b,m)=>{const x=Tr,v=ct,C=Pr,_=Dr,w=No,P=Lr,A=md,L=Ll,V=Ir;return M(),$("div",yd,[N("div",bd,[N("div",_d,[N("div",xd,[N("span",Sd,fe(S(l))+" | "+fe(t.timeframe||""),1),O(S(Bo),{modelValue:S(o).activeBot.plotPair,"onUpdate:modelValue":m[0]||(m[0]=B=>S(o).activeBot.plotPair=B),class:"ms-md-2",options:t.availablePairs,style:{"min-width":"7em"},size:"sm",clearable:!1,onInput:g},null,8,["modelValue","options"]),O(v,{title:"Refresh chart",class:"ms-2",disabled:!S(o).activeBot.plotPair||S(p),size:"sm",onClick:g},{default:z(()=>[O(x)]),_:1},8,["disabled"]),S(p)?(M(),X(C,{key:0,small:"",class:"ms-2",label:"Spinning"})):j("",!0),N("div",Cd,[N("div",wd,[S(s)?(M(),$("small",Ad,"Long entries: "+fe(S(s).enter_long_signals||S(s).buy_signals),1)):j("",!0),S(s)?(M(),$("small",Td,"Long exit: "+fe(S(s).exit_long_signals||S(s).sell_signals),1)):j("",!0)]),N("div",Pd,[S(s)&&S(s).enter_short_signals?(M(),$("small",Dd,"Short entries: "+fe(S(s).enter_short_signals),1)):j("",!0),S(s)&&S(s).exit_short_signals?(M(),$("small",Ld,"Short exits: "+fe(S(s).exit_short_signals),1)):j("",!0)])])]),N("div",Id,[O(_,{modelValue:S(a).useHeikinAshiCandles,"onUpdate:modelValue":m[1]||(m[1]=B=>S(a).useHeikinAshiCandles=B)},{default:z(()=>[kd]),_:1},8,["modelValue"]),N("div",Od,[O(w)]),N("div",Md,[O(v,{size:"sm",title:"Plot configurator",onClick:y},{default:z(()=>[O(P,{width:"12",height:"12"})]),_:1})])])]),N("div",Bd,[N("div",Vd,[S(d)?(M(),X(A,{key:0,dataset:S(s),trades:t.trades,"plot-config":S(r).plotConfig,"heikin-ashi":S(a).useHeikinAshiCandles,"use-u-t-c":S(a).timezone==="UTC",theme:S(a).chartTheme,"slider-position":t.sliderPosition,"color-up":S(n).colorUp,"color-down":S(n).colorDown,"label-side":S(a).chartLabelSide},null,8,["dataset","trades","plot-config","heikin-ashi","use-u-t-c","theme","slider-position","color-up","color-down","label-side"])):(M(),$("div",Ed,[S(p)?(M(),X(C,{key:0,label:"Spinning"})):(M(),$("div",Nd,fe(S(h)),1)),S(o).activeBot.historyTakesLonger?(M(),$("p",Rd," This is taking longer than expected ... Hold on ... ")):j("",!0)]))]),O(io,{name:"fade"},{default:z(()=>[t.plotConfigModal?j("",!0):bt((M(),$("div",zd,[O(L,{columns:S(c),"is-visible":S(i)??!1},null,8,["columns","is-visible"])],512)),[[ra,S(i)]])]),_:1})])]),t.plotConfigModal?(M(),X(V,{key:0,id:"plotConfiguratorModal",modelValue:S(f),"onUpdate:modelValue":m[2]||(m[2]=B=>ie(f)?f.value=B:null),title:"Plot Configurator","ok-only":"","hide-backdrop":""},{default:z(()=>[O(L,{"is-visible":S(f),columns:S(c)},null,8,["is-visible","columns"])]),_:1},8,["modelValue"])):j("",!0)])}}}),Zd=Aa($d,[["__scopeId","data-v-dd96725a"]]);export{Zd as _};
//# sourceMappingURL=CandleChartContainer-D-o4GMGR.js.map
